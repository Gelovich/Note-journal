window.jQuery&&window.jQuery.fn.bem&&window.bemhtml&&(BEM.DOM.decl("search2",{submit:function(t){var e=BEM.blocks["cbir-intent"].getInstance();return"similar"===BEM.blocks["i-global"].param("page")&&e&&e.isVisible()?(t.preventDefault(),void Ya.reactBus.emit("cbir:change-similar-query",this.val())):this.__base.apply(this,arguments)},_buildUrl:function(){var t=BEM.blocks["cbir-intent"].getInstance();if(t&&t.isVisible()){var e=this.domElem.serializeArray().reduce(function(t,e){return t[e.name]=e.value,t},{});return e=Object.assign(e,{cbir_page:"similar"}),BEM.blocks.uri.buildRelativeUrl(BEM.blocks.uri.delParams(Object.keys(e)),e)}return this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"input",modName:"cbir-editable-query",modVal:!0},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindEvents()}}},bindEvents:function(){return this.__base.apply(this,arguments),BEM.blocks["cbir-intent"].on("updateInputOffset",this.updateInputOffset,this),this},destruct:function(){BEM.blocks["cbir-intent"].un("updateInputOffset",this.updateInputOffset,this),this.__base.apply(this,arguments)},updateInputOffset:function(t,e){this.elem("control").css("text-indent",e)}}),BEM.DOM.decl({block:"cbir-intent",modName:"cbir-editable-query",modVal:!0},{bindEvents:function(){return this.__base.apply(this,arguments),this.bindToWin("resize",this.updateInputOffset),this},show:function(t){return(t=t||{}).src&&this.setThumbSrc(t.src),this.setMod("visible","yes").updateInputOffset()},hide:function(t){return(t=t||{}).clear&&this.clearThumb(),this.delMod("visible").updateInputOffset()},setLoadingState:function(){return this.__base.apply(this,arguments),this.updateInputOffset()},setLoadedState:function(){return this.__base.apply(this,arguments),this.updateInputOffset()},updateInputOffset:function(){var t=this.isVisible()?this.domElem.width():0;return this.trigger("updateInputOffset",t),this}}));