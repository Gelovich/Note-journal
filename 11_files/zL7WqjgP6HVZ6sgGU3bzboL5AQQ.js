!function(e){function t(t){for(var n,r,i=t[0],a=t[1],s=0,c=[];s<i.length;s++)r=i[s],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&c.push(o[r][0]),o[r]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(u&&u(t);c.length;)c.shift()()}var n={},r={75:0},o={75:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[];r[e]?t.push(r[e]):0!==r[e]&&{96:1}[e]&&t.push(r[e]=new Promise(function(t,n){for(var o="static/chunks/"+{96:"b3e4551dcc40997bda2e"}[e]+".css",a=i.p+o,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var u=(d=s[c]).getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(u===o||u===a))return t()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){var d;if((u=(d=l[c]).getAttribute("data-href"))===o||u===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var o=t&&t.target&&t.target.src||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");i.request=o,delete r[e],p.parentNode.removeChild(p),n(i)},p.href=a,document.getElementsByTagName("head")[0].appendChild(p)}).then(function(){r[e]=0}));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise(function(t,r){n=o[e]=[t,r]});t.push(n[2]=a);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=function(e){return i.p+"static/chunks/"+{96:"b3e4551dcc40997bda2e"}[e]+".js"}(e);var u=new Error;s=function(t){c.onerror=c.onload=null,clearTimeout(l);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",u.name="ChunkLoadError",u.type=r,u.request=i,n[1](u)}o[e]=void 0}};var l=setTimeout(function(){s({type:"timeout",target:c})},12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://yastatic.net/s3/fiji-static/_/",i.oe=function(e){throw console.error(e),e};var a=window.webpackJsonp=window.webpackJsonp||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var u=s;i(i.s=1417)}({0:function(e,t){e.exports=React},1:function(e,t,n){"use strict";e.exports=n(72)},10:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){return"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement}},100:function(e,t,n){"use strict";n.d(t,"d",function(){return c}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return p}),n.d(t,"b",function(){return f});var r=n(7),o=n.n(r),i=n(167),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=o()(i);function c(e,t,n,r){!r.strictShow&&window&&window.sessionStorage&&window.sessionStorage.setItem(n,String(u(n)+1)),t(a({visible:!0,title:s("Войдите в Яндекс, и поиск станет лучше",{context:"Надпись в попапе, предлагающим авторизоваться или зарегистрироваться"})},r)),e&&e.preventDefault()}function u(e){return"undefined"===typeof window?0:Number(window&&window.sessionStorage&&window.sessionStorage.getItem(e))||0}function l(e,t){return void 0===t&&(t=1),u(e)<t}function d(){return encodeURIComponent(window.location.href)}function p(e,t){return"https://passport.yandex."+e+"/auth?retpath="+d()+"&origin="+t}function f(e,t){return"https://passport.yandex."+e+"/registration?retpath="+d()+"&origin="+t}},101:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.message="Баобаб-нода не инициализирована!",t}return o(t,e),t}(Error);t.BaobabNotInitError=i},102:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(35),c=n(5);function u(e,t,n,o){return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=e.current.childProps,l=u[t],d=r({},n);c.isEventDataAttrsConstructor(n.data)&&(d.data=n.data({props:u},a));var p,f=o(d,a,r(r({},e.current.childProps),e.current.extraChildProps));if("function"===typeof l)p=l.call.apply(l,i([this],a,[{withEvent:f}]));else if("undefined"!==typeof l)throw new Error("Вы пытаетесь вызвать событие "+t+". Но это "+typeof l+', со значением "'+l+'"');return p}}function l(e,t){var n={},r=e.current.nodeData.events;for(var o in r){var i=r[o];c.isEventDeclaration(i)&&(n[o]=u(e,o,i,t))}return n}function d(e,t,n){return!e||!c.areEqualsNodes(e,t,n)}t.wrapActions=l,t.shouldRecreateNode=d,t.BaobabNode=function(e){var t,n,o=e.nodeDeclaration,i=e.logNode,u=e.children,p=e.childProps,f=a.useContext(s.BaobabContext),h=f?function(e,t,n,r){return e.parentNode?c.createChildData(t,n,r):c.createRootData(t,n,r)}(f,p,o,i):{},m=a.useRef({node:void 0,childProps:p,extraChildProps:{},nodeData:h}),v=d(m.current.node,h,null===(t=f)||void 0===t?void 0:t.parentNode);v&&(m.current.nodeData=h),m.current.childProps=p;var b=c.useBaobab(m.current.nodeData);if(v){var g=b.node,y=b.logEvent;m.current.node=g,m.current.extraChildProps=m.current.nodeData.events?l(m,y):{};var O=o.extra;O&&(O.id&&(m.current.extraChildProps.baobabId=g&&g.id,m.current.extraChildProps.baobabNode=g),O.withLogger&&(m.current.extraChildProps.baobabNodeLogger=null===(n=f)||void 0===n?void 0:n.logger))}return f?a.createElement(s.BaobabContext.Provider,{value:b.nextContext},u(Object.assign({},p,m.current.extraChildProps))):a.createElement(a.Fragment,null,u(r({},p)))},t.BaobabNode.isBaobabNode=!0},103:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(35),s=function(e){function t(t){var n=e.call(this,t)||this,r=t.Logger,o=t.Sender,i=t.loggerProps,a=t.onLoggerInit,s=new r(i,o);return n.nextContext={logger:s},a&&a(s),n}return o(t,e),t.prototype.render=function(){var e=this.props.children;return i.createElement(a.BaobabContext.Provider,{value:this.nextContext},e)},t}(i.Component);t.BaobabRoot=s},104:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37);t.logClick=function(e){return e?{event:r.BaobabLogEventType.Click,data:e}:{event:r.BaobabLogEventType.Click}},t.logScroll=function(e){return e?{event:r.BaobabLogEventType.Scroll,data:e}:{event:r.BaobabLogEventType.Scroll}},t.logTech=function(e,t){return t?{event:r.BaobabLogEventType.Tech,type:e,data:t}:{event:r.BaobabLogEventType.Tech,type:e}}},105:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var r=n(4),o=Object(r.cn)("Rating"),i=o()},106:function(e,t,n){},11:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var r=n(4),o=Object(r.cn)("MMDirectSnippet"),i=o("Line")},110:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("MMViewerModal")},112:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});function r(e,t){void 0===t&&(t=[]);var n=[].concat(t);return e.forEach(function(e){void 0===e.pos||n[e.pos]||(n[e.pos]=e)}),n}function o(e,t){return void 0===t&&(t={}),e&&e.forEach(function(e){e.rimid&&!t[e.rimid]&&(t[e.rimid]=e)}),t}},113:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s});var r,o=n(0),i=n(4);n(554);!function(e){e.xs="xs",e.s="s",e.n="n",e.m="m",e.l="l",e.xl="xl"}(r||(r={}));var a=Object(i.cn)("Spinner");function s(e){var t=e.size,n=e.className,r=void 0===n?"":n,i=e.type,s=e.theme,c=void 0===s?"yellow":s;return o.createElement("div",{className:a({size:t,type:i,theme:c},[r])})}},114:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(45),o=(n(638),Object(r.a)("Section"))},115:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r={BACKSPACE:8,TAB:9,ENTER:13,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46};function o(e,t){return t.some(function(t){return r[t]===e||t===e})}},117:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0);function o(){var e=Object(r.useRef)(!0);return e.current?(e.current=!1,!0):e.current}},118:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("MMRelatedImages")},12:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r={BACKSPACE:8,TAB:9,ENTER:13,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46};function o(e,t){return t.some(function(t){return r[t]===e||t===e})}},120:function(e,t,n){n.r(t);var r=n(7);Object(r.setI18nLang)("ru")},123:function(e,t,n){n.r(t);var r=n(2338);n.d(t,"ru",function(){return r.a})},124:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"d",function(){return s});var r=n(4),o=Object(r.cn)("Path"),i=o(),a=o("Item"),s=o("Separator")},126:function(e,t,n){"use strict";var r=n(0),o=function(e,t){return"boolean"===typeof t?t:!e};t.a=function(e){return Object(r.useReducer)(o,e)}},127:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(451);function i(e,t){return e?r.createElement("b",{key:t},e):""}t.HIGHLIGHT_OPEN="[",t.HIGHLIGHT_CLOSE="]";var a=function(e){return e};function s(e,n){void 0===n&&(n={});var r={highlighter:n.highlighter||i,delimiters:n.delimiters||{start:t.HIGHLIGHT_OPEN,end:t.HIGHLIGHT_CLOSE},textPreprocessor:n.textPreprocessor||a};return o.markup(e,r)}t.markup=s,t.makeHighlighter=function(e){return function(t){return s(t,e)}}},128:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("ImagesViewer")},129:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("MMTiledImages")},13:function(e,t){e.exports=ReactDOM},130:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("ImagesViewerGallery")},133:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return s});var r,o=n(253),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};!function(e){e[e.timeout=0]="timeout",e[e.error=1]="error",e[e.canceled=2]="canceled"}(r||(r={}));var a=function(){},s=function(){function e(e,t){this.startLoadTime=0,this.onResult=e,this.timeout=t&&t.timeout,this.itemTimeout=t&&t.itemTimeout,this.onImageError=t&&t.onImageError}return e.prototype.stop=function(){this.destroyLoaderElement(),this.watchdog&&clearTimeout(this.watchdog),this.onResult=a},e.prototype.startLoading=function(){var e=this;this.startWatchdog(),this.tryLoadNext()||setTimeout(function(){return e.onResult(r.error)},0)},e.prototype.onLoad=function(){var e,t=this.getResultData();this.loader&&this.loader.src&&o.a.instance().addToHistory(this.loader.src),t&&!t.loadTime&&(e=i(i({},t),{loadTime:Date.now()-this.startLoadTime})),this.onResult(void 0,e),this.stop()},e.prototype.onError=function(){this.tryLoadNext()||this.onResult(r.error)},e.prototype.onItemLoadingError=function(){this.onImageError&&this.loader&&this.loader.src&&this.onImageError(this.loader.src),this.onError()},e.prototype.tryLoadNext=function(){var e=this.getUrlFromItem();return this.destroyLoaderElement(),!!e&&(this.createLoaderElement(e),!0)},e.prototype.createLoaderElement=function(e){var t=this;this.itemTimeout&&(this.itemWatchdog=window.setTimeout(function(){return t.onError()},this.itemTimeout));var n=this.loader=new Image;n.onload=function(){return t.onLoad()},n.onerror=function(){return t.onItemLoadingError()},n.src=e,this.startLoadTime=Date.now()},e.prototype.destroyLoaderElement=function(){var e=this.loader;e&&(this.itemWatchdog&&clearTimeout(this.itemWatchdog),e.onload=a,e.onerror=a,e.src="",this.loader=void 0)},e.prototype.startWatchdog=function(){var e=this;this.timeout&&!this.watchdog&&(this.watchdog=window.setTimeout(function(){var t=e.onResult;e.stop(),t(r.timeout)},this.timeout))},e}()},134:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(26),o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},i=function(){function e(e){this.isLoading=!1,this.chain=[];var t=e.forceFailedReload,n=void 0!==t&&t,i=e.multiRequestLimit,a=void 0===i?1:i,s=e.requestFunction,c=void 0===s?r.get:s,u=e.storeGetter,l=e.storeSetter,d=o(e,["forceFailedReload","multiRequestLimit","requestFunction","storeGetter","storeSetter"]);this.request=c,this.ajaxOptions=d,this.storeGetter=u,this.storeSetter=l,this.loadingParams={forceFailedReload:n},this.multiRequestLimit=a>1?Math.floor(a):1}return e.prototype.precache=function(e,t){var n=this;e.forEach(function(e,r){var o=n.getItemID(e);n.getFromStore(o)||n.chain.push({id:o,data:e,opts:t&&t[r]})}),this.isLoading||this.loadChainItem()},e.prototype.load=function(e,t){void 0===t&&(t={});var n=this.getItemID(e);this.getFromStore(n)||(this.isLoading&&this.currentLoadingItems&&this.currentLoadingItems.some(function(e){return e.id===n})||(t.cleanChain&&this.cleanChain(),t.preempt?(this.chain.unshift({id:n,data:e,opts:t}),this.currentRequest&&(this.currentRequest.abort(),this.loadChainItem())):this.chain.push({id:n,data:e,opts:t}),this.isLoading||this.loadChainItem()))},e.prototype.cleanChain=function(){this.chain.length=0},e.prototype.getFromStore=function(e){return this.storeGetter(e)},e.prototype.setInStore=function(e,t){return this.storeSetter(e,t)},e.prototype.onRequestFinish=function(e,t){var n=this;this.currentRequest=void 0,this.currentLoadingItems=void 0,e.forEach(function(e,r){var o=t[r];n.setInStore(e.id,o);var i=e.opts&&e.opts.callback;i&&i(o)})},e.prototype.extractNextChainItems=function(){for(var e,t=this.multiRequestLimit,n=[],r={};this.chain.length&&n.length<t;)if(e=this.chain.shift()){var o=this.getFromStore(e.id),i=!(!o||!o.isFailed)&&Boolean(this.loadingParams.forceFailedReload||(e.opts||{}).forceFailedReload);o&&!i&&(e=void 0),e&&!r[e.id]&&(r[e.id]=!0,n.push(e))}return n},e.prototype.loadChainItem=function(){var e=this,t=this.extractNextChainItems();if(!t.length)return this.isLoading=!1,this.currentLoadingItems=void 0,void(this.currentRequest=void 0);this.isLoading=!0,this.currentLoadingItems=t;var n=this.getUrl(t);this.currentRequest=this.request(n,this.ajaxOptions,{successCallback:function(n){var r=e.extractResponseData(n).map(function(e){return{data:e,isFailed:!1}});e.onRequestFinish(t,r),e.loadChainItem()},failureCallback:function(){var n=t.map(function(){return{isFailed:!0}});e.onRequestFinish(t,n),e.loadChainItem()}})},e}()},135:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(1),i=n(5),a=n(41),s=Object(o.compose)(Object(i.withBaobab)({name:"button"}),Object(o.withBemMod)(Object(a.c)(),{type:a.a.link},function(){return function(e){return r.createElement("a",{className:Object(a.c)({},[e.className]),href:e.url,rel:"noopener",ref:e.forwardRef,target:e.target||"_blank",onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onContextMenuCapture:e.onContextMenuCapture},e.icon&&r.createElement("span",{className:Object(a.c)("Icon")},e.icon),r.createElement("span",{className:Object(a.c)("Text")},e.text),e.rightText&&r.createElement("span",{className:Object(a.c)("RightText")},e.rightText))}}))},136:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0);function o(){var e=Object(r.useRef)(!1),t=Object(r.useCallback)(function(){return e.current},[]);return Object(r.useEffect)(function(){return e.current=!0,function(){e.current=!1}}),t}},137:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUseDOM="undefined"!==typeof window&&window.document&&window.document.createElement},138:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){return"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement}},14:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement)},140:function(e,t,n){e.exports=n(231)()},1417:function(e,t,n){n(120),e.exports=n(1418)},1418:function(e,t,n){"use strict";n.r(t),n.d(t,"App",function(){return i});var r=n(32),o=n(323),i=Object(r.b)("ImagesViewer")(o.a)},145:function(e,t,n){"use strict";function r(e){return e.schemaOrgSnippet?e.schemaOrgSnippet:e.snippet}n.d(t,"a",function(){return r})},146:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(35),a=n(101);t.useBaobab=function(e){var t=o.useContext(i.BaobabContext),n=o.useRef({logEvent:function(){return function(){}},startCreate:!1}),s=o.useMemo(function(){if(t){var o=t.logger,i=t.parentNode,a=i?o.prepareChild(i,e):o.prepareRoot(e),s=n.current;return s.startCreate=!0,s.nextContext=r(r({},t),{parentNode:a}),s.node=a,s.logEvent=function(e,t,n){if(!s.node||!s.nextContext)return function(){};var r=s.node,o=s.nextContext.logger,i=o.createEvent(r,e,t,n),a=o.withEvent.bind(o,i);return a(function(e){return setTimeout(e,0)}),o.dispatchEvent(r,i),a},a}},[t,e]);return o.useEffect(function(){var e=n.current;if(e.startCreate){if(!t||!s)throw new a.BaobabNotInitError;return t.logger.attachNode(s),e.startCreate=!1,s.__useBaobab=!0,function(){return t.logger.detachNode(s)}}},[t,e,s]),o.useMemo(function(){var e=n.current;return{logEvent:e.logEvent,nextContext:e.nextContext,node:e.node}},[])}},147:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(76);t.withBaobab=function(e,t){var n=function(t){var n=t.displayName||t.name||"Component",s=function(n){var s=n.__forwardedRef__,c=n.logNode,u=o(n,["__forwardedRef__","logNode"]);return i.createElement(a.BaobabComponents.Consumer,null,function(n){var o=n.BaobabNode;return i.createElement(o,{nodeDeclaration:e,logNode:c,childProps:u},function(e){return i.createElement(t,r({},u,e,{ref:s}))})})};if(s.displayName="AddBaobab("+n+")",e.extra&&e.extra.ref){var c=i.forwardRef(function(e,t){return i.createElement(s,r({},e,{__forwardedRef__:t}))});return c.displayName="AddBaobab("+n+")",c}return s};return t?n(t):n}},148:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(103),s=n(76);t.withBaobabRoot=function(e,t,n,c){return function(u){return function(l){var d=l.baobab,p=l.logNode,f=o(l,["baobab","logNode"]),h=i.useContext(s.BaobabComponents).BaobabNode;return i.createElement(a.BaobabRoot,{Logger:t,Sender:n,loggerProps:d,onLoggerInit:c},e?i.createElement(h,{nodeDeclaration:e,logNode:p,childProps:f},function(e){return i.createElement(u,r({},f,e))}):i.createElement(u,r({},f)))}}}},149:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(35),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nextContext={logger:t.props.logger,parentNode:t.props.parentNode},t}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.logger,r=e.parentNode;return(this.nextContext.logger!==n||this.nextContext.parentNode!==r)&&(this.nextContext={logger:n,parentNode:r}),i.createElement(a.Provider,{value:this.nextContext},t)},t}(i.Component);t.BaobabAppendTo=s},15:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});var r=n(4),o=n(10),i=Object(r.cn)("Theme"),a="",s=function(e){var t=e.theme,n=e.root,r=void 0===n?Object(o.a)()?document.body:null:n;if(Object(o.a)()){if(!r)throw new Error("Значение в root не является DOM-элементом, невозможно установить глобальную тему.");var s=r.className.replace(a,"");a=i(t),r.className=s+" "+a}}},150:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getBundleUrl=function(){return"https://frontend-internal.s3.mds.yandex.net/baobab-viewer/"+t.props.version+"/button.js"},t}return o(t,e),t.prototype.componentDidMount=function(){var e=document.createElement("script");e.src=this.getBundleUrl(),e.async=!0,e.id="BaobabViewerInject",e.dataset.version=this.props.version,e.dataset.service=this.props.service,e.dataset.positionX=this.props.positionX,e.dataset.positionY=String(this.props.positionY),document.body.appendChild(e)},t.prototype.render=function(){return null},t.defaultProps={version:"0.3.0",positionX:"left",positionY:0},t.useLogger=function(e){window.__baobabLogger=e},t}(n(0).Component);t.BaobabInjectorButton=i},151:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.function=0]="function",e[e.class=1]="class",e[e.portalHost=4]="portalHost",e[e.host=5]="host"}(t.WorkTag||(t.WorkTag={}))},152:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEventDataAttrsConstructor=function(e){return"function"===typeof e},t.isEventDeclaration=function(e){return Boolean(e)},t.isNodeAttrsConstructor=function(e){return"function"===typeof e}},153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Click="click",e.Scroll="scroll",e.Tech="tech",e.Create="show",e.Append="append",e.Visibility="visibility"}(t.BaobabLogEventType||(t.BaobabLogEventType={})),function(e){e.Show="show",e.Hide="hide"}(t.VisibilityChangeType||(t.VisibilityChangeType={})),t.isTreeNode=function(e){return"key"in e},t.isChildNode=function(e){return"parent"in e},t.isRootNode=function(e){return!("parent"in e)}},154:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.NoSend="no send",e.SendBeacon="sendBeacon",e.Ajax="ajax",e.Img="tag img"}(t.BaobabSendWay||(t.BaobabSendWay={}))},155:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getCacheKey=function(e){if(e.key)return e.key;var t=e.attrs,n=e.name;if(t)for(var r in n+=":",t)n+=""+r+t[r];return n},t.prototype.createChildNode=function(t,n){var r,o,a=this.getCacheKey(t),s=n.mapChildren[a];if(s)try{for(var c=i(s),u=c.next();!u.done;u=c.next()){var l=u.value;if(!l.flags.created)return l.flags.created=!0,l}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}var d=e.prototype.createChildNode.call(this,t,n);return s?s.push(d):n.mapChildren[a]=[d],d},t}(n(77).Logger);t.LoggerWithCache=a},156:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37),o=function(){function e(e){var t=e.hrefPrefix,n=e.hrefPostfix;this.events=[],this.waitTime=100,this.hrefPrefix=t,this.hrefPostfix=n}return e.prototype.clientAction=function(e,t){var n=e.eventData.event;if(n===r.BaobabLogEventType.Click)this.click(e,t);else if(n===r.BaobabLogEventType.Scroll)this.scroll(e,t);else{if(n!==r.BaobabLogEventType.Tech)throw new Error("Неподдерживаемый тип события в Баобаб: "+n);this.tech(e,t)}},e.prototype.click=function(e,t){var n=e.node,o=e.eventData;this.logEvent({event:r.BaobabLogEventType.Click,service:o.service,subservice:o.subservice,"event-id":o.id,id:n.id,cts:o.cts,data:o.data,behaviour:o.behaviour},t)},e.prototype.scroll=function(e,t){var n=e.node,o=e.eventData;this.logEvent({event:r.BaobabLogEventType.Scroll,service:o.service,subservice:o.subservice,"event-id":o.id,id:n.id,cts:o.cts,data:o.data},t)},e.prototype.tech=function(e,t){var n=e.node,o=e.eventData;this.logEvent({event:r.BaobabLogEventType.Tech,service:o.service,subservice:o.subservice,type:o.type,"event-id":o.id,id:n.id,cts:o.cts,data:o.data},t)},e.prototype.appendTree=function(e,t){var n=e.node,o=e.eventData;this.logShowEvent({event:r.BaobabLogEventType.Append,tree:n,cts:o.cts,"trigger-event-id":o.triggerEvent?o.triggerEvent.id:null,"trigger-event-trusted":o.triggerEventTrusted},t)},e.prototype.createTree=function(e,t){var n=e.node,o=e.eventData;this.logShowEvent({event:r.BaobabLogEventType.Create,tree:n,cts:o.cts,"trigger-event-id":o.triggerEvent?o.triggerEvent.id:null,"trigger-event-trusted":o.triggerEventTrusted},t)},e.prototype.detachTree=function(e,t){var n=e.node,o=e.eventData,i={event:r.BaobabLogEventType.Visibility,type:r.VisibilityChangeType.Hide,"block-id":n.id,cts:o.cts,"trigger-event-id":o.triggerEvent?o.triggerEvent.id:null,"trigger-event-trusted":o.triggerEventTrusted};this.logEvent(i,t)},e.prototype.attachTree=function(e,t){var n=e.node,o=e.eventData,i={event:r.BaobabLogEventType.Visibility,type:r.VisibilityChangeType.Show,"block-id":n.id,cts:o.cts,"trigger-event-id":o.triggerEvent?o.triggerEvent.id:null,"trigger-event-trusted":o.triggerEventTrusted};this.logEvent(i,t)},e.prototype.logEvent=function(e,t){var n=this;this.events.push({data:e,listener:t}),this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(function(){return n.sendData()},this.waitTime)},e.prototype.logShowEvent=function(e,t){this.sendByAjax([{data:e,listener:t}])},e.prototype.sendData=function(){for(var e=this,t=0;t<this.events.length;t+=42){var n=this.events.slice(t,t+42),r=n.map(function(t){return"/events="+encodeURIComponent(JSON.stringify([t.data]))+e.hrefPostfix}).join("\r\n").length>6e4;-1!==navigator.userAgent.indexOf("Chrome")&&r?this.sendByAjax(n):this.sendBySendBeacon(n)||this.sendByImg(n)}this.events=[]},e.prototype.sendBySendBeacon=function(e){var t=this;if(!navigator.sendBeacon)return!1;var n=this.getEventRecords(e).join("\r\n");return!!navigator.sendBeacon(this.hrefPrefix,n)&&(e.forEach(function(e){return t.eventSend(e,{way:r.BaobabSendWay.SendBeacon,sentContentLength:n.length,success:!0})}),!0)},e.prototype.sendByImg=function(e){var t=this;return this.getEventRecords(e).forEach(function(n,o){var i=document.createElement("img"),a=t.hrefPrefix+n;i.addEventListener("load",function(){return t.eventSend(e[o],{way:r.BaobabSendWay.Img,sentContentLength:a.length,success:!0})}),i.addEventListener("error",function(){return t.eventSend(e[o],{way:r.BaobabSendWay.Img,sentContentLength:a.length,success:!1})}),i.src=a}),!0},e.prototype.sendByAjax=function(e){var t=this,n=this.getEventRecords(e).join("\r\n"),o=new XMLHttpRequest;return o.addEventListener("readystatechange",function(){o.readyState===XMLHttpRequest.DONE&&e.forEach(function(e){return t.eventSend(e,{way:r.BaobabSendWay.Ajax,success:200===o.status,sentContentLength:n.length,status:o.status,xmlHttpRequest:o})})}),o.open("POST",this.hrefPrefix),o.send(n),!0},e.prototype.getEventRecords=function(e){var t=this;return e.map(function(e){return"/events="+encodeURIComponent(JSON.stringify([e.data]))+t.hrefPostfix})},e.prototype.eventSend=function(e,t){e.listener&&e.listener({eventData:e.data,sendInfo:t})},e}();t.Sender=o},157:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(37);function a(e){return e.tag===i.WorkTag.host&&(Boolean(e.pendingProps&&e.pendingProps.onClick)||"a"===e.type||"button"===e.type)}function s(e){return Boolean(e&&"pendingProps"in e&&"sibling"in e&&"child"in e&&"return"in e&&"tag"in e&&"type"in e&&"stateNode"in e)}function c(e){var t,n,r,o=null===(r=null===(n=null===(t=e)||void 0===t?void 0:t.updateQueue)||void 0===n?void 0:n.lastEffect)||void 0===r?void 0:r.deps;if(Array.isArray(o))for(var i=0;i<o.length;i++){var a=o[i];if(a&&a.__useBaobab)return a}}function u(e){return Boolean(e&&(e.tag===i.WorkTag.function||e.tag===i.WorkTag.class)&&("isBaobabNode"in e.type&&e.type.isBaobabNode||c(e)))}function l(e){if(u(e))return e.stateNode?e.stateNode.node:c(e)}function d(e){var t;if(e)return s(e)?e:(t=e)._reactRootContainer&&t._reactRootContainer._internalRoot.current||void 0||function(e){var t=function(e){var t=Object.keys(e).reduce(function(e,t){return e||0===t.indexOf("__reactInternalInstance$")&&t},!1);return t?e[t]:void 0},n=t(e);if(!n&&e.firstElementChild)for(var r=t(e.firstElementChild);r;){if(r.tag===i.WorkTag.portalHost&&r.stateNode.containerInfo===e){n=r;break}r=r.return||void 0}return n}(e)}function p(e){if(e)for(var t=d(e);t;){if(u(t))return t;t=t.return||void 0}}function f(e,t){for(var n=[],r=t?d(e):p(e);r;){var o=r.child,s=l(r);if(s){var c={path:(t&&t.path?t.path+".":"")+s.name,baobab:s},u=o?f(o,c):[];u.length>0&&(c.children=u),n=n.concat(c)}else{var h=a(r);if(r.tag===i.WorkTag.host&&t&&!t.container&&(t.container=r.stateNode),h){var m=r.stateNode;t||(t={path:"",baobab:void 0}),!t.baobab||t.clickElement||t.errorElements?(t.errorElements||(t.errorElements=t.clickElement?[t.clickElement]:[],delete t.clickElement),t.errorElements.push(m)):t.clickElement=m}o&&(n=n.concat(f(o,t)))}r=r.sibling||void 0}return n}t.isClickableComponents=a,t.isReactInternalFiber=s,t.getBaobabNodeFromUseBaobab=c,t.isReactBaobabNode=u,t.getNodeFromThis=l,t.getComponent=d,t.getBaobabComponent=p,t.getNode=function(e){if(e){var t=p(e);return t?l(t):void 0}},t.findById=function e(t,n){return t.baobab&&t.baobab.id===n?t:t.children&&t.children.reduce(function(t,r){return t||e(r,n)},void 0)},t.createTree=f,t.getAllTrees=function(e){var t=document.querySelectorAll(e);return o(t).reduce(function(e,t){return t?e.concat(f(t)):e},[])},t.filterErrors=function e(t){var n=t.errorElements?[t]:[];return t.children?t.children.reduce(function(t,n){return t.concat(e(n))},n):n}},158:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(37),i=n(77);function a(e,t,n){void 0===n&&(n={});var i={name:n.name||t.name},a=n.key||t.key;if(a&&(i.key=a),(t.events||n.events)&&(i.events=r(r({},t.events),n.events)),t.attrs||n.attrs){var s=o.isNodeAttrsConstructor(t.attrs)?t.attrs(e):t.attrs,c=o.isNodeAttrsConstructor(n.attrs)?n.attrs(e):n.attrs;i.attrs=r(r({},s),c)}return i}t.createChildData=a,t.createRootData=function(e,t,n){var r=a(e,t,n);return void 0===r.attrs&&(r.attrs={}),"schema-ver"in r.attrs||(r.attrs["schema-ver"]=i.SCHEMA_VER),r},t.areEqualsNodes=function(e,t,n){var r,o;if(e.key||t.key)return e.key===t.key;if(e.name!==t.name)return!1;if("parent"in e&&e.parent.id!==(null===(r=n)||void 0===r?void 0:r.id))return!1;if(!("parent"in e)&&(null===(o=n)||void 0===o?void 0:o.id))return!1;var i=e.attrs,a=t.attrs;if(i===a)return!0;if(!i||!a)return!1;if(Object.keys(i).length!==Object.keys(a).length)return!1;for(var s in i)if(i[s]!==a[s])return!1;return!0}},159:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBaobabInitState=function(e){return{prefix:function(e){if("string"!==typeof e)return"b-id";for(var t=0,n=0;n<e.length;n++)t^=(t<<5)+(t>>>2)+e.charCodeAt(n);return(t&=1048575).toString(36)}(e.reqId),senderParams:function(e){if("hrefPostfix"in e)return{hrefPostfix:e.hrefPostfix,hrefPrefix:e.hrefPrefix};var t=e.reqId,n=e.table,r=e.service,o=e.slots,i=Array.isArray(o)?"/slots="+o.join(";"):"";return{hrefPostfix:"/*//"+e.pageUrl,hrefPrefix:"https://yandex.ru/clck/click/reqid="+t+i+"/table="+(n||r)}}(e)}}},16:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){}},161:function(e,t,n){"use strict";function r(e,t){if("function"!==typeof URL){var n=document.createElement("a");return n.href=e,{hostname:n.hostname,port:n.port,protocol:n.protocol,origin:n.origin}}try{return new URL(e,t)}catch(e){}}Object.defineProperty(t,"__esModule",{value:!0}),t.parseUrl=r,t.getOrigin=function(e){var t="string"===typeof e?r(e):e;if(!t)return"";if(t.origin)return t.origin;var n=t.port?":"+t.port:"";return t.protocol+"//"+t.hostname+n},t.getHostname=function(e,t){var n=r(e,t);return n?n.hostname:""}},162:function(e,t,n){"use strict";var r=n(0),o=n(51);t.a=function(e){var t=Object(r.useRef)(e);t.current=e,Object(o.a)(function(){return function(){return t.current()}})}},164:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(26),o=n(86),i=n(89),a=n(134);var s,c=(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},d="https://yabs.yandex.ru/page/",p="253184",f=["title","body","domain","warning","age","path"],h=function(e){function t(t){var n=t.storeGetter,r=t.storeSetter,o=t.requestFunction,i=l(t,["storeGetter","storeSetter","requestFunction"]),a=e.call(this,{storeGetter:n,storeSetter:r,requestFunction:o,jsonp:Boolean(i.encryptUrl)})||this;a.uniqueHandler=!0,a.params=u(u({useJsonp:!1},i),{url:d,pageId:i.pageId||p}),a.adsFieldsList=f.slice(),i.isWorkingTimeEnabled&&f.push("workingTime"),i.isRegionEnabled&&f.push("region","metro");var s=window.location,c=s.protocol,h=s.search;return a.targetRef=encodeURI(c+"//images.yandex."+i.tld+"/search"+h),a}return c(t,e),t.prototype.updateParams=function(e){this.params=Object.assign(this.params,e)},t.prototype.load=function(t,n){if(void 0===n&&(n={}),this.canLoadItem(t)){if(n.callback||!this.params.emptyResponseFallbackPageId||t.retryIndex)return e.prototype.load.call(this,t,n);e.prototype.load.call(this,t,u(u({},n),{callback:this.getRetryHandler(t,n)}))}},t.prototype.precache=function(t,n){var r=this,o=n?n.slice():[];if(this.params.emptyResponseFallbackPageId&&t.forEach(function(e,t){var n=o[t]||(o[t]={});e.retryIndex||(n.callback=r.getRetryHandler(e,{}))}),this.params.useTagsTitle){var i=t.filter(function(e){return r.canLoadItem(e)});e.prototype.precache.call(this,i,o)}else e.prototype.precache.call(this,t,o)},t.prototype.getRetryHandler=function(t,n){var r=this;return function(o){if((!o.data||!o.data.length)&&!t.retryIndex&&r.params.emptyResponseFallbackPageId){var i=u(u({},t),{retryIndex:1,text:r.params.query,pageId:r.params.emptyResponseFallbackPageId});r.setInStore(r.getItemID(i),void 0),e.prototype.load.call(r,i,u(u({},n),{preempt:!0,callback:function(e){e.data&&e.data[0]||delete r.params.emptyResponseFallbackPageId,r.setInStore(r.getItemID(t),e)}}))}}},t.prototype.canLoadItem=function(e){return!this.params.useTagsTitle||!e.rimid||Boolean(e.tags)},t.prototype.getItemID=function(e){return Object(i.c)(e,this.params)||""},t.prototype.getFullUrlParams=function(e){var t=this.params,n=e.text||Object(i.f)(e,this.params),r={"target-ref":this.targetRef,"tune-region-id":t.region,charset:"utf-8",text:n};t.experimentId&&(r["experiment-id"]=t.experimentId),t.pageReqid&&(r.reqid=t.pageReqid),t.enableFlatHighlight&&(r["enable-flat-highlight"]="1");var o=this.getImpId(e);return o&&(r["imp-id"]=o),r},t.getCountUrl=function(e,t){return""+e+t},t.prototype.extractResponseData=function(e){var n=function(e){var t,n;"string"===typeof e&&(t=e.match(/^(\/\*\*\/)?\('(.*)\'\)$/)),n=t&&t[2]?t[2]:e;try{if(!n||"{ }"===n)throw new Error("Empty response");return new Function("return"+n)()}catch(e){return{error:e}}}(e);return[t.convertDirectData(n,this.params)]},t.convertDirectData=function(e,t){var n,r,i,a,s,c=this,u=(null===e||void 0===e?void 0:e.common)||(null===(n=null===e||void 0===e?void 0:e.stat)||void 0===n?void 0:n[0]);if(!e||e.error||!u)return[];var l=t.encryptUrl;return(null===(s=(null===(r=e.premium)||void 0===r?void 0:r.ads)||e.direct_premium)||void 0===s?void 0:s[0])?a="premium":(s=(null===(i=e.direct)||void 0===i?void 0:i.ads)||e.direct_halfpremium,a="direct"),s&&s.length?s.map(function(n){var r,i=(null===(r=e.common)||void 0===r?void 0:r.linkHead)||u.link_head||"",s=n.linkTail||n.link_tail,l=d(n.url||""),p=d(n.path_url||""),h=d(n.vcardUrl||n.vcard_url||""),m=d(c.getCountUrl(i,s)),v=n.punyDomain||n.fav_domain,b=n.workingTime||n.working_time,g=n.event_hash,y=n.hit_log_id,O=n.telNum||n.phone;O&&(O=Object(o.decodeHTMLEntities)(O));var w=t.ratingPosition&&n.ratings&&n.ratings.market_rating?Number(n.ratings.market_rating):void 0,j=t.isCalloutsEnabled&&n.add_info&&n.add_info.callouts_list,C=j?c.getCallouts(j,c.maxCalloutsLength):void 0,E=n.images&&n.images.length?c.getImageData(n.images):void 0;return f.reduce(function(e,t){return void 0!==n[t]&&(e[t]="url"!==t?Object(o.decodeHTMLEntities)(n[t]):n[t]),e},{source:"direct",adType:a,vcardUrl:h,marketRating:w,callouts:C,pathUrl:p,punyDomain:v,telNum:O,workingTime:b,image:E,sitelinks:c.getSitelinks(n.sitelinks,t),countUrl:m,linkTail:s,linkHead:i,url:l,eventHash:g,hitLogId:y})},this):[];function d(e){return l&&e?l(e):e}},t.getCallouts=function(e,t){for(var n=[],r=0,i=0;i<e.length;i++){var a=Object(o.decodeHTMLEntities)(e[i]);if((r+=e[i].length)>t)break;n.push(a)}return n},t.getImageData=function(e){for(var t,n,r=1/0,o=0,i=0;i<e.length;i++){var a=e[i],s=Number(a[1]),c=Number(a[2]),u=Math.max(s,c);if(90===u)return this.convertImageArrayToObject(a);u>=90&&u<r&&(r=u,t=a),u<90&&u>o&&(o=u,n=a)}return t&&(!n||r<=150)?this.convertImageArrayToObject(t):n&&(!t||6*(90-o)<r-90)?this.convertImageArrayToObject(n):t?this.convertImageArrayToObject(t):void 0},t.convertImageArrayToObject=function(e){var t=Number(e[1]),n=Number(e[2]),r=Math.max(n,t)/90;return r>1&&(n/=r,t/=r),{width:t,height:n,url:e[0]}},t.getSitelinks=function(e,t){var n=t.encryptUrl;return e?e.filter(function(e){return Boolean(e.title&&e.url)}).map(function(e){return{url:n?n(e.url):e.url,title:Object(o.decodeHTMLEntities)(e.title)}},this):[]},t.prototype.getUrlPathFromPageId=function(e){return String(e.pageId||this.params.pageId).split("-")[0]},t.prototype.getImpId=function(e){return String(e.pageId||this.params.pageId).split("-")[1]},t.prototype.getUrl=function(e){var t=e[0].data;return Object(r.appendQueryString)(this.params.url+this.getUrlPathFromPageId(t),this.getFullUrlParams(t))},t.maxCalloutsLength=90,t}(a.a)},165:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return u});var r=n(1),o=n(25),i=n(6),a=n(44),s=n(192),c=function(e){var t=Object(i.m)(e),n=Object(i.e)(e),r=e.config,o=r.loggedIn,a=r.imagesCbirSearchUrl,s=r.openServiceOnNewTab,c=r.isFavoritesDisabled,u=r.isDiskShareEnabled,l=r.unauthPopupSimilarFlag,d=e.globalContext,p=d.tld,f=d.query,h=d.isQueryPorn,m=d.isCommercialQuery,v=d.isCommercialEnabled,b=m||v?"secondary":"primary";return{tld:p,image:t,loadedThumb:Object(i.n)(e),reqid:n&&n.reqid,pos:n&&n.pos,rimPos:e.rimSelectedIdx,loggedIn:o,imagesCbirSearchUrl:a,query:f,openServiceOnNewTab:s,isQueryPorn:h,isFavoritesDisabled:c,isDiskShareEnabled:u,unauthPopupSimilarFlag:l,experiments:e.experiments,mainButtonTheme:b}},u=Object(r.compose)(Object(o.d)(c),Object(a.a)(["image"]))(s.a)},166:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e};t.linear=r,t.easeInOutQuad=function(e){return e<.5?2*e*e:-2*(e*(e-2)+.5)},t.easeInOutSin=function(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2},t.animate=function(e,t,n,o){var i;void 0===n&&(n=r);var a=!1,s=function(r){if(!a){i||(i=r);var c=(r-i)/e;c>1&&(c=1);var u=n(c);t(u),c<1?requestAnimationFrame(s):o&&o()}};return requestAnimationFrame(s),function(){return a=!0}}},167:function(e,t,n){n.r(t);var r=n(2329);n.d(t,"ru",function(){return r.a})},168:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(138);function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){e.forEach(function(e){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)})}}},169:function(e,t,n){n.r(t);var r=n(2365);n.d(t,"ru",function(){return r.a})},17:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.theme=void 0,n(69),n(70),t.theme={color:"yandex-default",root:"default"}},170:function(e,t,n){n.r(t);var r=n(2383);n.d(t,"ru",function(){return r.a})},171:function(e,t,n){n.r(t);var r=n(2420);n.d(t,"ru",function(){return r.a})},172:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return c});var r=n(26),o=n(161),i=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement),a={images:"/images/search",video:"/video/search"};function s(e,t){if(!i)return"";var n=window.location.protocol,r=Object(o.getOrigin)(window.location);return new RegExp("https?://([a-z0-9-]+.)*yandex."+e+"(:[0-9]+)?").test(r)?""+r+t:""+(n+"//yandex."+e)+t}function c(e,t,n){var o=a[e];return s(t,Object(r.appendQueryString)(o,n))}},173:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var r=n(3),o=n(41),i=n(381),a=n(258),s=n(255),c=n(257),u=n(0),l=n(5),d=n(7),p=n(33),f=n(31),h=n(6),m=n(135),v=n(259),b=n(20),g=n(123),y=(n(609),Object(d.i18nRaw)(g)),O=Object(m.a)(o.b);var w=u.memo(function(e){var t=e.onClick,n=e.onShow,r=e.photostockUrl,i=u.useRef(""),a=u.useRef(null);return n&&i.current!==r&&(i.current=r,n(r)),u.createElement(v.a,{text:y("На сайте фотобанка можно{br0}купить оригинал изображения{br1}и права на его использование",{br0:u.createElement("br",{key:"0"}),br1:u.createElement("br",{key:"1"}),context:"Кнопка ведущая на сайт, где можно купить демонстрируемую картинку"}),anchor:a,directions:["left-center"],mainOffset:7,hasTail:!0},function(e,n){return u.createElement(O,{forwardRef:a,className:Object(b.a)("Photostock"),text:y("Купить оригинал картинки",{context:"Кнопка ведущая на сайт, где можно купить демонстрируемую картинку"}),onClick:(i=n,s=t,u.useCallback(function(e){i(),s&&s(e)},[i,s])),onMouseEnter:e,onMouseLeave:n,url:r,icon:u.createElement(p.a,{type:"photostock"}),type:o.a.link});var i,s})});function j(e){return function(t){var n=t.props;if(n.counters&&n.counters[e]&&n.photostockUrl){var r=encodeURIComponent(n.photostockUrl);return Object(h.b)(n.counters[e],{"-url":r},{redirUrl:r})}}}var C=Object(f.d)(Object(l.withBaobab)({name:"MMPhotostockButton",events:{onShow:Object(l.logTech)("show",j("photostockShown")),onClick:Object(l.logClick)(j("photostockClick"))}})(w)),E=new r.Registry({id:Object(b.a)()});E.set(Object(o.c)(),o.b),E.set(Object(b.a)("AddToCollection"),i.a),E.set(Object(b.a)("OpenImage"),a.a),E.set(Object(b.a)("SearchByImage"),s.a),E.set(Object(b.a)("Photostock"),C),E.set(Object(b.a)("Share"),c.a)},175:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s});var r=n(2),o=n(0),i=n(4),a=(n(201),Object(i.cn)("Link")),s=function(e){var t=e.as,n=e.children,i=e.controlRef,s=e.disabled,c=e.innerRef,u=e.role,l=(e.pseudo,e.view,Object(r.__rest)(e,["as","children","controlRef","disabled","innerRef","role","pseudo","view"])),d=t||(l.href?"a":"span"),p=l.rel;return"_blank"===l.target&&void 0!==p&&-1===p.indexOf("noopener")&&(p+=" noopener"),Object(o.createElement)(d,Object.assign(l,{"aria-disabled":s,className:a(null,[l.className]),ref:c||i,rel:p,role:u,tabIndex:s?-1:l.tabIndex}),n)};s.displayName=a()},178:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(5),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},s=Object(o.withBaobab)({name:"div"})(function(e){var t=e.forwardRef,n=a(e,["forwardRef"]);return r.createElement("div",i({},n,{ref:t}),n.children)});Object(o.withBaobab)({name:"img"})(function(e){var t=e.forwardRef,n=a(e,["forwardRef"]);return r.createElement("img",i({},n,{ref:t}))})},179:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(2),o=n(0),i=n.n(o),a=n(30),s=(n(261),function(e){var t=e.className,n=e.innerRef,o=e.children,s=Object(r.__rest)(e,["className","innerRef","children"]);return i.a.createElement("div",Object(r.__assign)({},s,{className:Object(a.b)("Tail",null,[t]),ref:n}),o)})},18:function(e,t,n){"use strict";function r(e){return function(t,n){return n?t[e][n]:{data:void 0,isFailed:!1}}}function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r={};return t.reduce(function(t,n){return n.reduce(function(t,n){var o=String(n[e]);return r[o]||(r[o]=!0,t.push(n)),t},t)},[])}function i(e){var t,n;return function(){if(!n||n.length!==arguments.length)return n=arguments,t=e.apply(this,arguments);for(var r=0;r<n.length;r++)if(n[r]!==arguments[r])return n=arguments,t=e.apply(this,arguments);return t}}function a(e,t){var n,r;return function(){var o=e.apply(this,arguments);if(!r||r.length!==o.length)return r=o,n=t.apply(this,o);for(var i=0;i<r.length;i++)if(r[i]!==o[i])return r=o,n=t.apply(this,o);return n}}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"c",function(){return a})},182:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("MMImageStore")},185:function(e,t,n){"use strict";var r=n(10),o=function(){function e(){var e=this;this.onKeyDown=function(){window.clearTimeout(e.timeoutId),e.isPointer=!1},this.onMouseDown=function(){e.isPointer=!0,window.clearTimeout(e.timeoutId),e.timeoutId=window.setTimeout(function(){return e.isPointer=!1},600)},this.onFocus=function(){e.isPointer?(window.document.body.classList.add("pointerfocus"),window.document.body.classList.remove("utilityfocus")):(window.document.body.classList.add("utilityfocus"),window.document.body.classList.remove("pointerfocus"))},this.onBlur=function(){window.addEventListener("focus",e.setIsPointerOnTabFocus,!0)},this.setIsPointerOnTabFocus=function(){window.removeEventListener("focus",e.setIsPointerOnTabFocus,!0),window.document.body.classList.contains("pointerfocus")&&(e.isPointer=!0,window.setTimeout(function(){return e.isPointer=!1}))},this.timeoutId=0,this.isPointer=!1,window.addEventListener("blur",this.onBlur),window.document.addEventListener("keydown",this.onKeyDown),window.document.addEventListener("mousedown",this.onMouseDown),window.document.addEventListener("mouseup",this.onMouseDown),window.document.addEventListener("focusin",this.onFocus),window.document.body.classList.contains("pointerfocus")||window.document.documentElement.classList.contains("pointerfocus")||window.document.body.classList.add("utilityfocus")}return e.create=function(){return new e},e.prototype.dispose=function(){window.removeEventListener("blur",this.onBlur),window.document.removeEventListener("keydown",this.onKeyDown),window.document.removeEventListener("mousedown",this.onMouseDown),window.document.removeEventListener("mouseup",this.onMouseDown),window.document.removeEventListener("focusin",this.onFocus),window.document.body.classList.remove("pointerfocus","utilityfocus")},e}(),i=null;Object(r.a)()&&null===i&&(i=o.create())},19:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var r=n(10),o=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Object(r.a)()&&requestAnimationFrame(function(){t.forEach(function(t){void 0!==e&&void 0!==t&&("function"===typeof t?t(e.current):t.current=e.current)})}),e};function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){e.forEach(function(e){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)})}}},190:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return c});var r=n(2),o=n(0),i=n.n(o),a=n(4),s=(n(589),Object(a.cn)("Spin2")),c=function(e){var t=e.className,n=e.innerRef,o=e.progress,a=(e.view,e.position,e.size,Object(r.__rest)(e,["className","innerRef","progress","view","position","size"]));return i.a.createElement("div",Object(r.__assign)({},a,{ref:n,className:s({progress:o},[t])}))};c.displayName=s()},192:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(3),o=n(0),i=n(172),a=n(31),s=n(145),c=n(6),u=function(e){return e.w+"×"+e.h};var l=n(20),d=n(24),p=(n(618),n(173)),f=Object(r.withRegistry)(p.a)(function(e){var t=e.image,n=e.imagesCbirSearchUrl,p=e.onLog,f=e.loggedIn,h=e.pos,m=e.rimPos,v=e.reqid,b=e.loginUrl,g=e.view,y=e.isFavorite,O=e.mainButtonTheme,w=t.preview&&t.preview[0]||t.dups&&t.dups[0],j=t.extraOrigin&&t.extraOrigin.url||w&&(w.origin?w.origin.url:w.url),C=Boolean(t.origOnlyOpen),E={"-pos":h},S=t.imgHref||j,_=function(e,t){if(!e)return[];var n,r=e.dups,o=e.extraOrigin||t,i={},a=(o?[o].concat(r):r).reduce(function(e,t){var r=t&&t.origin||t;if(!r||!r.w||!r.h||!r.url)return e;var a=u(r);if(!i[a]){i[a]=!0;var s={w:r.w,url:r.url,text:a};if(o===t)return n=s,e;e.push(s)}return e},[]);return a.length>1&&a.sort(function(e,t){return e.w&&t.w?t.w-e.w:0}),n&&a.unshift(n),a}(t,e.loadedThumb);return"undefined"!==typeof m&&(E["-rim_id"]=t.rimid,E["-rim_index"]=m),o.createElement(a.a,null,function(a){return o.createElement(r.ComponentRegistryConsumer,{id:Object(l.a)()},function(r){var u=r[Object(l.a)("OpenImage")],h=r[Object(l.a)("SearchByImage")],m=r[Object(l.a)("Photostock")],w=r[Object(l.a)("AddToCollection")],k=r[Object(l.a)("Share")],P=function(){if(t.previewUrl&&k)return o.createElement(k,{view:g,link:Object(i.b)(e.tld,t.previewUrl),snippetUrl:Object(s.a)(t).url,loggedIn:f,originalUrl:j,shareClick:Object(c.b)(a.shareClick,"",{reqid:t.reqid}),popupScope:e.popupScope,tld:e.tld,isDiskShareEnabled:e.isDiskShareEnabled,diskShareDirectoryName:e.diskShareDirectoryName,isDiskShareUnauthPopupEnabled:e.isDiskShareUnauthPopupEnabled,showUnauthPopup:e.showUnauthPopup})},I=function(){if(j&&w&&!e.isFavoritesDisabled)return o.createElement(w,{view:g,isFavorite:y,loggedIn:f,loginUrl:b,image:t,reqid:v,onLog:p,tld:e.tld,showUnauthPopup:e.showUnauthPopup})},x=function(){if(j&&h)return o.createElement(h,{view:g,query:e.query,imagesCbirSearchUrl:n,openServiceOnNewTab:e.openServiceOnNewTab,onClickCounter:Object(c.b)(a.similar,E,{reqid:v},{href:S}),onClickLogNode:Object(c.a)(a.similar),image:t,onLog:p,tld:e.tld,isSimilarUnauthPopupEnabled:e.isSimilarUnauthPopupEnabled,showUnauthPopup:e.showUnauthPopup,experiments:e.experiments})};return o.createElement("div",{className:Object(l.a)({view:g})},function(){if(j&&u)return o.createElement(u,{view:g,url:C?t.snippet.redirUrl:j,dups:_,link:Object(i.b)(e.tld,t&&t.previewUrl||""),downloadCounter:Object(c.b)(a.buttonOpen,E,{reqid:v,redirUrl:j}),downloadLogNode:Object(c.a)(a.buttonOpen),otherSizeCounter:Object(c.b)(a.otherSize,E,{reqid:v}),otherSizeLogNode:Object(c.a)(a.buttonOpen),onLog:p,popupScope:e.popupScope,tld:e.tld,isOpenImageUnauthPopupEnabled:e.isOpenImageUnauthPopupEnabled,isOpenImageUnauthPopupStrictEnabled:e.isOpenImageUnauthPopupStrictEnabled,showUnauthPopup:e.showUnauthPopup,theme:O})}(),function(){if(m&&g!==d.b.compact&&t.photostockUrl)return o.createElement(m,{photostockUrl:t.photostockUrl})}(),g===d.b.twoLines?o.createElement("div",{className:Object(l.a)("Inline")},x(),P(),I()):o.createElement(o.Fragment,null,x(),I(),P()))})})})},195:function(e,t,n){},197:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return d});var r,o=n(5),i=n(74),a=n(6),s=n(14),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.getMethods=function(){return this.handlers?this.handlers:this.handlers={hit:function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),e.cts=e.cts||Date.now(),window.c.hit(u(u({},e),{vars:Object(i.a)(e.vars||"")}),t)},hitDelayed:function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),e.cts=e.cts||Date.now(),window.c.hitDelayed(u(u({},e),{vars:Object(i.a)(e.vars||"")}),t)}}},t.prototype.clientAction=function(t){var n=this.getMethods(),r=t.eventData;if(s.a)if(r.data&&r.data.__oldCounter__){var o=r.data,c=o.method,l=o.__oldCounter__,d=o.node;if(this.hrefPrefix){var p=Object(a.p)(l.vars||"");r.data=u(u({},p),{path:l.path}),p["-baobab-event-json"]=encodeURIComponent(JSON.stringify(r)),l.vars=Object(i.a)(p)}var f=n[c];f&&f(l,d)}else e.prototype.clientAction.call(this,t)},t.prototype.sendData=function(){if(this.hrefPrefix){this.events.length<=42&&e.prototype.sendData.call(this);for(var t=this.events;t.length;)this.events=t.splice(0,42),e.prototype.sendData.call(this)}},t.prototype.sendByAjax=function(t){return!!this.hrefPrefix&&e.prototype.sendByAjax.call(this,t)},t}(o.Sender),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.createEvent=function(t,n,r,o){var i=e.prototype.createEvent.call(this,t,n,r,o),a=o.counter;return a&&(i.data=a),i},t}(o.Logger)},199:function(e,t,n){},2:function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return o}),n.d(t,"__assign",function(){return i}),n.d(t,"__rest",function(){return a}),n.d(t,"__decorate",function(){return s}),n.d(t,"__param",function(){return c}),n.d(t,"__metadata",function(){return u}),n.d(t,"__awaiter",function(){return l}),n.d(t,"__generator",function(){return d}),n.d(t,"__createBinding",function(){return p}),n.d(t,"__exportStar",function(){return f}),n.d(t,"__values",function(){return h}),n.d(t,"__read",function(){return m}),n.d(t,"__spread",function(){return v}),n.d(t,"__spreadArrays",function(){return b}),n.d(t,"__await",function(){return g}),n.d(t,"__asyncGenerator",function(){return y}),n.d(t,"__asyncDelegator",function(){return O}),n.d(t,"__asyncValues",function(){return w}),n.d(t,"__makeTemplateObject",function(){return j}),n.d(t,"__importStar",function(){return C}),n.d(t,"__importDefault",function(){return E}),n.d(t,"__classPrivateFieldGet",function(){return S}),n.d(t,"__classPrivateFieldSet",function(){return _});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function s(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})}function d(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function p(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function f(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function b(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function y(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{(n=o[e](t)).value instanceof g?Promise.resolve(n.value.v).then(c,u):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function c(e){s("next",e)}function u(e){s("throw",e)}function l(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function O(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,o,(t=e[n](t)).done,t.value)})}}}function j(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function _(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},20:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("MMViewerButtons")},200:function(e,t,n){},201:function(e,t,n){},205:function(e,t,n){"use strict";function r(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(String(e[t]))}).join("&")}Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyUrlParams=r,t.appendQueryString=function(e,t){var n=r(t);return 0===n.length?e:e.indexOf("?")>-1?e+"&"+n:e+"?"+n}},206:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(161);t.shouldSendCredentials=function(e,t){return!(!t||"omit"===t)&&("include"===t||r.getOrigin(e)===r.getOrigin(window.location))}},207:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(void 0,o(n)))}})}t.getDisplayName=function(e){return e.displayName||e.name||"Component"},t.compose=a,t.useHocks=function(e){return i.useMemo(function(){return a.apply(void 0,o(e))},[e])}},209:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(2),o=n(0),i=n.n(o),a=n(1),s=n(12),c=n(9),u=Object(a.withBemMod)(Object(c.b)(),{type:"link"},function(e){return function(t){t.type;var n=t.target,o=t.rel,a=t.url,c=t.disabled,u=t.tabIndex,l=Object(r.__rest)(t,["type","target","rel","url","disabled","tabIndex"]),d=o;return"_blank"===n&&void 0!==o&&-1===o.indexOf("noopener")&&(d=o+" noopener"),i.a.createElement(e,Object(r.__assign)({},l,{rel:d,target:n,disabled:c,pressKeys:[s.a.ENTER],href:c?void 0:a,tabIndex:c?-1:u,type:null,autoComplete:null,as:"a"}))}})},21:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"o",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"l",function(){return c}),n.d(t,"k",function(){return u}),n.d(t,"f",function(){return l}),n.d(t,"e",function(){return d}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return f}),n.d(t,"h",function(){return h}),n.d(t,"g",function(){return m}),n.d(t,"j",function(){return v}),n.d(t,"m",function(){return b}),n.d(t,"n",function(){return g}),n.d(t,"i",function(){return y});var r,o=n(26),i=n(172);!function(e){e.UPDATE_CONFIG="UPDATE_CONFIG",e.UPDATE_CONTEXT="UPDATE_CONTEXT",e.ADD_IMAGES_BY_THUMB="ADD_IMAGES_BY_THUMB",e.ADD_IMAGES_BY_POS="ADD_IMAGES_BY_POS",e.SET_IMAGES_BY_POS="SET_IMAGES_BY_POS",e.SET_CURRENT_ITEM_IDX="SET_CURRENT_ITEM_IDX",e.ADD_LOADED_THUMB_DATA="ADD_LOADED_THUMB_DATA",e.ADD_LOADED_RIM_THUMB_DATA="ADD_LOADED_RIM_THUMB_DATA",e.ADD_DIRECT_DATA="ADD_DIRECT_DATA",e.ADD_FAVICON_DATA="ADD_FAVICON_DATA",e.ADD_TAGS_DATA="ADD_TAGS_DATA",e.ADD_RIM_DATA="ADD_RIM_DATA",e.SET_SELECTED_RIM="SET_SELECTED_RIM",e.REQUEST_RIM_PAGE="REQUEST_RIM_PAGE",e.ADD_CROP_OBJECT="ADD_CROP_OBJECT",e.SET_TRIMMER_AREA="SET_TRIMMER_AREA"}(r||(r={}));var a=function(e){return{type:r.UPDATE_CONTEXT,context:e}},s=function(e){return{type:r.ADD_IMAGES_BY_POS,items:e}},c=function(e){return{type:r.SET_IMAGES_BY_POS,items:e}},u=function(e){return{type:r.SET_CURRENT_ITEM_IDX,index:e}},l=function(e,t,n){return{type:r.ADD_LOADED_THUMB_DATA,id:e,index:n,data:t}},d=function(e,t){return{type:r.ADD_LOADED_RIM_THUMB_DATA,id:e,data:t}},p=function(e,t){return{type:r.ADD_DIRECT_DATA,id:e,data:t}},f=function(e,t){return{type:r.ADD_FAVICON_DATA,id:e,data:t}},h=function(e,t){return{type:r.ADD_TAGS_DATA,id:e,data:t}},m=function(e,t){return{type:r.ADD_RIM_DATA,id:e,data:t}},v=function(){return{type:r.REQUEST_RIM_PAGE}},b=function(e){return{type:r.SET_SELECTED_RIM,idx:e}},g=function(e){return{type:r.SET_TRIMMER_AREA,area:e}},y=function(e,t,n,a){if(n&&a){var s=t.cropObjects[n];if(!(s&&s.expireTime>Date.now())){var c=t.globalContext.tld;Object(o.get)(Object(i.a)("images",c,{rpt:"cv",url:a,format:"json",request:JSON.stringify({blocks:[{block:{block:"crop-objects",mods:{ajax:"yes"}},params:{},version:2}]})}),{format:"json"},{successCallback:function(t){var o=t&&t.blocks;if(o){for(var i,a=0;a<o.length;a++){var s=o[a];if("crop-objects"===(s.name&&s.name.block)){i=s;break}}if(i){var c=i.params&&i.params.objects;c&&e(function(e,t){return{type:r.ADD_CROP_OBJECT,data:t,imageId:e,timestamp:Date.now()}}(n,c))}}}})}}}},218:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return a});var r=n(4),o=Object(r.cn)("ShopRating"),i=o(),a=o("Icon")},220:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r,o=n(0),i=n(4),a=n(26),s=n(18),c=n(178),u=n(5),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=Object(i.cn)("MMDirectStripe"),p=function(e){function t(t){var n=e.call(this,t)||this;return n.isComponentMounted=!1,n.loaderUrl="//an.yandex.ru/system/context.js",n.containerRef=o.createRef(),n.state={hidden:!1},n.getLogNode=Object(s.d)(n.getLogNode),n.onDirectRendered=n.onDirectRendered.bind(n),n.onEmptyDirectLoaded=n.onEmptyDirectLoaded.bind(n),n.onHide=n.onHide.bind(n),n.onClick=n.onClick.bind(n),n.setContainerRef=n.setContainerRef.bind(n),n}return l(t,e),t.prototype.componentDidMount=function(){var e=this,n=this.props,r=n.directId,o=n.pageNumber,i=n.forwardRef;this.isComponentMounted=!0,i&&(i.current=this),t.loadDirectContext(this.loaderUrl,function(){e.renderDirect()}),this.renderParams={blockId:r,renderTo:this.getUniqId(),async:!0,onRender:this.onDirectRendered,onHide:this.onHide,extParams:"&"+Object(a.stringifyUrlParams)(this.getExtParams())},o&&(this.renderParams.pageNumber=o)},t.prototype.componentDidUpdate=function(e,n){var r=this;e.directId===this.props.directId&&e.text===this.props.text&&n.hidden===this.state.hidden||t.loadDirectContext(this.loaderUrl,function(){r.renderDirect()})},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.onRemove,n=e.forwardRef;this.isComponentMounted=!1,n&&(n.current=null),t&&t()},t.prototype.render=function(){var e;if(this.state.hidden)return null;var t=this.props,n=t.className,r=t.style;return o.createElement(c.a,{style:r,className:d(null,[n]),logNode:this.getLogNode(null===(e=this.state.advData)||void 0===e?void 0:e[0])},o.createElement("div",{id:this.getUniqId(),ref:this.setContainerRef}))},t.prototype.getLogNode=function(e){var t={type:"adv"};return e&&(t.event_hash=null===e||void 0===e?void 0:e.eventHash,t.hit_log_id=null===e||void 0===e?void 0:e.hitLogId),{name:"DirectStripe",attrs:t,events:{onClick:Object(u.logClick)()}}},t.prototype.renderDirect=function(){var e=this,t=window.Ya.Context;if(!this.state.hidden&&t&&this.renderParams){var n=this.renderParams;t.AdvManager?(t._asyncModeOn=!0,t.AdvManager.render(n,this.onEmptyDirectLoaded)):(t._callbacks||(t._callbacks=[])).push(function(){return t.AdvManager&&t.AdvManager.render(n,e.onEmptyDirectLoaded)})}},t.prototype.setContainerRef=function(e){e?(e.addEventListener("click",this.onClick,!0),this.props.fixWidth&&(e.style.width=e.clientWidth+"px"),this.containerRef.current=e):this.containerRef.current&&(this.containerRef.current.removeEventListener("click",this.onClick,!0),this.containerRef.current=null)},t.prototype.onClick=function(e){this.props.onClick&&this.props.onClick(e)},t.prototype.getUniqId=function(){return this.elementDomId?this.elementDomId:(this.props.getUniqId?this.elementDomId=this.props.getUniqId():this.elementDomId="yandex_ad_stripe_"+Date.now()+"_"+Math.round(1e6*Math.random()),this.elementDomId)},t.prototype.getExtParams=function(){var e={reqid:this.props.reqid,position:"stripe",ui:"desktop"},t=this.props.yandexuid,n=/\buuid=(\w+)/.exec(location.search),r=n&&n[1];return r?e.uuid=r:t&&(e.yuid=t),e},t.prototype.onDirectRendered=function(e){var t,n;this.isComponentMounted&&(this.setState({hidden:!1,advData:null===e||void 0===e?void 0:e.advData}),null===(n=(t=this.props).onRender)||void 0===n||n.call(t,null===e||void 0===e?void 0:e.advData))},t.prototype.onHide=function(){if(this.isComponentMounted){var e=this.props.onHide;this.setState({hidden:!0}),e&&e()}},t.prototype.onEmptyDirectLoaded=function(){if(this.isComponentMounted){var e=this.props.onEmptyLoaded;this.setState({hidden:!0}),e&&e()}},t.loadDirectContext=function(e,t,n){var r=this,o=this.scriptStatuses[e];this.onLoad[e]||(this.onLoad[e]=[]),this.onError[e]||(this.onError[e]=[]),"loaded"!==o?(t&&this.onLoad[e].push(t),n&&this.onError[e].push(n)):t&&setTimeout(t,0);var i=this.contextScripts[e];if(!window.Ya.Context&&(!o||"error"===o)){i&&i.parentNode&&i.parentNode.removeChild(i);var a=this.contextScripts[e]=document.createElement("script");a.onload=function(){r.scriptStatuses[e]="loaded",r.onLoad[e].forEach(function(e){return e()})},a.onerror=function(){r.scriptStatuses[e]="error",r.onError[e].forEach(function(e){return e()})},a.src=e,document.body.appendChild(a),this.scriptStatuses[e]="loading"}},t.scriptStatuses={},t.contextScripts={},t.onLoad={},t.onError={},t}(o.Component),f=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=(Object(i.cn)("MMDirectStripe"),function(e){function t(t){var n=e.call(this,t)||this;return n.loaderUrl="//an.yandex.ru/system/widget.js",n}return f(t,e),t.prototype.renderDirect=function(){var e=this.props.directId;if(e){var t=window;t.yaads||(t.yaads=[]),t.yaads.push({id:e,extParams:"&"+Object(a.stringifyUrlParams)(this.getExtParams()),render:"#"+this.getUniqId(),success:this.onDirectRendered,reject:this.onHide,hide:this.onHide})}},t}(p)),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},v=function(e){return"string"===typeof(t=e.directId)&&0===t.indexOf("N-")?o.createElement(h,m({},e)):o.createElement(p,m({},e));var t}},221:function(e,t,n){var r,o,i;o=[t],void 0===(i="function"===typeof(r=function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var n=!1;if("undefined"!=typeof window){var r={get passive(){n=!0}};window.addEventListener("testPassive",null,r),window.removeEventListener("testPassive",null,r)}var o="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),i=[],a=!1,s=-1,c=void 0,u=void 0,l=function(e){return i.some(function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))})},d=function(e){var t=e||window.event;return!!l(t.target)||1<t.touches.length||(t.preventDefault&&t.preventDefault(),!1)},p=function(){setTimeout(function(){void 0!==u&&(document.body.style.paddingRight=u,u=void 0),void 0!==c&&(document.body.style.overflow=c,c=void 0)})};e.disableBodyScroll=function(e,r){if(o){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!i.some(function(t){return t.targetElement===e})){var p={targetElement:e,options:r||{}};i=[].concat(t(i),[p]),e.ontouchstart=function(e){1===e.targetTouches.length&&(s=e.targetTouches[0].clientY)},e.ontouchmove=function(t){var n,r,o,i;1===t.targetTouches.length&&(r=e,i=(n=t).targetTouches[0].clientY-s,!l(n.target)&&(r&&0===r.scrollTop&&0<i?d(n):(o=r)&&o.scrollHeight-o.scrollTop<=o.clientHeight&&i<0?d(n):n.stopPropagation()))},a||(document.addEventListener("touchmove",d,n?{passive:!1}:void 0),a=!0)}}else{h=r,setTimeout(function(){if(void 0===u){var e=!!h&&!0===h.reserveScrollBarGap,t=window.innerWidth-document.documentElement.clientWidth;e&&0<t&&(u=document.body.style.paddingRight,document.body.style.paddingRight=t+"px")}void 0===c&&(c=document.body.style.overflow,document.body.style.overflow="hidden")});var f={targetElement:e,options:r||{}};i=[].concat(t(i),[f])}var h},e.clearAllBodyScrollLocks=function(){o?(i.forEach(function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),a&&(document.removeEventListener("touchmove",d,n?{passive:!1}:void 0),a=!1),i=[],s=-1):(p(),i=[])},e.enableBodyScroll=function(e){if(o){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,i=i.filter(function(t){return t.targetElement!==e}),a&&0===i.length&&(document.removeEventListener("touchmove",d,n?{passive:!1}:void 0),a=!1)}else(i=i.filter(function(t){return t.targetElement!==e})).length||p()}})?r.apply(t,o):r)||(e.exports=i)},225:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r,o=n(0),i=n(26),a=n(5),s=n(11),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prevAdsCountUrl="",t}return c(t,e),t.prototype.componentDidMount=function(){var e=this.props.ads;e&&(this.hitAdsShowCounter(e),this.onAdsUpdate(e))},t.prototype.componentDidUpdate=function(){var e=this.props.ads;e&&(this.hitAdsShowCounter(e),this.onAdsUpdate(e))},t.prototype.render=function(){var e=this.props,t=e.ads,n=e.children,r=e.advanced,i=e.className,a=e.unifiedV1,c=e.blockHighlight;return t?o.createElement("div",{className:Object(s.a)({advanced:Boolean(r),unifiedV1:a,highlighted:Boolean(c)},[i])},n):null},t.prototype.onAdsUpdate=function(e){var t=e.countUrl;t&&t!==this.prevAdsCountUrl&&(this.prevAdsCountUrl=t,this.props.onShow&&this.props.onShow())},t.prototype.hitAdsShowCounter=function(e){if(!this.props.disableShowCounter){var n=t.shownAds,r=t.processingAdsCounter,o=e.countUrl;!o||n[o]||r[o]||(r[o]=!0,this.makeShowCounterRequest(o,function(){return n[o]=!0},function(){return delete r[o]}))}},t.prototype.makeShowCounterRequest=function(e,t,n){(this.props.safeRequest||i.get)(e,{},{successCallback:function(){t(),n()},failureCallback:function(){return n()}})},t.shownAds={},t.processingAdsCounter={},t}(o.Component),l=Object(a.withBaobab)({name:"MMDirectSnippet",attrs:function(e){return{type:"adv",event_hash:e.ads&&e.ads.eventHash,hit_log_id:e.ads&&e.ads.hitLogId}},events:{onShow:Object(a.logTech)("show",function(e){return e.counter})}})(u)},226:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(9),i=(n(263),Object(r.withBemMod)(Object(o.b)(),{theme:"action"}))},2284:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Открыть в полноэкранном режиме":"Открыть в полноэкранном режиме","Поиск по фрагменту картинки":"Поиск по фрагменту картинки"}},2293:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Закрыть":"Закрыть","Запустить":"Запустить","Остановить":"Остановить"}},23:function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"a",function(){return b});var r=n(2),o=n(0),i=n.n(o),a=n(3),s=n(4),c=n(10);function u(e){var t={state:e,setState:function(e){t.state=e,t.setters.forEach(function(e){return e(t.state)})},setters:[]};return function(){var e,n,i=Object(r.__read)(Object(o.useState)(t.state),2),a=i[0],s=i[1];return Object(o.useEffect)(function(){return function(){t.setters=t.setters.filter(function(e){return e!==s})}},[]),e=function(){-1===t.setters.indexOf(s)&&t.setters.push(s)},Object(c.a)()?Object(o.useLayoutEffect)(e,n):Object(o.useEffect)(e,n),[a,t.setState]}}function l(e,t){var n=Object(o.useRef)(u([e,t])).current,i=Object(r.__read)(n(),2)[1],a=Object(o.useRef)(function(e){var t=Object(r.__read)(n(),1)[0],i=Object(r.__read)(t||[],2),a=i[0],s=i[1];return void 0===t||void 0===s?Object(o.createElement)(a,e):s(e,a)}).current;return Object(o.useEffect)(function(){i([e,t])},[i,e,t]),a}var d=n(388),p=n(387),f=n(64);n(331);var h=Object(s.cn)("Textinput"),m=function(e){var t=e.addonAfter,n=e.addonBefore,s=e.className,c=e.disabled,u=e.focused,f=e.iconLeft,m=e.iconRight,v=e.innerRef,b=e.onMouseEnter,g=e.onMouseLeave,y=e.style,O=(e.pressed,e.view,e.pin,e.size,e.theme,e.hint),w=e.state,j=e.title,C=e.renderControl,E=Object(r.__rest)(e,["addonAfter","addonBefore","className","disabled","focused","iconLeft","iconRight","innerRef","onMouseEnter","onMouseLeave","style","pressed","view","pin","size","theme","hint","state","title","renderControl"]),S=Object(a.useComponentRegistry)(h()),_=S.Control,k=S.Box,P=S.Icon,I=S.Hint,x=l(_,C),M=Object(r.__read)(Object(o.useState)(O),2),N=M[0],T=M[1],R=Object(r.__read)(Object(o.useState)(!1),2),D=R[0],L=R[1],A=Object(o.useRef)(O),B=Object(d.a)("hint");Object(p.a)(function(){O?T(O):A.current&&L(!0),A.current=O},[O]);var U=Object(o.useCallback)(function(){O||(T(""),L(!1))},[O]);return i.a.createElement("span",{className:h({disabled:c,focused:u,iconRight:void 0!==m,iconLeft:void 0!==f,state:w},[s]),onMouseEnter:b,onMouseLeave:g,ref:v,style:y,title:j},n,f&&i.a.createElement(P,{side:"left",component:f}),m&&i.a.createElement(P,{side:"right",component:m}),i.a.createElement(x,Object(r.__assign)({},E,{"aria-invalid":"error"===w,disabled:c,"aria-describedby":N?B:void 0})),i.a.createElement(k,null),t,N&&i.a.createElement(I,{leave:D,onAnimationEnd:U,id:B},N))};m.displayName=h();var v,b=(v=m,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={focused:t.props.focused,pressed:t.props.pressed,disabled:t.props.disabled},t.onMouseDown=function(e){3!==e.nativeEvent.which&&(t.setState({pressed:!0}),t.docOnMouseDown(),void 0!==t.props.onMouseDown&&t.props.onMouseDown(e))},t.onMouseUp=function(e){t.setState({pressed:!1}),void 0!==t.props.onMouseUp&&t.props.onMouseUp(e)},t.docOnMouseDown=function(){document.addEventListener("mouseup",t.docOnMouseUp),document.addEventListener("dragend",t.docOnMouseUp)},t.docOnMouseUp=function(){t.setState({pressed:!1}),document.removeEventListener("mouseup",t.docOnMouseUp),document.removeEventListener("dragend",t.docOnMouseUp)},t.onFocus=function(e){t.setState({focused:!0}),void 0!==t.props.onFocus&&t.props.onFocus(e)},t.onBlur=function(e){t.setState({focused:!1}),void 0!==t.props.onBlur&&t.props.onBlur(e)},t}return Object(r.__extends)(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.props.disabled!==e.disabled&&this.setState({disabled:e.disabled}),this.props.focused!==e.focused&&this.setState({focused:e.focused}),this.props.pressed!==e.pressed&&this.setState({pressed:e.pressed}),e.disabled&&this.setState({focused:!1,pressed:!1})},t.prototype.render=function(){var e=this.state,t=e.disabled,n=e.focused,o=e.pressed,a=v;return i.a.createElement(a,Object(r.__assign)({},this.props,{focused:t?void 0:n,pressed:t?void 0:o,onMouseDown:t?void 0:this.onMouseDown,onMouseUp:t?void 0:this.onMouseUp,onFocus:t?void 0:this.onFocus,onBlur:t?void 0:this.onBlur}))},t.displayName="WithControl("+Object(f.a)(v)+")",t}(o.PureComponent))},230:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e}},2302:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Не удалось загрузить картинку, возможно, она есть на {link}":"Не удалось загрузить картинку, возможно, она есть на {link}","сайте":"сайте","сервисе Яндекс.Картинки":"сервисе Яндекс.Картинки"}},231:function(e,t,n){"use strict";var r=n(232);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},2311:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Искать":"Искать","Отменить":"Отменить","Укажите выше область для поиска по картинке":"Укажите выше область для поиска по картинке"}},232:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2320:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Пожаловаться":"Пожаловаться"}},2329:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Войдите в Яндекс, и поиск станет лучше":"Войдите в Яндекс, и поиск станет лучше","Войдите в Яндекс, чтобы сохранить картинку":"Войдите в Яндекс, чтобы сохранить картинку","Мои Яндекс.Картинки":"Мои Яндекс.Картинки","Не сейчас":"Не сейчас","Пожаловаться":"Пожаловаться"}},233:function(e,t,n){},2338:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"В коллекцию":"В коллекцию","Добавить в коллекцию":"Добавить в коллекцию","Другие размеры и похожие":"Другие размеры и похожие","Купить оригинал картинки":"Купить оригинал картинки","На сайте фотобанка можно{br0}купить оригинал изображения{br1}и права на его использование":"На сайте фотобанка можно{br0}купить оригинал изображения{br1}и права на его использование","Открыть":"Открыть","Отправить":"Отправить","Перейти":"Перейти","Перейти в коллекции":"Перейти в коллекции","Похожие":"Похожие"}},2347:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Добавлено в":"Добавлено в","Войдите, чтобы добавить в другую коллекцию":"Войдите, чтобы добавить в другую коллекцию","Войти и изменить":"Войти и изменить","Добавляем в коллекцию...":"Добавляем в коллекцию...","Изменить":"Изменить","Не сейчас":"Не сейчас","Не удалось добавить в коллекцию":"Не удалось добавить в коллекцию","Перейти":"Перейти"}},235:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(2),o=n(0),i=n.n(o),a=n(23),s=(n(332),function(e){var t=e.autoComplete,n=void 0===t?"off":t,o=e.autoFocus,s=e.className,c=e.controlRef,u=e.defaultValue,l=e.disabled,d=e.id,p=e.inputMode,f=e.max,h=e.maxLength,m=e.min,v=e.name,b=e.onBlur,g=e.onChange,y=e.onFocus,O=e.onKeyDown,w=e.onKeyPress,j=e.onKeyUp,C=e.pattern,E=e.placeholder,S=e.readOnly,_=e.required,k=e.tabIndex,P=e.type,I=e.value,x=Object(r.__rest)(e,["autoComplete","autoFocus","className","controlRef","defaultValue","disabled","id","inputMode","max","maxLength","min","name","onBlur","onChange","onFocus","onKeyDown","onKeyPress","onKeyUp","pattern","placeholder","readOnly","required","tabIndex","type","value"]);return i.a.createElement("input",Object(r.__assign)({},x,{autoComplete:n,autoFocus:o,className:Object(a.b)("Control",null,[s]),defaultValue:u,disabled:l,id:d,inputMode:p,max:f,maxLength:h,min:m,name:v,onBlur:b,onChange:g,onFocus:y,onKeyDown:O,onKeyPress:w,onKeyUp:j,pattern:C,placeholder:E,readOnly:S,ref:c,required:_,tabIndex:k,type:P,value:I}))})},2356:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Скопировать ссылку":"Скопировать ссылку","Ссылка скопирована":"Ссылка скопирована"}},236:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(2),o=n(0),i=n.n(o),a=n(23),s=(n(333),function(e){var t=e.className,n=Object(r.__rest)(e,["className"]);return i.a.createElement("span",Object(r.__assign)({},n,{className:Object(a.b)("Box",null,[t])}))})},2365:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Картинка сохранена":"Картинка сохранена","Купить еще место":"Купить еще место","Не получается, попробуйте позже или сохраните картинку на компьютер":"Не получается, попробуйте позже или сохраните картинку на компьютер","Нет места на Яндекс.Диске":"Нет места на Яндекс.Диске","Сохранить":"Сохранить","Сохранить на диск":"Сохранить на диск","Сохраняем картинку":"Сохраняем картинку"}},237:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(2),o=n(0),i=n(23),a=(n(334),n(335),n(336),function(e){var t=e.component,n=e.side,a=Object(r.__rest)(e,["component","side"]);return Object(o.cloneElement)(t,Object(r.__assign)(Object(r.__assign)({},a),{className:Object(i.b)("Icon",{side:n},[t.props.className])}))})},2374:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"В магазин":"В магазин"}},238:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=n.n(r),i=n(23),a=(n(337),function(e){var t=e.leave,n=e.onAnimationEnd,r=e.children,a=e.id;return o.a.createElement("span",{className:Object(i.b)("Hint",{leave:t}),onAnimationEnd:n,id:a},r)})},2383:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"В магазин":"В магазин","Купить на Маркете":"Купить на Маркете","Магазин на Маркете":"Магазин на Маркете","Покупка на Маркете":"Покупка на Маркете","Яндекс.Маркет":"Яндекс.Маркет","в магазине":"в магазине"}},239:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(2),o=n(0),i=n.n(o),a=n(64),s=n(19),c=function(e){var t;return(t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.controlRef=Object(o.createRef)(),e}return Object(r.__extends)(n,t),n.prototype.componentDidUpdate=function(e){null!==this.controlRef.current&&this.props.focused!==e.focused&&(this.props.focused?this.controlRef.current.focus():this.controlRef.current.blur())},n.prototype.render=function(){var t=this.props.controlRef,n=void 0===t?null:t;return i.a.createElement(e,Object(r.__assign)({},this.props,{controlRef:Object(s.a)(this.controlRef,n)}))},n}(o.PureComponent)).displayName="withAutoFocus("+Object(a.a)(e)+")",t}},2392:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Скрыть":"Скрыть","Читать еще":"Читать еще"}},24:function(e,t,n){"use strict";var r,o,i,a,s;n.d(t,"c",function(){return r}),n.d(t,"e",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s}),function(e){e[e.disabled=0]="disabled",e[e.top=1]="top",e[e.middle=2]="middle",e[e.suborganic=3]="suborganic"}(r||(r={})),function(e){e[e.disabled=0]="disabled",e[e.top=1]="top",e[e.middle=2]="middle"}(o||(o={})),function(e){e.full="full",e.short="short"}(i||(i={})),function(e){e.normal="normal",e.block="block"}(a||(a={})),function(e){e.compact="compact",e.twoLines="two-lines"}(s||(s={}))},2402:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"б.p.":"б.p.","грн.":"грн.","долл.":"долл.","евро":"евро","руб.":"руб.","тнг.":"тнг."}},2411:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Похожие товары":"Похожие товары"}},2420:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"В магазин":"В магазин","В наличии":"В наличии","Предзаказ":"Предзаказ","Скрыть":"Скрыть","Товар закончился":"Товар закончился","Цена и наличие товара могли измениться":"Цена и наличие товара могли измениться","Читать еще":"Читать еще"}},2429:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Магазин на маркете":"Магазин на маркете","Показать":"Показать","Реклама":"Реклама","Читать ещё":"Читать ещё","м.{space}{station}":"м.{space}{station}"}},243:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return b});var r,o,i=n(0),a=n(166),s=n(18),c=n(178),u=n(292),l=n(85),d=(n(572),r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};!function(e){e[e.alwaysCenter=1]="alwaysCenter",e[e.fijiStyle=2]="fijiStyle"}(o||(o={}));var f={name:"gallery"},h=Object(l.a)("Container"),m=Object(s.d)(function(e){return Object(l.a)(null,[e])}),v=function(e){function t(t){var n=e.call(this,t)||this;return n.dragging=!1,n.wasDragging=!1,n.wasClicked=!1,n.wasHoverClick=!1,n.dragStartMouseX=0,n.dragStartGalleryX=0,n.wasDraggingTime=0,n.container=i.createRef(),n.rootNode=i.createRef(),n.selectedNode=i.createRef(),n.firstNode=i.createRef(),n.onWheel=n.onWheel.bind(n),n.onMouseDown=n.onMouseDown.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.onAnimationEnd=n.onAnimationEnd.bind(n),n.renderGalleryItem=n.renderGalleryItem.bind(n),n.onItemClickHandler=n.onItemClickHandler.bind(n),n.state={},n}return d(t,e),t.prototype.getSnapshotBeforeUpdate=function(){if(!this.props.fixedPositionOnUpdate)return null;var e=this.container.current;if(!e)return null;var t=e.getBoundingClientRect(),n=t.height/2,r=t.left+t.width/2-n/2,o=t.top+n,i=document.elementFromPoint(r,o);return i===e&&(i=document.elementFromPoint(r+n,o)),i&&i!==e?{baseNode:i,wasPosition:i.getBoundingClientRect().left}:null},t.prototype.componentDidUpdate=function(e,t,n){this.props.vertical;var r=this.container.current;if(n&&void 0!==n.wasPosition&&n.baseNode&&r&&r.contains(n.baseNode)){var i=n.baseNode.getBoundingClientRect().left-n.wasPosition;i&&(r.scrollLeft+=i,void 0!==this.scrollingTarget&&(this.scrollingTarget+=i))}var a=(this.props.selectedIdx||0)-(e.selectedIdx||0);a&&this.props.autoScroll&&(this.wasClicked&&this.props.autoScroll===o.fijiStyle?this.wasHoverClick||this.scrollItems(a>0?1:-1):this.scrollIntoCenter()),this.wasClicked=!1,this.wasHoverClick=!1},t.prototype.componentDidMount=function(){this.props.autoScroll&&this.scrollIntoCenter(!0)},t.prototype.render=function(){var e=this,t={},n=this.props.selectedIdx,r=this.cachedSelectedItemIdx;return this.cachedChildrenSrc&&this.cachedChildrenSrc===this.props.children?r!==n&&this.cachedChildren&&this.props.children&&(void 0!==r&&(this.cachedChildren[r]=this.renderGalleryItem(this.props.children[r],r,t)),void 0!==n&&(this.cachedChildren[n]=this.renderGalleryItem(this.props.children[n],n,t)),this.cachedSelectedItemIdx=this.props.selectedIdx):(this.cachedChildrenSrc=this.props.children,this.cachedSelectedItemIdx=n,this.cachedChildren=this.props.children?this.props.children.map(function(n,r){return e.renderGalleryItem(n,r,t)}):[]),i.createElement(c.a,{className:m(this.props.className),style:{height:this.props.height,width:this.props.width},onWheel:this.onWheel,forwardRef:this.rootNode,logNode:f},i.createElement("div",{className:h,onScroll:this.props.onScroll,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseMove:this.onMouseMove,ref:this.container},this.cachedChildren))},t.prototype.scrollItems=function(e){var t=this.props.vertical,n=this.selectedNode.current||this.firstNode.current;if(this.container.current&&n&&e){for(var r=n,o=t?r.offsetTop:r.offsetLeft,i=Math.floor(e),a=e>0?1:-1,s=r;0!==i&&r;)(r=i>0?r.nextElementSibling:r.previousElementSibling)&&(s=r),i-=a;o=(t?s.offsetTop:s.offsetLeft)-o,this.animateScrollBy(o)}},t.prototype.scrollIntoCenter=function(e){void 0===e&&(e=!1);var t=this.props.vertical;if(this.container.current&&this.selectedNode.current){var n=this.container.current,r=this.selectedNode.current,o=(t?n.offsetHeight:n.offsetWidth)/2,i=(t?r.offsetTop:r.offsetLeft)-o;e?t?this.container.current.scrollTop=i:this.container.current.scrollLeft=i:this.animateScrollTo(i)}},t.prototype.getScrollPosition=function(){var e=this.props.vertical,t=this.container.current;if(t)return e?{scrollWidth:t.scrollHeight,offsetWidth:t.offsetHeight,totalWidth:t.scrollHeight-t.offsetHeight,rightEdgeOffset:t.scrollHeight-1.5*t.offsetHeight,currentPosition:t.scrollTop}:{scrollWidth:t.scrollWidth,offsetWidth:t.offsetWidth,totalWidth:t.scrollWidth-t.offsetWidth,rightEdgeOffset:t.scrollWidth-1.5*t.offsetWidth,currentPosition:t.scrollLeft}},t.prototype.getNode=function(){return this.rootNode},t.prototype.animateScrollBy=function(e){var t,n=this.props.vertical;this.container.current&&(t=void 0!==this.scrollingTarget?this.scrollingTarget:n?this.container.current.scrollTop:this.container.current.scrollLeft,this.animateScrollTo(t+e))},t.prototype.animateScrollTo=function(e){var t=this,n=this.props.vertical;this.animationStop&&this.animationStop();var r=this.container.current;if(r){this.scrollingTarget=e;var o=e-(n?r.scrollTop:r.scrollLeft);this.animationStop=Object(a.animate)(200,function(e){if(void 0!==t.scrollingTarget){var i=t.scrollingTarget-o*(1-e);n?r.scrollTop=i:r.scrollLeft=i}},a.linear,this.onAnimationEnd)}},t.prototype.onAnimationEnd=function(){this.animationStop=void 0,this.scrollingTarget=void 0},t.prototype.onMouseDown=function(e){var t=this.props.vertical;this.container.current&&(this.wasDragging=!1,this.dragging=!0,this.dragStartMouseX=e.screenX,this.dragStartGalleryX=t?this.container.current.scrollTop:this.container.current.scrollLeft)},t.prototype.onMouseUp=function(){this.wasDragging&&(this.wasDraggingTime=Date.now()),this.dragging=!1},t.prototype.onMouseMove=function(e){var t=this.props.vertical;if(this.dragging&&e.buttons&&this.container.current){var n=this.dragStartMouseX-e.screenX;if(this.wasDragging||!(Math.abs(n)<=3)){this.wasDragging=!0;var r=this.dragStartGalleryX+n;t?this.container.current.scrollTop=r:this.container.current.scrollLeft=r}}else this.dragging=!1},t.prototype.onWheel=function(e){if(this.dragging)e.preventDefault();else{var t=this.props.vertical,n=this.container.current;if(!(Math.abs(e.deltaX)>Math.abs(e.deltaY))&&e.deltaY&&n){var r=e.deltaY;e.deltaMode>0&&(r*=16),t?n.scrollTop=n.scrollTop+r:n.scrollLeft=n.scrollLeft+r}}},t.prototype.onItemClickHandler=function(e,t){var n=this.props.clickOverHoverTimeNoScroll,r=Date.now()-this.wasDraggingTime<10;this.wasDragging=!1,this.props.onClick&&!r&&(this.wasClicked=!0,this.wasHoverClick=Boolean(n&&t),this.props.onClick(e))},t.prototype.getItemKey=function(e,t,n){for(var r,o=(null===(r=e)||void 0===r?void 0:r.key)||t;n[o];)o+="#"+t;return n[o]=!0,o},t.prototype.getItemRef=function(e){return this.isItemSelected(e)?this.selectedNode:0===e?this.firstNode:void 0},t.prototype.isItemSelected=function(e){return e===this.props.selectedIdx},t.prototype.renderGalleryItem=function(e,t,n){var r=this.props.clickOverHoverTime,o=this.isItemSelected(t),a={key:this.getItemKey(e,t,n),idx:t,selected:o,forwardRef:this.getItemRef(t),clickOverHoverTime:r,onClick:this.onItemClickHandler},s="function"===typeof e?e(a):e;return this.props.disableItemWrap?s:i.createElement(u.a,p({},a,{image:s}))},t}(i.Component),b=function(e){return i.createElement(v,p({},e,{ref:e.forwardRef}))}},2438:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Связанные картинки":"Связанные картинки"}},244:function(e,t,n){var r,o;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(i){if(void 0===(o="function"===typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o),!0,e.exports=i(),!!0){var a=window.Cookies,s=window.Cookies=i();s.noConflict=function(){return window.Cookies=a,s}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(t,n,i){if("undefined"!==typeof document){"number"===typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in i)i[c]&&(s+="; "+c,!0!==i[c]&&(s+="="+i[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!==typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(r.read||r)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[u]=c,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}(function(){})})},247:function(e,t,n){},248:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(3),o=n(30),i=n(179),a=new r.Registry({id:Object(o.b)()});a.set("Tail",i.a);var s=Object(r.withRegistry)(a)(o.a)},249:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s});var r=n(2),o=n(0),i=n.n(o),a=i.a.createContext({cache:{},changeStatus:function(){return{}}}),s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={cache:{}},n.changeStatus=n.changeStatus.bind(n),n}return Object(r.__extends)(t,e),t.prototype.changeStatus=function(e,t){var n=this.state.cache;n[e]=Object(r.__assign)(Object(r.__assign)({},n[e]),t),this.setState({cache:n})},t.prototype.render=function(){var e={cache:this.state.cache,changeStatus:this.changeStatus};return i.a.createElement(a.Provider,{value:e},this.props.children)},t}(i.a.Component)},25:function(e,t,n){"use strict";n.d(t,"b",function(){return le}),n.d(t,"d",function(){return fe}),n.d(t,"c",function(){return he}),n.d(t,"a",function(){return ve});var r,o=n(0),i=n(3),a=n(164),s=n(26),c=n(134),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},d=function(e){function t(t){var n=e.call(this,{format:"json",credentials:"same-origin",storeGetter:t.storeGetter,storeSetter:t.storeSetter})||this;return n.instagramUrl=/^https:\/\/(www\.)?instagram.com\//,n.path=t.path,n.config=t.config,n}return u(t,e),t.prototype.getItemID=function(e){return e},t.prototype.isDownloadNotAvailable=function(e){return this.instagramUrl.test(e)},t.prototype.extractResponseData=function(e){var t=this;if(!e.rld||!e.rld.length)return[];var n=this.config.justifier.baseRowHeight;return[e.rld.map(function(e,r){var o=e.s[0],i=e.s[0],a=t.isDownloadNotAvailable(o.pu),s=e.bid&&e.btw&&e.bth?[{w:e.btw,h:e.bth,url:t.buildThumbUrl(e.bid,{n:13,w:e.btw,h:e.bth}),origin:a?void 0:{w:i.iw,h:i.ih,url:i.iu},isMixedImage:!0}]:null,c=e.tw,u=e.th,l=n*t.getPixelDensity(),d=t.thumbSize33(c,u,l),p=e.s.map(function(e){return{w:e.iw,h:e.ih,url:e.iu}}),f=s||p;return a&&s&&p.length&&(p[0].origin=s[0]),{id:e.id,rimid:e.id,pos:r,docid:e.zid,thumb:{url:t.buildThumbUrl(e.tid,{n:33,w:d.width,h:d.height}),size:{w:e.tw,h:e.th}},width:e.bth,height:e.btw,preview:f,dups:p,images:[],origOnlyOpen:a,snippet:{text:"",title:o.t,url:o.pu,redirUrl:o.pu,domain:o.ph,hasTitle:!0}}})]},t.prototype.buildThumbUrl=function(e,t){var n=this.config,r=this.getThumbHostNum(n),o=n.thumb.hosts[r],i=t||n.thumb.params;return Object(s.appendQueryString)("https://"+o+"/i",l({id:e,ref:"rim"},i))},t.prototype.getThumbHostNum=function(e){return e.thumb.hosts.length>=2?1:0},t.prototype.getUrl=function(e){var t=this.config,n=t.loader.tld||"ru",r=t.loader.host||"yandex."+n+"/images-apphost";return Object(s.appendQueryString)("https://"+r+"/"+this.path,l({docid:e[0].data,lang:n},t.loader.urlParams))},t.prototype.thumbSize33=function(e,t,n){var r=Math.max(e/480,t/n);return{width:Math.round(e/r),height:Math.round(t/r)}},t.prototype.getPixelDensity=function(){return window.devicePixelRatio||1},t}(c.a),p=n(244),f=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},m=function(e){function t(t){var n=e.call(this,{format:"json",credentials:"same-origin",storeGetter:t.storeGetter,storeSetter:t.storeSetter})||this;return n.uniqueHandler=!0,n.tagsCount=5,n.params={text:t.text,tld:t.tld,duckParams:t.duckParams},n}return f(t,e),t.prototype.updateParams=function(e){this.params=Object.assign(this.params,e)},t.prototype.getUrl=function(e){var t=this.params,n=t.tld,r=void 0===n?"ru":n,o=t.text,i=this.params.duckParams||{},a=i.urlParams||void 0,c={};return void 0!==i.family&&(c.family=i.family,c.pornowhitelist=i.isPornoWhitelistQuery?1:0,c.ipnd=this._getIpnd()),Object(s.appendQueryString)("https://yandex."+r+"/images-apphost/duck",h(h({docid:e[0].data,count:this.tagsCount,lang:r,text:o},c),a))},t.prototype.extractResponseData=function(e){return Array.isArray(e)?[e.filter(function(e){return"string"===typeof e})]:[]},t.prototype.getItemID=function(e){return e},t.prototype._getIpnd=function(){return p.get("ipnd")||"1"},t}(c.a),v=n(18),b=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(e){function t(t){var n=t.storeGetter,r=t.storeSetter,o=t.multiRequestLimit,i=e.call(this,{credentials:"omit",format:"json",storeGetter:n,storeSetter:r,multiRequestLimit:o})||this;return i.getItemID=Object(v.d)(i.getItemID),i}return b(t,e),t.prototype.getItemID=function(e){return e.toLowerCase()},t.prototype.getUrl=function(e){return"https://favicon.yandex.net/favicon/"+e.map(function(e){return e.data}).join("/").toLowerCase()+"?size=16&json=1"},t.prototype.extractResponseData=function(e){return e.map(function(e){var t=e.image;return t?"data:image/png;base64,"+t:null})},t}(c.a),y=n(182),O=new i.Registry({id:Object(y.a)()});function w(e,t){O.set(e,t)}w("DirectLoaderHighComm",a.a),w("DirectLoaderLowComm",a.a),w("DirectLoaderAdultHighComm",a.a),w("DirectLoaderAdultLowComm",a.a),w("RimLoader",d),w("TagsLoader",m),w("FaviconLoader",g);var j=n(89),C=n(88),E=n(6),S=n(253),_=n(133),k=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=/^(https?:)?\/\/(avatars\.mds\.yandex|im[0-9]+-tub-ru\.yandex)\.net/i,I=function(e){function t(t,n,r){var o=e.call(this,n,r)||this;return o.idx=0,o.validateImages=!r||void 0===r.validateImages||r.validateImages,o.onImageSizeError=r&&r.onImageSizeError,o.onImageFileSizeError=r&&r.onImageFileSizeError,o.item=t,o.startLoading(),o}return k(t,e),t.prototype.getUrlFromItem=function(){return this.currentThumb=this.switchToNextThumb(),this.currentThumb?this.currentThumb.url:void 0},t.prototype.getResultData=function(){return this.currentThumb},t.prototype.onLoad=function(){return this.validateImages&&this.loader&&this.currentThumb&&!this.isValidImage(this.loader,this.currentThumb)?this.onError():e.prototype.onLoad.call(this)},t.prototype.onError=function(){if(!this.tryLoadNext()){if(this.thumbWithWrongFileSize)return this.currentThumb=this.thumbWithWrongFileSize,e.prototype.onLoad.call(this);this.onResult(_.b.error)}},t.prototype.isValidImage=function(e,t){var n=this.getImageInfo(e);return this.isSizeMatch(n,t,2)?(this.currentThumb&&(this.currentThumb.noncachable=!S.a.instance().isUrlCachable(n.url)),!!(t.isMixedImage||this.isWhiteListUrl(n.url)||this.isFileSizeMatch(e,t.fileSizeInBytes))||(this.onImageFileSizeError&&this.onImageFileSizeError(n.url),this.currentThumb&&(this.thumbWithWrongFileSize=this.currentThumb),!1)):(this.onImageSizeError&&this.onImageSizeError(n.url),!1)},t.prototype.getImageInfo=function(e){return{url:e.src,w:e.width,h:e.height}},t.prototype.isFileSizeMatch=function(e,t){if(!t||!window.yandex)return!0;var n,r=window.yandex.publicFeature;if(!r||!r.getImageOriginalSize||!r.getImageSize)return!0;try{n=r.getImageOriginalSize(e)}catch(t){try{n=r.getImageSize(e)}catch(e){return!0}}return n===t},t.prototype.isSizeMatch=function(e,t,n){return void 0===n&&(n=0),!t.w&&!t.h||Math.abs(e.w-t.w)<=n&&Math.abs(e.h-t.h)<=n},t.prototype.isWhiteListUrl=function(e){return P.test(e)},t.prototype.switchToNextThumb=function(){var e,t=this.idx;if(this.item.preview){if(t<(e=this.item.preview.length))return this.idx++,this.item.preview[t];for(t-=e;t<e;){var n=this.item.preview[t].origin;if(this.idx++,n)return n;t++}t-=e}if(t<(e=this.item.dups.length))return this.idx++,this.item.dups[t];for(t-=e;t<e;){n=this.item.dups[t].origin;if(this.idx++,n)return n;t++}},t}(_.a),x=function(){function e(e){this.currentWorkersData=[],this.imagesCache={},this.resultHandler=this.resultHandler.bind(this),this.validateImages=e&&e.validateImages,this.onImageLoaded=e&&e.onImageLoaded,this.onImageSizeError=e&&e.onImageSizeError,this.onImageFileSizeError=e&&e.onImageFileSizeError,this.onImageError=e&&e.onImageError}return e.prototype.load=function(e,t){var n=this,r=this.imagesCache[e.id];if(!this.currentWorkersData.some(function(t){return t.item.id===e.id})&&!r){var o;this.stop();o={item:e,onResultHandler:t,loader:new I(e,function(e,t){n.resultHandler(e,t,o)},{itemTimeout:15e3,timeout:9e4,validateImages:this.validateImages,onImageSizeError:this.onImageSizeError,onImageFileSizeError:this.onImageFileSizeError,onImageError:this.onImageError})},this.currentWorkersData.push(o)}},e.prototype.stop=function(){return this.currentWorkersData.length&&(this.currentWorkersData.forEach(function(e){return e.loader.stop()}),this.currentWorkersData.length=0),this},e.prototype.removeItemFromQueue=function(e){var t=this.currentWorkersData.indexOf(e);-1!==t&&this.currentWorkersData.splice(t,1)},e.prototype.resultHandler=function(e,t,n){var r=n.item,o=n.onResultHandler;if(this.removeItemFromQueue(n),!e&&t&&(this.imagesCache[r.id]=t),this.onImageLoaded&&this.onImageLoaded(r,t),o)return e||!t?o(e||_.b.error):void o(void 0,t)},e}(),M=n(21),N=6;function T(e,t){var n=Object(E.m)(t),r=void 0!==t.rimSelectedIdx,o=t.config.imagesLoadingParams.numImagesPreload||0;if(n){if(n&&!t.loadedThumbs[n.id])return e.rimThumbsLoader&&e.rimThumbsLoader.stop(),L(e,n,r?void 0:t.currentItemIdx);var i=t.config.imagesLoadingParams.rimPreloadImagesCount||0;if(!D(e,t,t.rimForItem))for(var a=1;a<=o;a++){var s=t.currentItemIdx+a,c=Object(E.i)(t,s);if(c){if(!t.loadedThumbs[c.id])return L(e,c,s);if(a<=i&&R(e,t,c))return}}}}function R(e,t,n){if(!e.rimThumbsLoader)return!1;var r=Object(C.d)(t,Object(C.f)(n));if(!r||!r.data)return!1;var o=t.config.imagesLoadingParams.rimPreloadPerImage||N;return D(e,t,r.data,o)}function D(e,t,n,r){if(!e.rimThumbsLoader)return!1;var o=Object(C.g)(n,t.loadedRimThumbs,r);return!!o.length&&(e.rimThumbsLoader.precache(o),!0)}function L(e,t,n){e.imageLoader.load(t,function(r,o){e.dispatch(Object(M.f)(t.id,{data:o,isFailed:!o},n))})}var A=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},B=function(e,t){var n=Object(E.e)(t);if(n){var r=U(t,n);r.length&&e.faviconLoader&&(e.faviconLoader.cleanChain(),r.forEach(function(t){var n;null===(n=e.faviconLoader)||void 0===n||n.load(t)})),F(e,t)}};function U(e,t,n){var r;void 0===n&&(n={isPreloading:!1});var o=Object(E.h)(t),i=[];if(i.push(o),t&&t.schemaOrgSnippet&&i.push(t.schemaOrgSnippet.punycode||t.schemaOrgSnippet.domain),t&&t.marketSnippet&&i.push(t.marketSnippet.punycode||t.marketSnippet.domain),t&&(null===(r=e.experiments)||void 0===r?void 0:r.similarOffersFavicons)&&t.similarOffers&&!n.isPreloading&&t.similarOffers.forEach(function(e){i.push(e.domain)}),t&&t.otherOffers&&t.otherOffers.forEach(function(e){i.push(e.punycode||e.domain)}),n.isPreloading){var a=Object(j.a)(e,t);i.push(a)}return i.filter(function(e){return null!=e})}function F(e,t){var n,r,o=Object(E.m)(t);o&&H(e,t,o);var i=t.images,a=Object(E.l)(t);try{for(var s=A(a),c=s.next();!c.done;c=s.next()){var u=c.value;i[u]&&H(e,t,i[u])}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}function H(e,t,n){var r=Object(j.a)(t,n);r&&!Object(E.g)(t,r)&&e.faviconLoader&&e.faviconLoader.load(r)}var q=function(){return(q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},z=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},W=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(z(arguments[t]));return e};function G(e,t){var n=Object(E.e)(t),r={preempt:!0,cleanChain:!0},o=Object(C.f)(n),i=Object(C.i)(t,Object(C.j)(n));B(e,t),o&&e.tagsLoader&&e.tagsLoader.load(o,r),e.directLoader&&n&&e.directLoader.load(q(q({},n),{tags:i&&i.data}),r)}function V(e,t,n){var r=e.rimLoader;if(r){var o=t.rimData[n];o?e.dispatch(Object(M.g)(n,o)):r.load(n,{preempt:!0})}}function Y(e,t){var n=Object(E.e)(t),r=Object(C.f)(n);r&&V(e,t,r)}function K(e,t){for(var n=Object(E.l)(t),r=t.images,o=[],i=[],a=[],s=0;s<n.length;s++){var c=r[n[s]];if(c){var u=Object(C.f)(c),l=Object(C.i)(t,Object(C.j)(c)),d=U(t,c,{isPreloading:!0});o.push(q(q({},c),{tags:l&&l.data})),d&&a.push.apply(a,W(d)),u&&i.push(u)}}e.faviconLoader&&e.faviconLoader.precache(a),e.tagsLoader&&e.tagsLoader.precache(i),e.rimLoader&&(e.rimLoader.cleanChain(),e.rimLoader.precache(i)),e.directLoader&&e.directLoader.precache(o)}var X=n(112);function Q(e,t){return function(e,t,n,r){if(!r)return{images:t.concat(n),loadedPagesCount:e+1};var o=t.slice(0);return n.forEach(function(e){var t=r[e.docid];"undefined"!==typeof t?(o[t]=e,delete r[e.docid]):o.push(e)}),{loadedPagesCount:e+1,images:o,emptyImagesMap:Object.keys(r).length?r:void 0}}(e.loadedPagesCount,e.images,Object(E.k)(e.config.viewerDataLoadingType||0,t,e.images.length),e.emptyImagesMap)}var J=function(){return(J=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Z=5,$=oe("directData"),ee=oe("favicons"),te=oe("tags"),ne=oe("rimData");var re=3e5;function oe(e){return function(t,n,r){var o,i;return(o={})[e]=J(J({},t[e]),((i={})[n]=r,i)),o}}var ie,ae=function(e,t){switch(void 0===e&&(e=le),t.type){case M.a.UPDATE_CONFIG:return function(e,t){var n={config:J(J({},e.config),t)};return n.config.directSnippetParams&&(n.config.directSnippetParams=Object(j.g)(e.globalContext,n.config.directSnippetParams)),n}(e,t.config);case M.a.UPDATE_CONTEXT:return function(e,t){var n={globalContext:J(J({},e.globalContext),t)};return e.config.directSnippetParams&&n.globalContext&&(n.config=e.config,n.config.directSnippetParams=Object(j.g)(e.globalContext,e.config.directSnippetParams)),n}(e,t.context);case M.a.ADD_DIRECT_DATA:return $(e,t.id,t.data);case M.a.ADD_FAVICON_DATA:return ee(e,t.id,t.data);case M.a.ADD_TAGS_DATA:return te(e,t.id,t.data);case M.a.ADD_RIM_DATA:return function(e,t,n){var r=e.imagesByRimId,o=e.rimForItem,i=e.rimLoadingId,a=e.rimPageItems,s=e.rimPageItemsMap,c=e.rimLoadingIdx,u=e.rimPagesCount,l=e.loadedRimThumbs,d=e.rimEmptyPageLoadCount,p=ne(e,t,n),f=Object(C.f)(Object(E.e)(e)),h=Object(C.a)(n&&n.data||[],s,l);if(f===t){var m=Object(E.e)(e);m&&(s=Object(X.b)([m],s)),s=Object(X.b)(h,s),o=h,u++}else if(i===t){var v=e.config.rim,b=v?v.loader.itemsOnPage:8;a=a.concat(h),s=Object(X.b)(h,s),a.length>=b?(o=o.concat(a),a=[],i="",u++):(c++,i=Object(C.f)(o[c])||"")}return r=Object(X.b)(h,r),J(J({},p),{rimForItem:o,rimPageItems:a,rimPageItemsMap:s,rimPagesCount:u,rimLoadingId:i,rimLoadingIdx:c,imagesByRimId:r,rimEmptyPageLoadCount:h.length>0||i!==t?0:d+1})}(e,t.id,t.data);case M.a.REQUEST_RIM_PAGE:return function(e){var t=e.config.rim;if(!t)return null;var n=t.loader.pagesMaxCount,r=e.rimLoadingIdx,o=e.rimLoadingId,i=e.rimForItem,a=e.rimPagesCount,s=e.rimEmptyPageLoadCount;return o||a>n||s>Z?null:(r++,{rimLoadingId:o=Object(C.f)(i[r])||"",rimLoadingIdx:r})}(e);case M.a.SET_SELECTED_RIM:return function(e,t){var n,r=Object(C.c)(e,t),o={rimSelectedIdx:t};if(r){var i=e.loadedThumbs[r.id];i&&!i.data&&(o.loadedThumbs=J(J({},e.loadedThumbs),((n={})[r.id]=void 0,n)))}return o}(e,t.idx);case M.a.SET_CURRENT_ITEM_IDX:return function(e,t){var n,r=t!==e.currentItemIdx;if(!r)return{rimSelectedIdx:void 0};var o={currentItemIdx:t,rimSelectedIdx:void 0,rimForItem:[],rimLoadingId:"",rimLoadingIdx:-1,rimPagesCount:0,rimEmptyPageLoadCount:0,rimPageItemsMap:{}};r&&(o.preloadImagesIndexes=Object(E.j)(e,t));var i=Object(E.i)(e,t),a=i&&e.loadedThumbs[i.id];return a&&!a.data&&(o.loadedThumbs=J(J({},e.loadedThumbs),((n={})[i.id]=void 0,n))),o}(e,t.index);case M.a.ADD_IMAGES_BY_THUMB:return Q(e,t.items);case M.a.ADD_IMAGES_BY_POS:return function(e,t){return{images:Object(X.a)(t,e.images),imagesByRimId:Object(X.b)(t,e.imagesByRimId)}}(e,t.items);case M.a.SET_IMAGES_BY_POS:return n=t.items,{images:Object(X.a)(n),imagesByRimId:Object(X.b)(n)};case M.a.ADD_LOADED_THUMB_DATA:return function(e,t,n,r){var o,i={loadedThumbs:J(J({},e.loadedThumbs),(o={},o[t]=n,o))};if(void 0===r)return i;var a=e.images[r];return a&&(i.images=e.images.slice(),i.images[r]=J(J({},a),{loadedImage:n})),i}(e,t.id,t.data,t.index);case M.a.ADD_CROP_OBJECT:return function(e,t){var n;return{cropObjects:J(J({},e.cropObjects),(n={},n[t.imageId]={data:t.data,expireTime:t.timestamp+re},n))}}(e,t);case M.a.SET_TRIMMER_AREA:return function(e,t){return{trimmerArea:t}}(0,t.area);case M.a.ADD_LOADED_RIM_THUMB_DATA:return function(e,t,n){var r,o=J(J({},e.loadedRimThumbs),((r={})[t]=n,r)),i={loadedRimThumbs:o};return i.rimForItem=Object(C.a)(e.rimForItem,void 0,o),i}(e,t.id,t.data);default:return e}var n},se={reqid:"#invalid-value-error",query:"#invalid-value-error",yandexuid:"#invalid-value-error",lr:-100500,tld:"#invalid-value-error",lang:"#invalid-value-error"},ce=((ie=o.createContext(se)).Provider,ie.Consumer,function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),ue=function(){return(ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},le={images:[],loadedThumbs:{},loadedRimThumbs:{},imagesByRimId:{},currentItemIdx:-1,preloadImagesIndexes:[],loadedPagesCount:0,directData:{},wizardThumbs:[],favicons:{},tags:{},rimData:{},rimLoadingId:"",rimLoadingIdx:-1,rimPagesCount:0,rimForItem:[],rimPageItems:[],rimPageItemsMap:{},rimEmptyPageLoadCount:0,config:{preloadLeftBorder:1,preloadRightBorder:5,imagesCbirSearchUrl:"",openServiceOnNewTab:!1,imagesLoadingParams:{},rim:{justifier:{baseRowHeight:150},loader:{pagesMaxCount:1,itemsOnPage:8,preloadCountOnInit:5,preloadCountOnMore:1},thumb:{hosts:["im0-tub-ru.yandex.net"]}}},globalContext:se,cropObjects:{}},de=o.createContext({state:le,dispatch:function(){return{}}});function pe(e,t){if(e===t)return!0;if(null===e||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(function(n){return e[n]===t[n]})}function fe(e){return function(t){var n=function(n){function r(t){var r=n.call(this,t)||this;return r.state=e(t.state,t.dispatch,t.ownProps),r}return ce(r,n),r.prototype.shouldComponentUpdate=function(e,t){return!pe(t,this.state)||!pe(e.ownProps,this.props.ownProps)},r.prototype.render=function(){return o.createElement(t,ue({},this.props.ownProps,this.state))},r.getDerivedStateFromProps=function(t,n){var r=e(t.state,t.dispatch,t.ownProps);return Object.keys(n).forEach(function(e){void 0===r[e]&&void 0!==n[e]&&(r[e]=void 0)}),r},r.displayName="Connected-"+(t.displayName||t.name||"Component"),r}(o.Component);return function(e){return o.createElement(de.Consumer,null,function(t){var r=t.state,i=t.dispatch;return o.createElement(n,{state:r,dispatch:i,ownProps:e})})}}}var he=function(e){var t=o.useContext(de);return e(t.state,t.dispatch)},me=function(e){function t(t){var n=e.call(this,t)||this;n.componentIsMounted=!1,n.state=ue(ue({},le),t.initialState);var r=n.state.config;n.props.TagsLoader||(r.isDuckEnabled=!1),n.props.RimLoader||(r.rim=void 0),r.directSnippetParams&&(r.directSnippetParams=Object(j.g)(n.state.globalContext,r.directSnippetParams)),n.dispatch=n.dispatch.bind(n);var o=r.imagesLoadingParams;n.imageLoader=new x(o),void 0!==o.rimPreloadImagesCount&&n.props.ThumbsLoader&&(n.rimThumbsLoader=new n.props.ThumbsLoader({onImageError:o.onRimLoadingError,onImageLoaded:function(e,t){n.dispatch(Object(M.e)(e.url,{data:t,isFailed:!t}))}})),!1!==r.isDuckEnabled&&n.props.TagsLoader&&(n.tagsLoader=new n.props.TagsLoader(ue(ue({},Object(C.k)(n.state.globalContext)),{duckParams:r.duckParams,storeGetter:function(e){return Object(C.i)(n.getState(),e)},storeSetter:function(e,t){var r=t&&t.data||[];n.dispatch(Object(M.h)(e,{data:r}))}}))),n.props.FaviconLoader&&(n.faviconLoader=new n.props.FaviconLoader({multiRequestLimit:r.preloadRightBorder+r.preloadLeftBorder,storeGetter:function(e){return n.getState().favicons[e]},storeSetter:function(e,t){n.dispatch(Object(M.c)(e,t))}})),n.initDirectLoader();var i=r.rim;return i&&n.props.RimLoader&&(n.rimLoader=new n.props.RimLoader({path:"rim",config:i,storeGetter:function(e){return n.getState().rimData[e]},storeSetter:function(e,t){t&&!t.isFailed&&t.data&&(t.data=Object(v.b)("docid",t.data)),n.dispatch(Object(M.g)(e,t))}})),n}return ce(t,e),t.prototype.render=function(){return o.createElement(de.Provider,{value:{state:this.getState(),dispatch:this.dispatch}},this.props.children)},t.prototype.componentDidMount=function(){var e;this.componentIsMounted=!0;var t=this.getState();(null===(e=t.experiments)||void 0===e?void 0:e.preloadImagesOnMount)&&(T(this,t),Y(this,t))},t.prototype.componentWillUnmount=function(){this.componentIsMounted=!1},t.prototype.componentDidUpdate=function(e,t){var n=this.getState(),r=n.config.dataLoadingPriority||{},o=n.currentItemIdx!==t.currentItemIdx,i=void 0!==n.rimSelectedIdx,a=n.globalContext!==t.globalContext,s=!o&&n.rimLoadingId!==t.rimLoadingId,c=n.rimPagesCount!==t.rimPagesCount,u=Boolean(n.rimForItem.length),l=n.directData!==t.directData,d=n.tags!==t.tags,p=!this.directLoader||Object(j.e)(n,n.images[n.currentItemIdx]),f=Object(E.f)(n);n.loadedThumbs===t.loadedThumbs&&n.loadedRimThumbs===t.loadedRimThumbs&&n.rimForItem===t.rimForItem&&n.images===t.images||(T(this,n),!f&&r.dataWaitForImage||G(this,n),!f&&r.preloadWaitForImg||!p&&r.preloadWaitForData||!u&&r.preloadWaitForRim||K(this,n)),o&&(this.rimThumbsLoader&&this.rimThumbsLoader.stop(),T(this,n),!f&&r.dataWaitForImage||(G(this,n),u||!p&&r.rimDataWaitForDirect||Y(this,n)),!f&&r.preloadWaitForImg||!p&&r.preloadWaitForData||!u&&r.preloadWaitForRim||K(this,n)),i&&(!function(e,t){var n=Object(E.m)(t);if(n){var r={preempt:!0},o=Object(C.f)(n),i=Object(E.h)(n),a=Object(C.i)(t,Object(C.j)(n));o&&e.tagsLoader&&e.tagsLoader.load(o,r),i&&e.faviconLoader&&e.faviconLoader.load(i,r);var s=Object(C.e)(t).searchAdvertEnabled;void 0!==s&&s&&e.directLoader&&e.directLoader.load(q(q({},n),{tags:a&&a.data}),r)}}(this,n),T(this,n)),a&&function(e,t){t.config.directSnippetParams&&e.initDirectLoader(),e.tagsLoader&&e.tagsLoader.updateParams(Object(C.k)(t.globalContext))}(this,n),s&&function(e,t){var n=t.rimLoadingId;n&&V(e,t,n)}(this,n),(s||c)&&(!function(e,t){var n=e.rimLoader;if(n){var r=t.config.rim;if(r&&r.loader.pagesMaxCount){var o=r.loader,i=o.preloadCountOnInit,a=void 0===i?1:i,s=o.preloadCountOnMore,c=void 0===s?1:s,u=t.rimPagesCount,l=t.rimLoadingIdx,d=t.rimLoadingId,p=t.rimForItem,f=!d&&1===u,h=f?a:c,m=f?0:a+l,v=Object(C.b)(p,m,h);v.length&&n.precache(v)}}}(this,n),D(this,n,n.rimForItem)),l&&(u||!f&&r.dataWaitForImage||!p&&r.rimDataWaitForDirect||Y(this,n),F(this,n)),d&&function(e,t){if(e.directLoader){var n=Object(E.e)(t),r=Object(C.i)(t,Object(C.j)(n));n&&e.directLoader.load(q(q({},n),{tags:r&&r.data}),{preempt:!0,cleanChain:!0});for(var o=Object(E.l)(t),i=t.images,a=0;a<o.length;a++){var s=i[o[a]];if(s){var c=Object(C.i)(t,Object(C.j)(s));e.directLoader.load(q(q({},s),{tags:c&&c.data}),o[a]===t.currentItemIdx?{preempt:!0}:void 0)}}}}(this,n),this.props.onStateChange&&this.props.onStateChange(n,t)},t.prototype.initDirectLoader=function(){var e=this;if("undefined"!==typeof window){var t=this.state.config.directSnippetParams;if(t){var n=void 0,r=this.state.globalContext,o=Object(j.h)(r,t);if(r.isQueryPorn?Object(j.i)(this.state)&&(n=o?this.props.DirectLoaderAdultHighComm:this.props.DirectLoaderAdultLowComm):(o&&t.directPageIdCommercial&&(n=this.props.DirectLoaderHighComm),!o&&t.directPageIdLowCommercial&&(n=this.props.DirectLoaderLowComm)),!n)return;this.directLoader=new n(ue(ue({},Object(j.d)(r,t,this.state.config)),{storeGetter:function(t){return e.getState().directData[t]},storeSetter:function(t,n){return e.dispatch(Object(M.b)(t,n))}}))}}},t.prototype.dispatch=function(e){this.componentIsMounted&&this.setState(ae(this.getState(),e))},t.prototype.getState=function(){return this.state},t}(o.Component),ve=Object(i.withRegistry)(O)(function(e){return o.createElement(i.ComponentRegistryConsumer,{id:Object(y.a)()},function(t){var n=t.DirectLoaderHighComm,r=t.DirectLoaderLowComm,i=t.DirectLoaderAdultHighComm,a=t.DirectLoaderAdultLowComm,s=t.RimLoader,c=t.TagsLoader,u=t.FaviconLoader,l=t.ThumbsLoader;return o.createElement(me,ue({ref:e.forwardRef,DirectLoaderHighComm:n,DirectLoaderLowComm:r,DirectLoaderAdultHighComm:i,DirectLoaderAdultLowComm:a,RimLoader:s,TagsLoader:c,FaviconLoader:u,ThumbsLoader:l},e))})})},250:function(e,t,n){"use strict";var r=n(0),o=n(117);t.a=function(e,t){var n=Object(o.a)();Object(r.useEffect)(function(){if(!n)return e()},t)}},252:function(e,t,n){
/*!
* screenfull
* v5.0.2 - 2020-02-13
* (c) Sindre Sorhus; MIT License
*/
!function(){"use strict";var t="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},n=e.exports,r=function(){for(var e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,o=n.length,i={};r<o;r++)if((e=n[r])&&e[1]in t){for(r=0;r<e.length;r++)i[n[0][r]]=e[r];return i}return!1}(),o={change:r.fullscreenchange,error:r.fullscreenerror},i={request:function(e){return new Promise(function(n,o){var i=function(){this.off("change",i),n()}.bind(this);this.on("change",i);var a=(e=e||t.documentElement)[r.requestFullscreen]();a instanceof Promise&&a.then(i).catch(o)}.bind(this))},exit:function(){return new Promise(function(e,n){if(this.isFullscreen){var o=function(){this.off("change",o),e()}.bind(this);this.on("change",o);var i=t[r.exitFullscreen]();i instanceof Promise&&i.then(o).catch(n)}else e()}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,n){var r=o[e];r&&t.addEventListener(r,n,!1)},off:function(e,n){var r=o[e];r&&t.removeEventListener(r,n,!1)},raw:r};r?(Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(t[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[r.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[r.fullscreenEnabled])}}}),n?e.exports=i:window.screenfull=i):n?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}()},253:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(549);var r=function(){function e(){this.history=document.createElement("div"),this.cachableImg=new Image,this.history.className="image_history_cache",document.body.appendChild(this.history)}return e.prototype.addToHistory=function(e){var t=document.createElement("img");t.src=e,this.history.appendChild(t)},e.prototype.isUrlCachable=function(e){this.cachableImg.src=e;var t=this.cachableImg.complete;return this.cachableImg.src="",t},e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}()},254:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return p});var r=n(0),o=n.n(r),i=n(255),a=n(8),s=n(100),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},l="openSimilarShown";var d,p=(d=i.a,function(e){var t=u(e,[]),n=t.isSimilarUnauthPopupEnabled,i=t.showUnauthPopup,p=t.tld,f=void 0===p?"ru":p,h=Object(r.useCallback)(function(e){var t="images_viewer_similar";n&&i&&i(e,l,{loginUrl:Object(s.a)(f,t),registrationUrl:Object(s.b)(f,t)})},[n,i,f]),m=Object(r.useCallback)(function(e){e.preventDefault(),Object(a.a)().emit("location:change",{url:e.currentTarget.href})},[]);return n&&i?o.a.createElement(d,c({},t,{onClick:h})):o.a.createElement(d,c({},t,{onClick:m}))})},255:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r,o=n(0),i=n(7),a=n.n(i),s=n(26),c=n(5),u=n(33),l=n(41),d=n(135),p=n(24),f=n(20),h=n(123),m=(n(576),r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v=a()(h),b=Object(d.a)(l.b),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t.prototype.render=function(){var e=this.props,t=e.onLog,n=e.onClickCounter,r=e.onClickLogNode,i=e.view,a=e.isSimilarUnauthPopupEnabled,s=e.onClick,d=e.experiments,h=this.getUrl();if(!h)return null;var m=i===p.b.compact||i===p.b.twoLines;return o.createElement(b,{className:Object(f.a)("SearchByImage",{view:i,similarButtonIcon:d&&d.similarButtonIcon}),logNode:a?void 0:{name:"cbir1",attrs:r&&r.attrs,events:{onClick:Object(c.logClick)(n)}},text:m?v("Похожие",{context:"Кнопка в просмотрщике картинки https://nda.ya.ru/3UYbqn"}):v("Другие размеры и похожие",{context:"Кнопка в просмоторщике картинки https://nda.ya.ru/3UYbqn"}),url:a?"#":h,target:this.getTarget(),icon:o.createElement(u.a,{type:"similar-search"}),type:l.a.link,onLog:a?void 0:t,onClick:s})},t.prototype.getUrl=function(){var e,t,n,r,o,i,a=this.props,c=a.image,u=a.imagesCbirSearchUrl,l=a.query,d=a.experiments,p=c.extraOrigin||(null===(t=null===(e=c.preview)||void 0===e?void 0:e[0])||void 0===t?void 0:t.origin)||(null===(r=null===(n=c.dups)||void 0===n?void 0:n[0])||void 0===r?void 0:r.origin)||(null===(o=c.preview)||void 0===o?void 0:o[0])||(null===(i=c.dups)||void 0===i?void 0:i[0]),f=(null===p||void 0===p?void 0:p.url)||c.imgHref;if(f){var h={url:f,rpt:"imageview"};return(null===d||void 0===d?void 0:d.searchByImageLinkWithoutText)||(h.text=l),Object(s.appendQueryString)(u,h)}},t.prototype.getTarget=function(){return this.props.openServiceOnNewTab?"_blank":"_self"},t}(o.PureComponent)},256:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(45),o=(n(641),Object(r.a)("SectionHeader"))},257:function(e,t,n){"use strict";n.d(t,"a",function(){return We});var r,o,i,a=n(0),s=n(7),c=n.n(s),u=n(5),l=n(33),d=n(1),p=n(433),f=n(697),h=n(434),m=n(248),v=n(518),b=n(525),g=n(137),y=function(){function e(){g.canUseDOM&&(this.isLoaded()||this.isScriptExists()||this.loadScript())}return e.prototype.whenScriptReady=function(e){this.readyCallback=e,this.runCallback()},e.prototype.isLoaded=function(){return Boolean(this.getYaShare())},e.prototype.isScriptExists=function(){return Boolean(document.getElementById("ya-share-script"))},e.prototype.getYaShare=function(){var e;if(g.canUseDOM)return null===(e=window.Ya)||void 0===e?void 0:e.share2},e.prototype.runCallback=function(){var e=this.readyCallback,t=this.getYaShare();t&&e&&setTimeout(function(){return e(t)})},e.prototype.loadScript=function(){var e=this,t=document.createElement("script");t.id="ya-share-script",t.src="//yastatic.net/share2/share.js",t.async=!0,t.crossOrigin="",t.onload=function(){return e.waitForInit()},t.onerror=function(){throw new Error("failed to load ya-share2")},document.body.appendChild(t)},e.prototype.waitForInit=function(){var e=this,t=0,n=setInterval(function(){if(10===++t)throw clearInterval(n),new Error("failed to load ya-share2");e.isLoaded()&&(clearInterval(n),e.runCallback())},50)},e}(),O=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},w=0,j=function(e){var t=a.useRef(),n=function(){var e=O(a.useState(),2),t=e[0],n=e[1];return a.useEffect(function(){n("ya-share2-instance-"+w++)},[]),t}();return a.useEffect(function(){r||(r=new y)},[]),a.useEffect(function(){return n&&!t.current&&r.whenScriptReady(function(r){t.current=r(n,{services:e.services,hooks:{onshare:e.onShare},content:{url:e.url}})}),function(){t.current&&(t.current.destroy(),t.current=void 0)}},[e.onShare,e.services,e.url,n]),a.useEffect(function(){t.current&&t.current.updateContent({url:e.url})},[e.url]),n?a.createElement("div",{id:n,"data-services":e.services,"data-size":"s","data-lang":e.lang||"ru","data-direction":e.direction}):null},C=function(){return(C=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},E=Object(d.compose)(p.a,f.a,b.a,h.a,v.a)(m.a),S=function(e){return a.createElement(E,C({hasTail:!0,theme:"normal",view:"default",target:"anchor",className:e.className,onOutsideClick:e.onOutsideClick},e.popup),e.header,a.createElement(j,{url:e.link,onShare:e.onShare,services:e.services||"vkontakte,odnoklassniki,facebook,twitter",direction:"vertical",lang:e.lang}),e.footer)},_=n(25),k=n(31),P=n(6),I=n(3),x=n(26),M=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),N=function(e){function t(t){var n,r=this.constructor.prototype;return n=e.call(this,t)||this,Object.setPrototypeOf(n,r),n}return M(t,e),t}(Error),T=function(e){function t(t){var n=e.call(this,"Ошибка при работе с Яндекс.Диском: пользователь неавторизован")||this;return n.status=401,n.stack=t.stack,n}return M(t,e),t}(N),R=function(e){function t(t){var n=e.call(this,"Ошибка при работе с Яндекс.Диском: неизвестная ошибка")||this;return t&&Object.assign(n,t),n}return M(t,e),t}(N),D=function(e){function t(t){var n=e.call(this,"Ошибка при работе с Яндекс.Диском: не хватает места")||this;return n.status=507,n.stack=t.stack,n}return M(t,e),t}(N),L="ru",A={info:"/",resources:"/resources/",operations:"/operations/",upload:"/resources/upload/"},B={POST:function(e,t,n){return Object(x.sendRequest)(e,Object.assign({method:"post"},t),n,t&&t.body||null)},PUT:x.put,DELETE:x.del,PATCH:function(e,t,n){return Object(x.sendRequest)(e,Object.assign({method:"patch"},t),n,t&&t.body)}},U=function(){function e(e){void 0===e&&(e={}),this.tld=e.tld||L,this.baseUrl="https://cloud-api.yandex."+this.tld+"/images/v1/disk",this.endpoints=e.endpoints||A}return e.prototype.info=function(){return this.callMethod({url:this.getMethodEndpoint("info"),method:"GET",format:"json"})},e.prototype.status=function(e){return this.callMethod({url:e,method:"GET",format:"json"})},e.prototype.setMeta=function(e,t){return this.callMethod({url:this.getMethodEndpoint("resources"),method:"PATCH",format:"json",headers:{"content-type":"application/json"},queryParams:{path:e},body:JSON.stringify({custom_properties:t})})},e.prototype.isPathExists=function(e){return this.callMethod({url:this.getMethodEndpoint("resources"),method:"GET",format:"json",queryParams:{path:e,limit:1}})},e.prototype.mkdir=function(e){return this.callMethod({url:this.getMethodEndpoint("resources"),method:"PUT",format:"json",queryParams:{path:e}})},e.prototype.upload=function(e,t){return this.callMethod({url:this.getMethodEndpoint("upload"),method:"POST",format:"json",queryParams:{url:t,path:e,disable_redirects:"true"}})},e.prototype.callMethod=function(e){var t=e.method,n=e.url,r="GET"===t?x.get:B[t];return new Promise(function(t,o){r(n,e,{successCallback:function(e){return t(e)},failureCallback:function(e,t,n){switch(t.status){case 401:return o(new T(n));case 507:return o(new D(n));default:return o(new R({response:n,status:t.status}))}}})})},e.prototype.getMethodEndpoint=function(e){var t=this.endpoints[e];return this.baseUrl+t},e}(),F=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),H=function(){return(H=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};!function(e){e.active="active",e.loading="loading",e.uploaded="uploaded",e.failed="failed"}(i||(i={}));var q={},z=function(e){function t(t){var n=e.call(this,t)||this;return n.defaults=H(H({},n.props),{maxPollingRequests:15,pollingTimeout:300,fileName:"Image.jpg",dirName:"Images"}),n.retriesCount={},n.mounted=!0,n.api=new U(t),n.state={status:q[t.fileUrl]||i.active},n}return F(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.upload=function(){var e=this,t=this.props.fileUrl,n=this.props.dirName||this.defaults.dirName,r=n+"/"+(this.props.fileName||this.getFileName(t));return!this.props.loggedIn&&this.props.requestAuthorization?this.props.requestAuthorization():(this.setState({status:i.loading,error:void 0}),this.ensureDirectory(n).then(function(){return e.api.upload(r,t)}).then(function(t){return e.waitForUpload(t.href)}).then(function(){e.props.fileMeta&&e.setMeta(r,e.props.fileMeta)}).then(function(){e.mounted&&(q[e.props.fileUrl]=i.uploaded,e.setState({status:i.uploaded,error:void 0}),e.props.onSuccess&&e.props.onSuccess())}).catch(function(t){e.mounted&&e.setState({status:i.failed,error:t})}))},t.prototype.ensureDirectory=function(e){var t=this;return this.api.isPathExists(e).catch(function(n){if(!n||404!==n.status)throw n;return t.api.mkdir(e)})},t.prototype.setMeta=function(e,t){return this.api.setMeta(e,t)},t.prototype.waitForUpload=function(e){var t=this;return new Promise(function(n,r){t.checkOperationStatus(e).then(function(o){t.mounted||r(new R),"pending"===o.status&&setTimeout(function(){return n(t.waitForUpload(e))},t.defaults.pollingTimeout),"failed"===o.status&&r(o.error),"success"===o.status&&n()})})},t.prototype.checkOperationStatus=function(e){var t=this;return this.api.status(e).then(function(e){return null==e||"failed"===e.status?{status:"failed",error:new R}:"success"===e.status?{status:"success"}:{status:"pending"}}).catch(function(n){var r=null==t.retriesCount[e]?t.defaults.maxPollingRequests:t.retriesCount[e];return 0!==r&&n instanceof R?(t.retriesCount[e]=r-1,{status:"pending"}):{status:"failed",error:n}})},t.prototype.getFileName=function(e){var t=e.substring(e.lastIndexOf("/")+1,e.length),n=t.indexOf("#"),r=t.indexOf("?");-1!==r?t=t.substring(0,r):-1!==n&&(t=t.substring(0,n));try{t=decodeURIComponent(t)}catch(e){}return t.length>250&&(t=t.substr(0,250)),(t=t.replace(/(\*|\||\\|:|"|<|>)/gi,"-"))||this.defaults.fileName},t.prototype.render=function(){return this.props.children({fileName:this.props.fileName||this.getFileName(this.props.fileUrl),status:this.state.status,uploaded:this.state.status===i.uploaded,loading:this.state.status===i.loading,failed:this.state.status===i.failed,error:this.state.error,upload:this.upload.bind(this)})},t}(a.Component),W=n(4),G=Object(W.cn)("MMShareDisk"),V=(n(617),Object(u.withBaobab)({name:"MMShareDisk",events:{onSuccess:Object(u.logClick)(function(e){return e.props.counter})}})(function(e){return a.createElement(I.ComponentRegistryConsumer,{id:G()},function(t){return a.createElement(z,{key:e.fileUrl,tld:e.tld,fileUrl:e.fileUrl,dirName:e.dirName,fileMeta:e.fileMeta,loggedIn:e.loggedIn,requestAuthorization:e.requestAuthorization,onSuccess:e.onSuccess},function(n){var r=n.status,o=function(e,t){return t[G("Presenter",{status:e})]}(r,t);return a.createElement(o,{status:n.status,loading:n.loading,uploaded:n.uploaded,failed:n.failed,error:n.error,upload:n.upload,fileName:n.fileName,fileUrl:e.fileUrl,tld:e.tld||"ru",requestAuthorization:e.requestAuthorization,errorTooltipTimeout:e.errorTooltipTimeout||5e3,popupScope:e.popupScope,className:G("Presenter",{status:r}),counter:e.counter})})})})),Y=(n(612),Object(W.cn)("Share")),K=Object(u.withBaobab)({name:"ShareItem",events:{onClick:Object(u.logClick)(function(e){return e.counter})}})(function(e){var t=e.icon,n=e.title,r=e.onClick,o=e.className,i=void 0===o?"":o;return a.createElement("li",{className:Y("Item",{more:!0},["ya-share2__item ya-share2__container ya-share2__container_size_s",i]),onClick:r},a.createElement("span",{className:"ya-share2__badge"},a.createElement("span",{className:"ya-share2__icon"},t)),a.createElement("span",{className:"ya-share2__title"},n))}),X=n(169),Q=c()(X),J=a.createElement(l.a,{className:G("Icon",{type:"disk"}),type:"disk"}),Z=n(113),$=(n(616),c()(X)),ee=a.createElement(function(){return a.createElement(Z.b,{className:G("Spinner")})},null),te=n(821),ne=n(710),re=n(306),oe=n(209),ie=n(360),ae=function(){return(ae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},se=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},ce=c()(X),ue=Object(d.compose)(p.a,f.a,h.a,b.a)(m.a),le=Object(d.compose)(Object(d.composeU)(te.a,ne.a),re.a,oe.a)(ie.a),de=function(e){return function(t){var n=t.props,r=n.counters&&n.counters.tuneDiskPopup;if(r)return Object(P.b)(r[e])}},pe=Object(d.compose)(k.d,Object(u.withBaobab)({name:"MMShareDiskTuneDisk",events:{onLinkClick:Object(u.logClick)(de("click")),onCloseClick:Object(u.logClick)(de("close")),onShow:Object(u.logTech)("shown",de("shown"))}}))(function(e){var t=e.onCloseClick,n=e.onLinkClick,r=e.onShow,o=e.tld,i=ce("Нет места на Яндекс.Диске",{context:"Надпись на тултипе рядом с кнопкой сохранения на диск при нехватке места на Яндекс.Диске"}),s=function(e){return"https://disk.yandex."+e+"/tuning"}(o);return a.useEffect(function(){r&&r()},[r]),a.createElement("div",{className:G("TooltipContent")},a.createElement("div",{className:G("TooltipDescription")},i),a.createElement("div",{className:G("TooltipCloseIcon"),onClick:t}),a.createElement("div",{className:G("TooltipButtons")},a.createElement(le,{className:G("TooltipButton",{pinned:"bottom-right"}),size:"m",theme:"action",type:"link",target:"_blank",onClick:n,url:s},ce("Купить еще место",{context:'Кнопка "купить еще место" при нехватке места для сохранения картинки на Яндекс.Диск'}))))}),fe=function(e){var t=ce("Не получается, попробуйте позже или сохраните картинку на компьютер",{context:"Надпись на тултипе рядом с кнопкой сохранения на диск при ошибке"}),n=a.useCallback(function(){!function(e,t){var n=e;-1!==n.indexOf("?")?n+="&download="+t:n+="?download="+t;var r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),r.setAttribute("target","_blank"),document.body.appendChild(r),setTimeout(function(){r.click(),document.body.removeChild(r)},0)}(e.fileUrl,e.fileName)},[e.fileName,e.fileUrl]);return a.createElement("div",{className:G("TooltipContent")},a.createElement("div",{className:G("TooltipDescription")},t),a.createElement("div",{className:G("TooltipCloseIcon"),onClick:e.onCloseClick}),a.createElement("div",{className:G("TooltipButtons")},a.createElement(le,{className:G("TooltipButton",{pinned:"bottom-right"}),size:"m",theme:"action",onClick:n},ce("Сохранить",{context:'Кнопка "сохранить картинку на компьютер" при неудачном сохранении на Яндекс.Диск'}))))},he=c()(X),me=a.createElement(l.a,{className:G("Icon",{type:"check"}),type:"check"}),ve=new I.Registry({id:G()});ve.set(G("Presenter",{status:i.active}),function(e){var t=e.upload,n=a.useCallback(function(){setTimeout(t,0)},[t]);return a.createElement(K,{className:e.className,onClick:n,icon:J,title:Q("Сохранить на диск",{context:"Кнопка для сохранения картинки на Яндекс.Диск"})})}),ve.set(G("Presenter",{status:i.loading}),function(e){return a.createElement(K,{className:e.className,icon:ee,title:$("Сохраняем картинку",{context:"Кнопка для сохранения картинки на Яндекс.Диск во время загрузки"})})}),ve.set(G("Presenter",{status:i.failed}),function(e){var t,n,r,o,i=a.createRef(),s=se(a.useState(!0),2),c=s[0],u=s[1],l=a.useCallback(function(){return u(!0)},[u]),d=a.useCallback(function(){return u(!1)},[u]);t=l,n=d,r=e.errorTooltipTimeout||5e3,o=[],a.useEffect(function(){t();var e=setTimeout(n,r);return function(){n(),clearTimeout(e)}},[t,n,r].concat(o));var p=e.error,f=e.requestAuthorization;a.useEffect(function(){p instanceof T&&f&&f()},[p,f]);var h=a.createElement(fe,{tld:e.tld,onCloseClick:function(){return u(!1)},fileUrl:e.fileUrl,fileName:e.fileName});return p instanceof D&&(h=a.createElement(pe,{tld:e.tld,onCloseClick:function(){return u(!1)}})),a.createElement(I.ComponentRegistryConsumer,{id:G()},function(t){var n=t[G("Presenter",{status:"active"})];return a.createElement(a.Fragment,null,a.createElement("div",{ref:i},a.createElement(n,ae({},e))),h&&a.createElement(ue,{view:"default",target:"anchor",className:G("Tooltip",{theme:"dark"}),keepMounted:!1,hasTail:!0,visible:c,anchor:i,zIndexGroupLevel:20,mainOffset:0,scope:e.popupScope,directions:["bottom-center","top-center"]},h))})}),ve.set(G("Presenter",{status:i.uploaded}),function(e){return a.createElement(K,{className:e.className,icon:me,title:he("Картинка сохранена",{context:"Кнопка для сохранения картинки на Яндекс.Диск после успешной загрузки"})})});var be=Object(I.withRegistry)(ve)(V),ge=n(403),ye=n(764),Oe=n(23),we=(n(613),Object(d.withBemMod)(Object(Oe.b)(),{theme:"normal"})),je=(n(614),n(615),Object(d.withBemMod)(Object(Oe.b)(),{size:"m"})),Ce=n(765),Ee=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Se=Object(d.compose)(ye.a,we,je)(Ce.a),_e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputRef=a.createRef(),t}return Ee(t,e),t.prototype.componentDidMount=function(){this.selectAll()},t.prototype.componentDidUpdate=function(){this.selectAll()},t.prototype.render=function(){return a.createElement(Se,{view:"default",theme:"normal",size:"m",value:this.props.value,controlRef:this.inputRef})},t.prototype.selectAll=function(){var e=this.inputRef.current;setTimeout(function(){return e&&e.select()})},t}(a.Component),ke=n(674),Pe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ie=a.createElement(l.a,{type:"chain"}),xe=a.createElement(l.a,{type:"check"}),Me=c()(ke),Ne=function(e){return a.createElement(K,{logNode:e.logNode,counter:e.counter,icon:Ie,title:Me("Скопировать ссылку",{context:"Кнопка для коппирования ссылки на картинку https://nda.ya.ru/3UYbpX"}),onClick:e.onClick})},Te=function(e){function t(t){var n=e.call(this,t)||this;return n.state={fallback:!1,copied:!1},n.onClick=n.onClick.bind(n),n}return Pe(t,e),t.prototype.componentDidUpdate=function(){this.state.copied&&!this.props.active&&this.setState({fallback:!1,copied:!1})},t.prototype.render=function(){return this.state.fallback?a.createElement(_e,{value:this.props.link}):this.state.copied?a.createElement(K,{icon:xe,title:Me("Ссылка скопирована",{context:"Надпись оповещающая о успешном копировании ссылки https://nda.ya.ru/3UYbot"})}):a.createElement(Ne,{onClick:this.onClick,logNode:this.props.logNode,counter:this.props.counter})},t.prototype.onClick=function(){var e=this,t=Object(ge.copyToBuffer)(this.props.link);setTimeout(function(){e.setState({copied:t,fallback:!t})},0)},t}(a.Component),Re=(n(611),function(){return(Re=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),De=function(e){return Re({lang:e.globalContext.lang},e.config.shareConfig)},Le=Object(u.withBaobab)({name:"share"})(function(e){var t=Object(_.c)(De),n=t.services,r=t.lang,o=Object(k.c)(),i={page_url:e.snippetUrl,yaimages_search_url:"",yaimages_search_request:""},s=o.shareClick;return a.createElement(S,{link:e.link,popup:{anchor:e.anchor,visible:e.visible,secondaryOffset:e.secondaryOffset||3,zIndex:e.zIndex,zIndexGroupLevel:e.zIndexGroupLevel,scope:e.popupScope},services:n,onShare:e.onShare,className:"MMSharePopup",onOutsideClick:e.onOutsideClick,lang:r,footer:a.createElement(a.Fragment,null,a.createElement(Te,{link:e.link,active:Boolean(e.visible),counter:s&&Object(P.b)(s,{"-name":"copylink"}),logNode:s&&Object(P.a)(s)}),e.isDiskShareEnabled&&a.createElement("hr",{className:"MMShare-Spacer"}),e.isDiskShareEnabled&&e.originalUrl&&a.createElement(be,{tld:e.tld,fileUrl:e.originalUrl,loggedIn:Boolean(e.loggedIn),dirName:e.diskShareDirectoryName,fileMeta:i,requestAuthorization:e.requestAuthorization,popupScope:e.popupScope,counter:s&&Object(P.b)(s,{"-name":"disk"})}))})}),Ae=n(41),Be=n(24),Ue=n(20),Fe=n(123),He=(n(610),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),qe=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},ze=c()(Fe),We=function(e){function t(t){var n=e.call(this,t)||this;return n.popupTarget=a.createRef(),n.state={popupVisible:!1},n.toggleShare=n.toggleShare.bind(n),n.onOutsideSharePopupClick=n.onOutsideSharePopupClick.bind(n),n}return He(t,e),t.prototype.toggleShare=function(){this.setState({popupVisible:!this.state.popupVisible})},t.prototype.closeShare=function(){this.setState({popupVisible:!1})},t.prototype.componentDidUpdate=function(e){e.link!==this.props.link&&this.closeShare()},t.prototype.render=function(){var e=this.props,t=e.link,n=e.shareClick;return a.createElement(a.Fragment,null,a.createElement(Ae.b,{className:Object(Ue.a)("Share"),text:ze("Отправить",{context:"Кнопка в просмотрщике картинки, позволяющая поделиться ссылкой на текущую картинку, то есть отправить информацию о ней другим пользователям"}),icon:a.createElement(l.a,{type:"side-left"}),onClick:this.toggleShare,logNode:{name:"share-button"},forwardRef:this.popupTarget}),a.createElement(Le,{link:t,tld:this.props.tld,originalUrl:this.props.originalUrl,loggedIn:this.props.loggedIn,snippetUrl:this.props.snippetUrl,anchor:this.popupTarget,logNode:{events:{onShare:Object(u.logTech)("share",function(e,r){var o=qe(r,1)[0];return Object(P.b)(n,{"-name":o},void 0,{href:t})})}},popupScope:this.props.popupScope,zIndexGroupLevel:20,zIndex:20,secondaryOffset:this.props.view===Be.b.twoLines?-50:void 0,visible:this.state.popupVisible,onOutsideClick:this.onOutsideSharePopupClick,isDiskShareEnabled:this.props.isDiskShareEnabled,diskShareDirectoryName:this.props.diskShareDirectoryName,requestAuthorization:this.props.requestAuthorization}))},t.prototype.onOutsideSharePopupClick=function(e){this.popupTarget.current&&this.popupTarget.current.contains(e.target)||this.closeShare()},t}(a.Component)},258:function(e,t,n){"use strict";n.d(t,"a",function(){return R});var r,o=n(0),i=n(7),a=n.n(i),s=n(33),c=n(41),u=n(135),l=n(5),d=(n(607),n(123)),p=n(1),f=n(6),h=n(433),m=n(697),v=n(434),b=n(248),g=n(518),y=n(525),O=n(20),w=(n(608),r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),j=function(){return(j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},C=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},E=Object(p.compose)(h.a,m.a,y.a,v.a,g.a,function(e){return function(t){var n=t.contentRef,r=t.targetRef,i=C(t,["contentRef","targetRef"]);return o.useEffect(function(){n&&"object"===typeof n&&n.current&&"function"===typeof r&&r(n.current)},[n,r]),o.createElement(e,j({},i))}})(b.a),S=Object(O.a)("ImageSizesPopup"),_=Object(O.a)("ImageSizesList"),k=function(e){function t(t){var n=e.call(this,t)||this;return n.popupTarget=o.createRef(),n.popupContentRef=o.createRef(),n.state={popupVisible:!1},n.togglePopup=n.togglePopup.bind(n),n.onOutsideSizesPopupClick=n.onOutsideSizesPopupClick.bind(n),n}return w(t,e),t.prototype.openPopup=function(){this.setState({popupVisible:!0})},t.prototype.closePopup=function(){this.setState({popupVisible:!1})},t.prototype.componentDidUpdate=function(e){e.link!==this.props.link&&this.closePopup()},t.prototype.render=function(){return o.createElement(o.Fragment,null,o.createElement(c.b,{className:Object(O.a)("ImageSizes",{theme:this.props.theme||"primary"}),text:this.props.dups[0].text,rightIcon:o.createElement(s.a,{type:"more-sizes"}),onClick:this.togglePopup,forwardRef:this.popupTarget,logNode:{name:"other"}}),o.createElement(E,{className:S,hasTail:!0,secondaryOffset:15,theme:"normal",view:"default",target:"anchor",onOutsideClick:this.onOutsideSizesPopupClick,anchor:this.popupTarget,visible:this.state.popupVisible,zIndexGroupLevel:20,scope:this.props.popupScope,innerRef:this.popupContentRef,contentRef:this.popupContentRef,ignoreRefs:[this.popupTarget]},o.createElement("ul",{className:_},this.renderDups())))},t.prototype.togglePopup=function(){this.setState({popupVisible:!this.state.popupVisible})},t.prototype.onOutsideSizesPopupClick=function(e){this.popupTarget.current&&this.popupTarget.current.contains(e.target)||this.closePopup()},t.prototype.renderDups=function(){var e=this,t=this.props.dups;if(t){var n=this.props.otherSizeCounter?void 0:{events:{}};return t.slice(1).map(function(t,r){var i=t.url,a=t.text;return o.createElement(P,{key:i,url:i,clickCounter:e.props.otherSizeCounter,logNode:j({name:"size-"+r,attrs:e.props.otherSizeLogNode&&e.props.otherSizeLogNode.attrs},n),onSizeClick:e.props.onSizeClick,idx:r},a)})}},t}(o.Component),P=Object(l.withBaobab)({name:"ImageSizesListItem",events:{onClick:Object(l.logClick)(function(e){var t=e.props,n=t.idx,r=t.clickCounter,o=t.url;return r?Object(f.b)(r,{"-p":n+1},{path:Object(f.d)(r)+"/p"+(n+1)},{href:o}):void 0})}})(function(e){var t=e.onClick,n=e.onSizeClick,r=e.url,i=o.useCallback(function(e){n?n(e,r,t):t&&t(e)},[n,t,r]);return o.createElement("li",null,o.createElement("a",{className:Object(O.a)("ImageSizesListItem"),href:e.url,target:"_blank",rel:"noopener",onClick:i,onContextMenuCapture:i},e.children))}),I=Object(l.withBaobab)({name:Object(O.a)("ImageSizes")})(k),x=n(24),M=a()(d),N=Object(u.a)(c.b),T=Object(O.a)("OpenImageSizes"),R=Object(l.withBaobab)({name:"open-image"})(function(e){var t=e.url,n=e.dups,r=e.link,i=e.downloadCounter,a=e.downloadLogNode,u=e.otherSizeCounter,d=e.otherSizeLogNode,p=e.popupScope,f=e.view,h=e.isOpenImageUnauthPopupEnabled,m=e.onOpenButtonClick,v=e.onSizeClick,b=e.theme,g=void 0===b?"primary":b,y=f===x.b.twoLines&&n.length>1,w=o.useMemo(function(){return Object(l.logClick)(i)},[i]),j=o.useCallback(function(e){m&&m(e,t,w)},[w,m,t]),C=o.useMemo(function(){return h?{name:"button-with-unauthpopup"}:{name:"button",attrs:a&&a.attrs,events:{onClick:w,onContextMenuCapture:w}}},[h,w,a]);return o.createElement("div",{className:T},o.createElement(N,{className:Object(O.a)("OpenImage",{isOtherSizesEnabled:y,theme:g}),text:M("Открыть",{context:'Кнопка "Открыть" картинку'}),rightText:n&&n[0]&&n[0].text,url:h?"#":t,icon:o.createElement(s.a,{type:"download"}),type:c.a.link,logNode:C,onClick:h?j:void 0}),y&&o.createElement(I,{logNode:h?void 0:{name:"sizes"},dups:n,link:r,otherSizeCounter:u,otherSizeLogNode:d,popupScope:p,onSizeClick:v,theme:g}))})},259:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(0),o=n(1),i=n(433),a=n(697),s=n(434),c=n(248),u=n(525),l=n(4),d=Object(l.cn)("MMViewerButtonTooltip"),p=(n(545),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),f=Object(o.compose)(i.a,a.a,s.a,u.a)(c.a),h=function(e){var t=e.hasTail,n=void 0!==t&&t,o=e.anchor,i=e.mainOffset,a=void 0===i?0:i,s=e.zIndexGroupLevel,c=void 0===s?20:s,u=e.text,l=e.children,h=p(r.useState(e.initialVisibility),2),m=h[0],v=h[1],b=r.useCallback(function(){return v(!0)},[]),g=r.useCallback(function(){return v(!1)},[]);return r.createElement(r.Fragment,null,l(b,g),u?r.createElement(f,{theme:"normal",view:"default",target:"anchor",className:d(),directions:e.directions,keepMounted:!1,hasTail:n,visible:m,anchor:o,mainOffset:a,zIndexGroupLevel:c},r.createElement("div",{className:d("Text")},e.text)):null)}},26:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(205);t.appendQueryString=o.appendQueryString,t.stringifyUrlParams=o.stringifyUrlParams;var i,a=n(206),s="application/json; charset=utf-8",c={Accept:s},u=function(){};function l(e,t,n,o){void 0===t&&(t={});var i=r({},"json"===t.format?c:{},t.headers),a=t.body,u="";return Object.keys(i).some(function(e){return"content-type"===e.toLowerCase()})?u=String(a||""):(i["content-type"]=s,"string"!==typeof a&&(u=JSON.stringify(a))),d(e,r({},t,{method:o,headers:i}),n,u)}function d(e,t,n,r){var s=n.successCallback,c=void 0===s?u:s,l=n.failureCallback,d=void 0===l?u:l,p=t.headers,f=void 0===p?{}:p,h=t.queryParams,m=void 0===h?{}:h,v=t.timeout,b=void 0===v?3e4:v,g=t.credentials,y=void 0===g?"include":g,O=t.method,w=void 0===O?"GET":O,j=function(e,n){var r=e.response;if("json"===t.format)try{r=JSON.parse(r)}catch(t){return void d(i.JSON_PARSE_ERROR,e)}n?d(n,e,r):c(r,e)},C=new XMLHttpRequest;return C.open(w,o.appendQueryString(e,m)),C.withCredentials=a.shouldSendCredentials(e,y),C.timeout=b,Object.keys(f).forEach(function(e){return C.setRequestHeader(e,f[e])}),C.onload=function(){C.status>=200&&C.status<300?j(C):j(C,i.ERROR_STATUS_CODE)},C.onerror=function(){d(i.REQUEST_FAILED,C)},C.ontimeout=function(){d(i.TIMEOUT,C)},C.send(r),C}!function(e){e.TIMEOUT="TIMEOUT",e.REQUEST_FAILED="REQUEST_FAILED",e.JSON_PARSE_ERROR="JSON_PARSE_ERROR",e.ERROR_STATUS_CODE="ERROR_STATUS_CODE"}(i=t.AjaxError||(t.AjaxError={})),t.get=function(e,t,n){return void 0===t&&(t={}),d(e,r({},t,{method:"GET"}),n)},t.post=function(e,t,n){return void 0===t&&(t={}),l(e,t,n,"POST")},t.put=function(e,t,n){return void 0===t&&(t={}),l(e,t,n,"PUT")},t.del=function(e,t,n){return void 0===t&&(t={}),l(e,t,n,"DELETE")},t.sendRequest=d},260:function(e,t,n){},261:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=function(e){return function(t){return function(n){var i=o(o({},e),n);return r.createElement(t,o({},i))}}}},265:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(2),o=n(0),i=n.n(o),a=n(64);function s(e){return function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={hovered:e.props.hovered},e.onMouseEnter=function(t){e.setState({hovered:!0}),void 0!==e.props.onMouseEnter&&e.props.onMouseEnter(t)},e.onMouseLeave=function(t){e.setState({hovered:!1}),void 0!==e.props.onMouseLeave&&e.props.onMouseLeave(t)},e}return Object(r.__extends)(n,t),n.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState({hovered:!e.disabled&&(this.state.hovered||e.hovered)})},n.prototype.render=function(){var t=this.state.hovered,n=this.props.disabled,o=e;return i.a.createElement(o,Object(r.__assign)({},this.props,{hovered:n?void 0:t,onMouseEnter:n?void 0:this.onMouseEnter,onMouseLeave:n?void 0:this.onMouseLeave}))},n.displayName="WithControl@desktop("+Object(a.a)(e)+")",n}(o.PureComponent)}},266:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(3),o=n(23),i=n(235),a=n(236),s=n(237),c=n(238),u=new r.Registry({id:Object(o.b)()});u.set("Control",i.a).set("Box",a.a).set("Icon",s.a).set("Hint",c.a)},267:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(429);t.default=function(e,t){var n=o.useFirstMountState();r.useEffect(function(){if(!n)return e()},t)}},27:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("MMMarketSnippet")},28:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return c});var r=n(2),o=n(0),i=n.n(o),a=n(4),s=(n(106),Object(a.cn)("Icon")),c=function(e){var t=e.direction,n=e.size,o=e.url,a=e.style,c=void 0===a?{}:a,u=e.children,l=e.title,d=e.onClick,p=(e.type,e.glyph,Object(r.__rest)(e,["direction","size","url","style","children","title","onClick","type","glyph"])),f=s({direction:t,size:n},[p.className]);return void 0!==o&&(c.backgroundImage="url('"+o+"')"),i.a.createElement("span",Object(r.__assign)({},p,{"aria-hidden":!0,className:f,style:c,title:l,onClick:d}),u)};c.displayName=s()},282:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e}},288:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(23),i=(n(383),Object(r.withBemMod)(Object(o.b)(),{view:"default"}))},292:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(162),i=n(5),a=n(85),s=(n(573),r.memo(Object(i.withBaobab)({name:"item",events:{onClick:Object(i.logClick)()}})(function(e){var t=e.selected,n=e.onClick,i=e.clickOverHoverTime,s=e.image,c=e.forwardRef,u=e.suffix,l=e.idx,d=e.width,p=e.disableSelection,f=r.useCallback(function(e,t){n&&n(l,t)},[n,l]),h=r.useMemo(function(){return Object(a.a)("Item",{selected:t&&!p})},[t,p]),m=r.useRef(),v=r.useCallback(function(){i&&(m.current=window.setTimeout(function(){return f(null,!0)},i))},[i,f]),b=r.useCallback(function(){m.current&&window.clearTimeout(m.current)},[]);return Object(o.a)(function(){window.clearTimeout(m.current)}),r.createElement("div",{style:{width:d},className:h,onClick:f,onMouseEnter:i?v:void 0,onMouseLeave:i?b:void 0,ref:c},r.createElement("div",{className:Object(a.a)("ItemImageOverlay")},s),u&&r.createElement("div",{className:Object(a.a)("ItemSuffix")},u))})))},295:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(9),i=(n(357),Object(r.withBemMod)(Object(o.b)(),{theme:"clear"}))},296:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(0),o=n(282),i=n(79),a=n(81),s=n(7),c=n.n(s),u=n(11),l=(n(454),n(87)),d=Object(o.a)(i.a),p=c()(l),f=Object(u.a)("Greenurl"),h=Object(u.a)("Favicon"),m=function(e){var t=e.path,n=t||e.domain,o=t&&e.pathUrl?e.pathUrl:e.url,i=r.useMemo(function(){return{name:"path",attrs:e.logNode&&e.logNode.attrs}},[e.logNode]),s="title"===e.labelHighlight;return r.createElement("div",{className:f},r.createElement(d,{className:Object(u.a)("Path",{wide:s}),theme:"outer",counter:e.counter,logNode:i,url:o},e.favicon&&r.createElement(a.a,{favicon:e.favicon,className:h}),n),!s&&r.createElement("span",{className:Object(u.a)("AdvLabel",{bright:"color"===e.labelHighlight})},p("Реклама",{context:"Лейбл помечающий рекламное объявление"})))}},297:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r,o=n(0),i=n(4),a=n(327),s=n(86),c=(n(459),r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=Object(i.cn)("MMDirectSnippet","Disclaimer"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={fullText:"",shortText:"",collapsed:!1,collapsable:!1},t.toggleCollapse=function(){t.setState({collapsed:!t.state.collapsed})},t}return c(t,e),t.prototype.render=function(){var e=this.state,t=e.shortText,n=e.collapsed,r=e.collapsable,i=this.props.text,s=u({collapsable:r,collapsed:n});return o.createElement("div",{className:s,onClick:r?this.toggleCollapse:void 0},o.createElement(a.a,{start:"<b>",end:"</b>"},n?t:i))},t.getDerivedStateFromProps=function(e,n){var r=e.text;if(n.fullText!==r){var o=t.getShortText(Object(s.decodeHTMLEntities)(r)),i=o!==r;return{shortText:o,fullText:r,collapsable:i,collapsed:i}}return null},t.getShortText=function(e){return e.length>t.WARNING_MIN_LENGTH?e.substr(0,t.WARNING_MIN_LENGTH)+"...":e},t.WARNING_MIN_LENGTH=46,t}(o.Component)},298:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(0),o=n(230),i=n(79),a=n(327),s=n(5),c=n(7),u=n.n(c),l=n(11),d=(n(460),n(87)),p=Object(o.a)(i.a),f=u()(d),h=Object(l.a)("TitleLabel"),m=r.memo(function(e){var t=r.useMemo(function(){return{name:"title",attrs:e.logNode&&e.logNode.attrs,events:{onClick:Object(s.logClick)(e.counter)}}},[e.counter,e.logNode]),n=e.bold;return r.createElement(r.Fragment,null,e.labelHighlight&&r.createElement("span",{className:h},f("Реклама",{context:"Лейбл помечающий рекламное объявление"})),r.createElement(p,{className:Object(l.a)("Title",{bold:n}),theme:"normal",url:e.url,logNode:t},r.createElement(a.a,{start:"<hl>",end:"</hl>"},e.title)))})},3:function(e,t,n){"use strict";e.exports=n(71)},30:function(e,t,n){"use strict";n.d(t,"b",function(){return m}),n.d(t,"a",function(){return v});var r=n(2),o=n(0),i=n.n(o),a=n(13),s=n(3),c=n(4),u=n(10),l=n(19),d=(n(260),n(387)),p=n(421),f=n(388),h=function(e){var t=e.visible,n=e.onClose,a=e.children,s=e.essentialRefs,c=Object(f.a)("layer"),u=Object(p.a)(t),l=Object(p.a)(n),d=Object(o.useCallback)(function(e){var t=e.key;if("Escape"===t||"Esc"===t){var n=Object(r.__read)(h.stack[h.stack.length-1]||[],2),o=n[0],i=n[1];o===c&&void 0!==i&&i(e,"esc")}},[]),m=Object(o.useCallback)(function(e){var t=Object(r.__read)(h.stack[h.stack.length-1]||[],3),n=t[0],o=t[1],i=t[2];n===c&&void 0!==o&&void 0!==i&&(i.filter(function(e){return null!==e.current}).some(function(t){return t.current.contains(e.target)})||o(e,"click"))},[]);return Object(o.useEffect)(function(){(n!==l&&void 0!==n&&h.stack.forEach(function(e,t){Object(r.__read)(e,2)[1]===l&&(h.stack[t][1]=n)}),t!==u&&void 0!==n)&&(t?(h.stack.push([c,n,s]),document.addEventListener("keyup",d),document.addEventListener("mousedown",m)):(Object(r.__read)(h.stack[h.stack.length-1]||[],1)[0]===c&&requestAnimationFrame(function(){return h.stack.pop()}),document.removeEventListener("keyup",d),document.removeEventListener("mousedown",m)))},[u,t,n,l]),Object(o.useEffect)(function(){return function(){requestAnimationFrame(function(){return h.stack.pop()}),document.removeEventListener("keyup",d),document.removeEventListener("mousedown",m)}},[]),i.a.createElement(i.a.Fragment,null,a)};h.stack=[],h.displayName="LayerManager";var m=Object(c.cn)("Popup2"),v=function(e){var t=e.addonAfter,n=e.addonBefore,c=e.children,p=e.className,f=e.direction,v=e.forceRender,b=e.hasTail,g=e.innerRef,y=e.keepMounted,O=void 0===y||y,w=e.position,j=e.scope,C=void 0===j?{current:Object(u.a)()?document.body:null}:j,E=e.style,S=e.tailPosition,_=e.tailRef,k=e.tailSize,P=e.visible,I=e.zIndex,x=e.unstable_onRenderTail,M=e.onClose,N=e.unstable_essentialRefs,T=void 0===N?[]:N,R=e.unstable_hostRef,D=e.onOutsideClick,L=e.onEscapeKeyDown,A=e.onClick,B=(e.theme,e.view,e.nonvisual,Object(r.__rest)(e,["addonAfter","addonBefore","children","className","direction","forceRender","hasTail","innerRef","keepMounted","position","scope","style","tailPosition","tailRef","tailSize","visible","zIndex","unstable_onRenderTail","onClose","unstable_essentialRefs","unstable_hostRef","onOutsideClick","onEscapeKeyDown","onClick","theme","view","nonvisual"])),U=Object(r.__read)(Object(o.useState)(!0),2),F=U[0],H=U[1],q=Object(o.useRef)(null);Object(d.a)(function(){F&&P&&H(!1)},[]),Object(o.useEffect)(function(){console.assert(void 0===D||void 0===L,'Использование функции "withOutsideClick" является устаревшим API. Для закрытия используйте свойство "onClose" без использования "withOutsideClick".'),F&&(v||P)&&H(!1)},[]);var z=Object(o.useCallback)(function(e,t){"esc"===t?void 0!==L&&L(e):void 0!==D&&D(e),void 0!==M&&M(e,t)},[L,D,M]),W=Object(s.useComponentRegistry)(m()).Tail,G=R||q;return!P&&!O||!Object(u.a)()||null===C.current||F?null:Object(a.createPortal)(i.a.createElement(h,{visible:P,onClose:z,essentialRefs:Object(r.__spread)([G],T)},i.a.createElement("div",Object(r.__assign)({},B,{className:m({visible:P,direction:f},[p]),ref:Object(l.a)(q,g),style:Object(r.__assign)(Object(r.__assign)(Object(r.__assign)({},E),w),{zIndex:I}),onClick:A}),n,"function"===typeof c?c({tailRef:_}):c,t,x&&x(i.a.createElement(W,{innerRef:_,style:Object(r.__assign)(Object(r.__assign)({},S),{height:k,width:k})})),!x&&b&&i.a.createElement(W,{innerRef:_,style:Object(r.__assign)(Object(r.__assign)({},S),{height:k,width:k})}))),C.current)};v.displayName=m()},305:function(e,t,n){"use strict";n(391),n(392),n(393),n(394),n(395),n(396)},306:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(9),i=(n(195),Object(r.withBemMod)(Object(o.b)(),{size:"m"}))},309:function(e,t,n){"use strict";function r(e,t){for(var n=t.rowWidth,r=[],a=0,s={width:0,items:[]},c={width:0,items:[]},u=0,l=t.increaseVerticalHeight,d=t.increaseVerticalImagesThreshold,p=t.rowsNumber,f=0,h=e.length;f<h;f++){var m=e[f];if(void 0!==p&&a===p)break;var v=!1;if(s.items.push(m),s.width+=m.width+t.marginRight,l&&d){var b={};b.isVertical=m.isVertical=m.height>m.width,b.width=m.width*l,b.height=m.height*l,c.items.push(b),c.width+=b.width+t.marginRight,b.isVertical&&(u+=b.width),o(c,n)&&u>d*c.width&&(s.isVertical=!0,s.width=c.width,s.items.forEach(function(e,t){var n=c.items[t],r=n.width,o=n.height;e.width=r,e.height=o}),v=!0)}(v||o(s,n,0))&&(Array.prototype.push.apply(r,i(s,t).items),r[r.length-1].isLast=!0,s={width:0,items:[]},c={width:0,items:[]},u=0,a++)}return r}function o(e,t,n){var r=t*("number"===typeof n&&n>=0?n:.15);return 1===e.items.length?e.items[0].width-t>=r:e.width+r>=t}function i(e,t){var n=t.increaseVerticalHeight,r=e.items,o=r.length,i=t.baseRowHeight;e.isVertical&&n&&(i*=n);for(var a=o*t.marginRight,s=e.width-a,c=(t.rowWidth-a)/s,u=Math.round(i*c),l=0,d=0;d<o;d++){var p=r[d];p.newWidth=Math.round(p.width*c),p.newHeight=Math.ceil(p.height*c),p.rowHeight=u,l+=p.newWidth}return function(e,t,n){for(var r=t,o=0;r<n;o++)(i=e.items[o])&&i.newWidth&&(i.newWidth++,r++);for(o=0;r>n;o++){var i;(i=e.items[o])&&i.newWidth&&(i.newWidth--,r--)}}(e,l+=a,t.rowWidth),e}n.d(t,"a",function(){return r})},31:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return l}),n.d(t,"e",function(){return d});var r=n(0),o=n(207),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=r.createContext({}),s=a.Provider,c=a.Consumer;function u(e){var t=function(t){return r.createElement(c,null,function(n){return r.createElement(e,i({},t,{counters:n}))})};return t.displayName=Object(o.getDisplayName)(e)+":withImageCounters",t}var l=function(){return r.useContext(a)},d=function(e){return function(t){var n=function(n){var o=l(),a=r.useMemo(function(){return"string"===typeof e?o[e]:e(o)},[e,o]);return r.createElement(t,i({},n,{counters:a}))};return n.displayName=Object(o.getDisplayName)(t)+":withImageCounters",n}}},311:function(e,t,n){n.r(t);var r=n(2284);n.d(t,"ru",function(){return r.a})},312:function(e,t,n){"use strict";n.d(t,"PriceCurrency",function(){return f});var r=n(0),o=n.n(r),i=n(7),a=n.n(i),s=n(677),c=n(410),u=(n(399),a()(s)),l={RUR:"RUB",BYR:"BYN"},d={RUB:"₽",EUR:"€",USD:"$",UAH:"₴",KZT:"₸"},p={RUB:u("руб."),EUR:u("евро"),USD:u("долл."),UAH:u("грн."),KZT:u("тнг."),BYN:u("б.p."),TRY:"TL"};var f=function(e){var t=function(e){var t=e.currency,n=e.showAbbr,r=e.rurSymbolFont,i=e.key,a=l[t]||t;return r&&"RUB"===a&&!n?o.a.createElement(c.a,{key:i}):!n&&d[a]||p[a]||a}(e);return"string"===typeof t?o.a.createElement(o.a.Fragment,null,t):t}},313:function(e,t,n){n.r(t);var r=n(2411);n.d(t,"ru",function(){return r.a})},32:function(e,t,n){"use strict";n.d(t,"a",function(){return b}),n.d(t,"b",function(){return w});var r,o,i=n(0),a=n.n(i),s=n(13),c=n.n(s),u=n(34),l=n.n(u),d=n(15),p=n(17),f=(n(48),n(8)),h=n(14);function m(e){var t=("undefined"!==typeof window&&(r=window.innerHeight,o=window.innerWidth),{height:r,width:o}),n=e.getBoundingClientRect();return 0!==n.width&&0!==n.height&&(!(n.bottom<=0||n.right<=0)&&(n.top<t.height&&n.left<t.width))}n(66),n(67);var v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object(d.b)({theme:p.theme});var b,g="Root",y=Object(d.a)(p.theme),O=g+"_inited";function w(e,t){void 0===t&&(t={});var n={},r=t.hydratePriority,o=void 0===r?b.force:r;return function(t){var r;if(h.a){var i=function(e,t,n){return function(r){for(var o=r?r.getElementsByClassName(g):document.getElementsByClassName(g),i=new RegExp("^"+t+"-"),a=0;a<o.length;a+=1){var s=o[a],c=s.id;c&&i.test(c)&&j(e,s,n)}}}(t,e,n);Object(f.a)()&&(Object(f.a)().on("react-adapter:unmount",function(e){return function(e,t){Object.keys(e).forEach(function(n){var r=e[n];t&&!t.contains(r)||(c.a.unmountComponentAtNode(r),r.classList.remove(O),delete e[n])})}(n,e)}),Object(f.a)().on("react-adapter:mount",function(e){return i(e)}));var s=(null===(r=window.Ya)||void 0===r?void 0:r.SerpContext)||{};(s&&s.expFlags||{}).react_init_on_page_load||s.reactInitOnPageLoad?"complete"===document.readyState||"interactive"===document.readyState?i():document.addEventListener("DOMContentLoaded",function(){return i()}):window.BEM&&BEM.DOM.ready(function(){return i()})}return function(n){return a.a.createElement("div",{className:g+" "+y,id:e+"-"+l()(),"data-state":JSON.stringify(n),"data-hydrate-priority":o},a.a.createElement(t,v({},n)))}}}function j(e,t,n){var r=t.getAttribute("data-hydrate-priority"),o=function(){return function(e,t,n){var r=t.id;if(n[r])return;var o=(i=t,JSON.parse(i.getAttribute("data-state")||"{}"));var i;n[r]=t,Object(d.b)({theme:p.theme,root:t}),c.a.hydrate(a.a.createElement(e,v({},o)),t,function(){t.classList.add(O)})}(e,t,n)};if(r!==b.force)if(r!==b.checkVisible){if(r!==b.deferred)return o();window.requestAnimationFrame(o)}else{m(t)?o():window.requestAnimationFrame(o)}else o()}!function(e){e.force="force",e.checkVisible="check-visible",e.deferred="deferred"}(b||(b={}))},321:function(e,t,n){},323:function(e,t,n){"use strict";n.d(t,"b",function(){return hr}),n.d(t,"c",function(){return br}),n.d(t,"a",function(){return gr});var r,o=n(0),i=n.n(o),a=n(1),s=n(5),c=n(883),u=n(25),l=n(26),d=n(89),p=n(164),f=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},m="476060",v=function(e){return"https://yandex."+e+"/search/adonly/images"},b=function(e){function t(t){var n=this,r=h({},t);return delete r.requestFunction,(n=e.call(this,r)||this).params.url=r.url||v(n.params.tld),n.params.pageId=r.pageId||m,n}return f(t,e),t.prototype.getUrl=function(e){var t=this.params,n=t.pageReqid;return Object(l.appendQueryString)(t.url||v(this.params.tld),{reqid:n,bpage:t.pageId,lr:t.region,"target-ref":this.targetRef,"title-length-limit":1e4,p:0,text:Object(d.f)(e[0].data,this.params)})},t.prototype.extractResponseData=function(e){var n;try{n=JSON.parse(e)}catch(e){return[[]]}return[t.convertDirectData(n.data,this.params)]},t}(p.a),g=n(21),y=n(47),O=n(14);O.a&&!window.fetch&&(window.fetch=function(e,t){var n=void 0===t?{}:t,r=n.method,o=n.credentials,i=n.body,a=n.headers;return new Promise(function(t){var n=new XMLHttpRequest;"include"!==o&&"same-origin"!==o||(n.withCredentials=!0),n.onload=function(){t({status:n.status,ok:n.status>=200&&n.status<300,headers:{get:function(e){return n.getResponseHeader(e)}},json:function(){return Promise.resolve().then(function(){return JSON.parse(n.responseText)})}})},n.open(r||"GET",e,!0),a&&Object.keys(a).forEach(function(e){a[e]&&n.setRequestHeader(e,String(a[e]))}),i?n.send(i):n.send()})});var w=n(8),j=n(16),C=n(31),E=n(18),S=n(6),_=n(4),k=n(252),P=n.n(k),I=n(3),x=n(84),M=n(15),N=n(324),T=(n(553),n(113)),R=function(){return(R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function D(e){return o.createElement(T.b,R({size:T.a.m},e))}var L=n(7),A=n.n(L),B=n(327),U=Object(_.cn)("FullscreenControls"),F=n(669),H=(n(547),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),q=P.a,z=A()(F),W=function(e){function t(t){var n=e.call(this,t)||this;return n.hideDelayTimeout=2e3,n.slideshowDelayInterval=4e3,n.isComponentMounted=!1,n.onActionClick=function(e){n.slideshowToggle(),e.stopPropagation()},n.onCloseClick=function(e){n.exitFullscreen(),e.stopPropagation()},n.onTitleClick=function(e){n.props.onTitleClick&&n.props.onTitleClick(),e.stopPropagation()},n.onDomainClick=function(e){n.props.onDomainClick&&n.props.onDomainClick(),e.stopPropagation()},n.state={hidden:!1,isSlideshowPlay:!1,isFullscreen:Boolean(q&&q.isFullscreen)},n.showInfoPanel=n.showInfoPanel.bind(n),n.showInfoPanelThrottle=Object(x.throttle)(n.showInfoPanel.bind(n),n.hideDelayTimeout/2,{delayedLastCall:!0}),n.hideInfoPanel=n.hideInfoPanel.bind(n),n.onFullscreenChange=n.onFullscreenChange.bind(n),n.onTitleClick=n.onTitleClick.bind(n),n.onDomainClick=n.onDomainClick.bind(n),n.goNext=n.goNext.bind(n),n}return H(t,e),t.prototype.componentDidUpdate=function(){this.state.isSlideshowPlay&&this.restartSlideshowTimer()},t.prototype.componentDidMount=function(){this.showInfoPanel(),this.isComponentMounted=!0,q&&q.on("change",this.onFullscreenChange)},t.prototype.componentWillUnmount=function(){this.exitFullscreen(),this.isComponentMounted=!1,window.removeEventListener("mousemove",this.showInfoPanelThrottle),q&&q.off("change",this.onFullscreenChange)},t.prototype.render=function(){var e=this.props,t=e.title,n=e.domain,r=e.url,i=e.nextItemHandler,a=e.prevItemHandler;return this.state.isFullscreen?o.createElement("div",{className:U({hidden:this.state.hidden})},a&&o.createElement("div",{className:U("PrevArrow"),onClick:a}),i&&o.createElement("div",{className:U("NextArrow"),onClick:i}),o.createElement("div",{className:U("Main")},i&&o.createElement("button",{className:U("Action",{stop:this.state.isSlideshowPlay}),onClick:this.onActionClick,"aria-label":this.state.isSlideshowPlay?z("Остановить",{context:"Кнопка остановки режима слайдшоу картинок"}):z("Запустить",{context:"Кнопка запуска режима слайдшоу картинок"})}),o.createElement("div",{className:U("Info")},o.createElement("a",{className:U("Title"),href:r,rel:"noopener",target:"_blank",onClick:this.onTitleClick},o.createElement(B.a,null,t)),o.createElement("a",{className:U("Domain"),href:r,rel:"noopener",target:"_blank",onClick:this.onDomainClick},n)),o.createElement("button",{className:U("Close"),onClick:this.onCloseClick,"aria-label":z("Закрыть",{context:"Кнопка выключения режима полноэкранного просмотра картинок"})}))):""},t.prototype.onFullscreenChange=function(){q&&(Boolean(q.isFullscreen)?this.enterFullscreen():this.exitFullscreen())},t.prototype.enterFullscreen=function(){this.setState({isFullscreen:!0}),window.addEventListener("mousemove",this.showInfoPanelThrottle)},t.prototype.exitFullscreen=function(){if(q){var e=this.state.isFullscreen;this.slideshowStop(),e&&(this.setState({isFullscreen:!1}),window.removeEventListener("mousemove",this.showInfoPanelThrottle),q.isFullscreen&&q.exit(),this.props.onExit&&this.props.onExit())}},t.prototype.showInfoPanel=function(){this.toggleInfoPanel(!1)},t.prototype.hideInfoPanel=function(){this.toggleInfoPanel(!0)},t.prototype.toggleInfoPanel=function(e){e||("undefined"!==typeof this.hideTimeoutHandle&&window.clearTimeout(this.hideTimeoutHandle),this.hideTimeoutHandle=window.setTimeout(this.hideInfoPanel,this.hideDelayTimeout)),this.isComponentMounted&&this.setState({hidden:e})},t.prototype.slideshowStop=function(){this.state.isSlideshowPlay&&(this.setState({isSlideshowPlay:!1}),this.stopSlideshowTimer(),this.props.onStopAutoplay&&this.props.onStopAutoplay())},t.prototype.slideshowToggle=function(){this.props.nextItemHandler&&(this.state.isSlideshowPlay?this.slideshowStop():(this.setState({isSlideshowPlay:!0}),this.props.onStartAutoplay&&this.props.onStartAutoplay(),this.restartSlideshowTimer()))},t.prototype.restartSlideshowTimer=function(){this.stopSlideshowTimer(),this.slideshowTimeoutHandle=window.setTimeout(this.goNext,this.slideshowDelayInterval)},t.prototype.goNext=function(){var e=this.props,t=e.nextItemHandler,n=e.isLoaded;t&&(this.state.isSlideshowPlay?(n&&t(),this.restartSlideshowTimer()):this.stopSlideshowTimer())},t.prototype.stopSlideshowTimer=function(){this.slideshowTimeoutHandle&&(window.clearTimeout(this.slideshowTimeoutHandle),this.slideshowTimeoutHandle=void 0)},t.stopPropagation=function(e){e.stopPropagation()},t}(o.PureComponent);n(552);var G=Object(_.cn)("CropObjectsItem"),V=function(e){var t=e.className,n=e.style,r=e.onClick;return o.createElement("div",{className:G(null,[t]),style:n,onClick:r},o.createElement("div",{className:G("Point")}))},Y=(n(551),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),K=Object(_.cn)("CropObjects"),X=function(e){function t(t){var n=e.call(this,t)||this;return n.updateWrapRef=function(e){n.setState({wrapElement:e})},n.state={wrapElement:null},n}return Y(t,e),t.prototype.componentDidMount=function(){this.loadImageCropObjects()},t.prototype.render=function(){var e,t=this.props,n=t.className,r=t.activeCropObject,i=t.cropObjects,a=t.objectsClassName,s=t.onObjectClick,c=this.state.wrapElement;if(!i||!i.data.length)return null;if(c){var u=100/c.offsetWidth,l=100/c.offsetHeight;e=i&&i.data.map(function(e,t){var n=K("Item",{active:r===e},[a]),i=e.position.x+e.size.width/2-u+"%",c=e.position.y+e.size.height/2-l+"%";return o.createElement(V,{key:t,className:n,style:{top:c,left:i},onClick:function(){return s(e)}})})}return o.createElement("div",{className:n,ref:this.updateWrapRef},e)},t.prototype.loadImageCropObjects=function(){var e=this.props,t=e.fetchCropObjects,n=e.imageHref,r=e.imageId;r&&n&&t(r,n)},t}(o.PureComponent),Q=Object(u.d)(function(e,t,n){return{cropObjects:n.imageId&&e.cropObjects[n.imageId]||void 0,fetchCropObjects:function(e,t){return function(n,r){return Object(g.i)(e,t,n,r)}}(t,e)}})(X),J=(n(550),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Z=Object(_.cn)("trimmer"),$=function(e){function t(t){var n=e.call(this,t)||this;return n.startPointerXMove=NaN,n.startPointerYMove=NaN,n.startPositionXMove=NaN,n.startPositionYMove=NaN,n.startSizeWidthMove=NaN,n.startSizeHeightMove=NaN,n.pointNameMove="",n.actionName="",n.trimmerRef=o.createRef(),n.parentWidth=0,n.parentHeight=0,n.positionX=0,n.positionY=0,n.initWidthInPercent=70,n.initHeighInPercent=70,n.minWidth=50,n.minHeight=50,n.x=15,n.y=15,n.width=0,n.height=0,n.firstReport=!0,n.onCropObjectClick=function(e){var t;n.setSize(e.size.width,e.size.height),n.setPosition(e.position.x,e.position.y),null===(t=n.saveTrimmerArea)||void 0===t||t.call(n,n.getArea(),"crop-object-click"),n.setActiveCropObject(e)},n.onPointerDown=n.onPointerDown.bind(n),n.onPointerUp=n.onPointerUp.bind(n),n.onTrimmerPointerMove=n.onTrimmerPointerMove.bind(n),n.onTrimmerPointerDown=n.onTrimmerPointerDown.bind(n),n.onPointPointerMove=n.onPointPointerMove.bind(n),n.onPointPointerDown=n.onPointPointerDown.bind(n),n.onPointLeftTopPointerDown=n.onPointLeftTopPointerDown.bind(n),n.onPointRightTopPointerDown=n.onPointRightTopPointerDown.bind(n),n.onPointLeftBottomPointerDown=n.onPointLeftBottomPointerDown.bind(n),n.onPointRightBottomPointerDown=n.onPointRightBottomPointerDown.bind(n),n.state={activeCropObject:null},n}return J(t,e),t.prototype.componentDidMount=function(){var e;this.setDefaults(),this.checkParentSize(),this.setSize(this.initWidthInPercent,this.initHeighInPercent),this.setPosition(this.x,this.y),null===(e=this.saveTrimmerArea)||void 0===e||e.call(this,this.getArea(),"point")},t.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onPointerUp),window.removeEventListener("mousemove",this.onTrimmerPointerMove),window.removeEventListener("mousemove",this.onPointPointerMove)},t.prototype.getArea=function(){var e=this.getRectangle(),n=e.point1,r=e.point2;return{point1:{x:this.roundNumber(t.toRangeFromZeroToOne(n.x),4),y:this.roundNumber(t.toRangeFromZeroToOne(n.y),4)},point2:{x:this.roundNumber(t.toRangeFromZeroToOne(r.x),4),y:this.roundNumber(t.toRangeFromZeroToOne(r.y),4)}}},t.prototype.render=function(){var e=this.props,n=e.areCropObjectsEnabled,r=e.cropObjectsWrapperClassName,i=e.cropObjectsClassName,a=e.imageHref,s=e.imageId,c=this.state.activeCropObject,u=n&&o.createElement(Q,{className:r,objectsClassName:i,activeCropObject:c,imageHref:a,imageId:s,onObjectClick:this.onCropObjectClick});return o.createElement(o.Fragment,null,o.createElement("div",{className:Z(null,[this.props.className]),ref:this.trimmerRef,onClick:t.stopPropogation,onMouseDown:this.onTrimmerPointerDown},o.createElement("div",{className:Z("point",{pos:"left-top"}),onClick:t.stopPropogation,onMouseDown:this.onPointLeftTopPointerDown}),o.createElement("div",{className:Z("point",{pos:"right-top"}),onClick:t.stopPropogation,onMouseDown:this.onPointRightTopPointerDown}),o.createElement("div",{className:Z("point",{pos:"right-bottom"}),onClick:t.stopPropogation,onMouseDown:this.onPointRightBottomPointerDown}),o.createElement("div",{className:Z("point",{pos:"left-bottom"}),onClick:t.stopPropogation,onMouseDown:this.onPointLeftBottomPointerDown})),u)},t.prototype.onPointLeftTopPointerDown=function(e){this.onPointPointerDown(e,"left-top")},t.prototype.onPointRightTopPointerDown=function(e){this.onPointPointerDown(e,"right-top")},t.prototype.onPointLeftBottomPointerDown=function(e){this.onPointPointerDown(e,"left-bottom")},t.prototype.onPointRightBottomPointerDown=function(e){this.onPointPointerDown(e,"right-bottom")},t.prototype.onPointPointerDown=function(e,t){e.stopPropagation(),this.onPointerDown(e),this.pointNameMove=t,this.actionName="size",window.addEventListener("mousemove",this.onPointPointerMove)},t.prototype.setPosition=function(e,t){if(this.trimmerRef.current){var n=this.roundNumber(e),r=this.roundNumber(t);n=Math.max(0,n),r=Math.max(0,r),n=Math.min(100-this.width,n),r=Math.min(100-this.height,r),this.trimmerRef.current.style.top=r+"%",this.trimmerRef.current.style.left=n+"%",this.positionX=n,this.positionY=r}},t.prototype.getRectangle=function(){return{point1:{x:this.positionX,y:this.positionY},point2:{x:this.positionX+this.width,y:this.positionY+this.height}}},t.prototype.onPointerDown=function(e){this.startPointerXMove=e.clientX,this.startPointerYMove=e.clientY,this.startPositionXMove=this.positionX,this.startPositionYMove=this.positionY,this.startSizeWidthMove=this.width,this.startSizeHeightMove=this.height,this.checkParentSize(),window.addEventListener("mouseup",this.onPointerUp)},t.prototype.onPointerUp=function(){var e;null===(e=this.saveTrimmerArea)||void 0===e||e.call(this,this.getArea(),this.actionName),window.removeEventListener("mouseup",this.onPointerUp),window.removeEventListener("mousemove",this.onTrimmerPointerMove),window.removeEventListener("mousemove",this.onPointPointerMove),this.setDefaults(),this.resetActiveCropObject()},t.prototype.onTrimmerPointerDown=function(e){this.onPointerDown(e),this.actionName="drag",window.addEventListener("mousemove",this.onTrimmerPointerMove)},t.prototype.onTrimmerPointerMove=function(e){e.stopPropagation();var t=e.clientX-this.startPointerXMove,n=e.clientY-this.startPointerYMove,r=this.convertPixelsToPercentages(t,n);this.setPosition(this.startPositionXMove+r.x,this.startPositionYMove+r.y)},t.prototype.onPointPointerMove=function(e){e.stopPropagation();var t=e.clientX-this.startPointerXMove,n=e.clientY-this.startPointerYMove,r=this.convertPixelsToPercentages(t,n),o=this.convertPixelsToPercentages(this.minWidth,this.minHeight),i=this.startPositionXMove+this.startSizeWidthMove,a=this.startPositionYMove+this.startSizeHeightMove,s=100-this.startPositionXMove,c=100-this.startPositionYMove,u=this.startPositionXMove+this.startSizeWidthMove-o.x,l=this.startPositionYMove+this.startSizeHeightMove-o.y;switch(this.pointNameMove){case"left-top":this.setSize(Math.min(i,this.startSizeWidthMove-r.x),Math.min(a,this.startSizeHeightMove-r.y)),this.setPosition(Math.min(u,this.startPositionXMove+r.x),Math.min(l,this.startPositionYMove+r.y));break;case"right-top":this.setSize(Math.min(s,this.startSizeWidthMove+r.x),Math.min(a,this.startSizeHeightMove-r.y)),this.setPosition(this.startPositionXMove,Math.min(l,this.startPositionYMove+r.y));break;case"right-bottom":this.setSize(Math.min(100-this.positionX,this.startSizeWidthMove+r.x),Math.min(100-this.positionY,this.startSizeHeightMove+r.y));break;case"left-bottom":this.setSize(Math.min(i,this.startSizeWidthMove-r.x),Math.min(c,this.startSizeHeightMove+r.y)),this.setPosition(Math.min(u,this.startPositionXMove+r.x),this.startPositionYMove)}},t.prototype.convertPixelsToPercentages=function(e,t){return{x:e/this.parentWidth*100,y:t/this.parentHeight*100}},t.prototype.setSize=function(e,t){var n=this.convertPixelsToPercentages(this.minWidth,this.minHeight),r=this.roundNumber(e),o=this.roundNumber(t);r=Math.max(n.x,r),o=Math.max(n.y,o),this.trimmerRef.current.style.width=e+"%",this.trimmerRef.current.style.height=t+"%",this.width=r,this.height=o},t.prototype.roundNumber=function(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.round(e*n)/n},t.prototype.saveTrimmerArea=function(e,t){var n,r,o,i,a,s,c=this.props.imageHref;null===(r=(n=this.props).saveTrimmerArea)||void 0===r||r.call(n,e),this.firstReport?(this.firstReport=!1,null===(i=(o=this.props).onTrimmerStart)||void 0===i||i.call(o,c)):null===(s=(a=this.props).onTrimmerChange)||void 0===s||s.call(a,e,t,c)},t.prototype.setDefaults=function(){this.startPointerXMove=NaN,this.startPointerYMove=NaN,this.startPositionXMove=NaN,this.startPositionYMove=NaN,this.startSizeWidthMove=NaN,this.startSizeHeightMove=NaN,this.pointNameMove=""},t.prototype.checkParentSize=function(){var e=this.trimmerRef.current.parentNode;this.parentWidth=e.offsetWidth,this.parentHeight=e.offsetHeight},t.prototype.setActiveCropObject=function(e){this.state.activeCropObject!==e&&this.setState({activeCropObject:e})},t.prototype.resetActiveCropObject=function(){this.state.activeCropObject&&this.setState({activeCropObject:null})},t.stopPropogation=function(e){e.stopPropagation()},t.toRangeFromZeroToOne=function(e){return e/100},t}(o.Component),ee=Object(E.d)(function(e){return function(t){return e(Object(g.n)(t))}}),te=Object(a.compose)(Object(u.d)(function(e,t){return{areCropObjectsEnabled:e.config.areCropObjectsEnabled,saveTrimmerArea:ee(t)}}))($),ne=n(145),re=n(137),oe=function(){if(!re.canUseDOM)return!1;var e=document.createElement("img");return e.style.cssText="object-fit:cover",Boolean(e.style.objectFit)}(),ie="undefined"!==typeof InstallTrigger,ae=Object(E.d)(function(e){var t,n,r;return(null===(t=e.loadedImage)||void 0===t?void 0:t.data)||(null===(n=e.preview)||void 0===n?void 0:n[0])||(null===(r=e.dups)||void 0===r?void 0:r[0])||{}}),se=(n(548),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),ce=function(){return(ce=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ue=Object(_.cn)("MMImage"),le=ue("Spinner"),de=ue("Origin"),pe=ue("Preview"),fe=Object(_.cn)("MMImageContainer"),he=Object(_.cn)("MMImageWrapper"),me=he("Trimmer"),ve=he("CropObjects"),be=he("CropObjects-Item"),ge=function(e){function t(t){var n=e.call(this,t)||this;n.startLoadTime=Date.now(),n.isComponentMounted=!1,n.geom={},n.fallbackImagesMap={},n.imageRef=o.createRef(),n.wrapper=o.createRef(),n.container=o.createRef(),n.onContextMenu=n.onContextMenu.bind(n),n.onPreviewLoaded=n.onPreviewLoaded.bind(n),n.onResizeThrottleHandler=Object(x.throttle)(n.onResizeHandler.bind(n),50,{delayedLastCall:!0});var r=1+(n.props.squareDiffPercent||0)/100;return n.smartFitBounds={upperBound:r,lowerBound:1/r},n.updateGeometry(t.item),n}return se(t,e),t.prototype.componentDidMount=function(){this.isComponentMounted=!0,window.addEventListener("resize",this.onResizeThrottleHandler),this.onResizeHandler()},t.prototype.componentWillUnmount=function(){this.isComponentMounted=!1,window.removeEventListener("resize",this.onResizeThrottleHandler)},t.prototype.componentDidUpdate=function(e){this.props.hasTrimmer!==e.hasTrimmer&&this.onResizeHandler()},t.prototype.shouldComponentUpdate=function(e){return e.item!==this.props.item&&this.updateGeometry(e.item),!0},t.prototype.getFallbackImageUrl=function(){var e=this.props,t=e.item,n=e.fallbackOnPreview;if(this.fallbackImagesMap[t.id])return this.fallbackImagesMap[t.id];var r=n?t.preview[0].url:t.thumb.url;return this.fallbackImagesMap[t.id]=r,r},t.prototype.render=function(){var e,t,n=this.props,r=n.item,i=n.hasTrimmer,a=n.onPreviewSave,s=ae(r),c=!r.loadedImage,u=r.loadedImage&&r.loadedImage.data,l=this.geom,d=s&&s.url,p=(null===u||void 0===u?void 0:u.url)||this.getFallbackImageUrl(),f=null===u||void 0===u?void 0:u.origin,h=this.imageRef.current;h&&(!u||u.noncachable?h.style.width=!l.smartFit&&l.width?l.width+"px":"":t=this.onPreviewLoaded,(null===(e=this.shownData)||void 0===e?void 0:e.id)!==r.id&&(h.src=r.thumb.url),h.style.maxHeight=l.maxHeight?l.maxHeight+"px":"");var m=p;if(!c){var v=ie&&this.getCurrentImageOriginUrl();v&&(m=v)}var b=r.fresh;return this.handleImageShow(r,u),o.createElement("div",{className:he({hasTrimmer:i}),ref:this.wrapper},b?o.createElement("div",{className:he("FreshBadge")},b):null,o.createElement("div",{className:fe({fit:l.smartFit,hasTrimmer:i}),ref:this.container},i&&o.createElement(te,{className:me,cropObjectsWrapperClassName:ve,cropObjectsClassName:be,onTrimmerStart:this.props.onTrimmerStart,onTrimmerChange:this.props.onTrimmerChange,imageHref:d,imageId:r.rimid}),Boolean(l.maxHeight)&&o.createElement("img",{className:pe,src:p,onContextMenuCapture:!(f&&f.url)&&a||void 0,ref:this.imageRef,onClick:this.props.onClick,onLoad:t})),c&&o.createElement(D,{className:le}),o.createElement("img",{className:de,onContextMenuCapture:this.onContextMenu,src:m||p,onClick:this.props.onClick}))},t.prototype.onPreviewLoaded=function(){var e=this.imageRef.current;e&&(e.style.height="",e.style.width="")},t.prototype.onResizeHandler=function(){this.isComponentMounted&&this.updateGeometry(this.props.item)&&this.forceUpdate()},t.prototype.updateGeometry=function(e){var t=this.geom,n=t.smartFit,r=t.maxHeight,o=t.width,i=this.getGeometryParams(ae(e)),a=i.smartFit,s=i.maxHeight,c=i.width;return(n!==a||r!==s||o!==c||!this.getCurrentLoadedThumb()&&this.geom.height!==i.height)&&(this.geom=i,!0)},t.prototype.getDimensionsRatio=function(e,t){return e.w/e.h/(t.w/t.h)},t.prototype.isImageCloseToViewport=function(e,t,n){return!(e.w<t.w||e.h<t.h)&&(n>=this.smartFitBounds.lowerBound&&n<=this.smartFitBounds.upperBound)},t.prototype.shouldUseSmartFit=function(e,t,n){return oe&&this.isImageCloseToViewport(e,t,n)},t.prototype.getGeometryParams=function(e){var t=this.wrapper.current;if(!this.isComponentMounted)return{width:e.w,height:"100%",maxHeight:"100%",smartFit:!1};if(!t||!e)return{};var n={w:t&&t.clientWidth||0,h:t&&t.clientHeight||0},r={w:e.w||1,h:e.h||1},o=!1,i=this.getDimensionsRatio(n,e);this.props.squareDiffPercent&&(o=this.shouldUseSmartFit(e,n,i));var a=r.h||1;!o&&i<1&&n.h<e.h&&(a=i*n.h);var s=n.h;return{width:s>a?r.w:r.w/a*s,height:a,smartFit:o,maxHeight:n.h}},t.prototype.getOriginUrlFromItem=function(e){return e&&e.origin&&e.origin.url},t.prototype.onContextMenu=function(e){var t=e.target,n=this.getCurrentImageOriginUrl();t&&n&&t.setAttribute("src",n),this.props.onPreviewSave&&this.props.onPreviewSave()},t.prototype.handleImageShow=function(e,t){this.shownData!==e&&(this.startLoadTime=Date.now(),this.shownData=e,this.shownImage=void 0),t&&this.shownImage!==t&&(this.shownImage=t,this.onOriginShow(t))},t.prototype.getCurrentLoadedThumb=function(){var e=this.props.item.loadedImage;return e&&e.data||void 0},t.prototype.getCurrentImageOriginUrl=function(){if(this.props.item.extraOrigin)return this.props.item.extraOrigin.url;var e=this.getOriginUrlFromItem(this.getCurrentLoadedThumb());if(!e){var t=this.props.item;e=this.getOriginUrlFromItem(t.preview&&t.preview[0])||this.getOriginUrlFromItem(t.dups&&t.dups[0])}return e},t.prototype.onOriginShow=function(e){var t,n=this,r=this.props.item,o=Number(r.pos||0);this.shownImage=this.getCurrentLoadedThumb(),e&&(t={url:e.url,w:String(e.w),h:String(e.h),loadTime:Number(e.loadTime),usertime:String(Date.now()-this.startLoadTime),isMixedImage:Boolean(e.isMixedImage),isRim:r.isRim,rimid:r.rimid,rim_index:r.pos,origin:e.origin}),setTimeout(function(){n.props.onPreviewShow&&t&&n.props.onPreviewShow(o,t),n.props.onShow&&t&&n.props.onShow(o,t)},0)},t}(o.Component);var ye,Oe=n(44),we=(n(556),n(670)),je=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ce=A()(we),Ee=Object(_.cn)("TrimmerControls"),Se=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n.onPointerOver=n.onPointerOver.bind(n),n.onSearchClick=n.onSearchClick.bind(n),n}return je(t,e),t.prototype.render=function(){var e=this.getCrop(),t=this.getImageUrl(this.props.imageUrl);return o.createElement("div",{className:Ee(),onMouseOver:this.onPointerOver},o.createElement("div",{className:Ee("Label")},Ce("Укажите выше область для поиска по картинке",{context:"Инструмент выбора области картинки для дальнейшего поиска по ней"})),o.createElement("div",{className:Ee("Cancel"),onClick:this.props.onClose},o.createElement("span",{className:Ee("CancelText")},Ce("Отменить",{context:'Кнопка "Отменить"'}))),Boolean(e)&&t&&o.createElement("a",{className:Ee("Search"),target:this.getTarget(),onClick:this.onSearchClick,href:this.getSearchUrl(e,t)},Ce("Искать",{context:'Кнопка "Искать"'})))},t.prototype.getTarget=function(){return this.props.target||"_blank"},t.prototype.onPointerOver=function(){this.forceUpdate()},t.prototype.onSearchClick=function(e){if(this.props.onSearchClick){var t=this.getCrop(),n=this.getImageUrl(this.props.imageUrl);this.props.onSearchClick(e,t,n)}},t.prototype.getImageUrl=function(e){return"/"===e[0]?location.protocol+e:e},t.prototype.getSearchUrl=function(e,t){if(!t)return"";var n={rpt:"imageview",cbir_page:"similar",url:t,crop:e};return Object(l.appendQueryString)(this.props.imagesCbirSearchUrl,n)},t.prototype.getCrop=function(){var e=this.props.trimmerArea;return e?e.point1.x+";"+e.point1.y+";"+e.point2.x+";"+e.point2.y:""},t}(o.Component),_e=Object(a.compose)(Object(u.d)(function(e){var t,n=Object(S.m)(e);return{imagesCbirSearchUrl:e.config.imagesCbirSearchUrl,trimmerArea:e.trimmerArea,imageUrl:n&&(null===(t=ae(n))||void 0===t?void 0:t.url)}}),Object(Oe.a)(["imageUrl","trimmerArea"]))(Se),ke=n(412),Pe=(n(555),A()(ke)),Ie=Object(L.i18nRaw)(ke),xe=Object(_.cn)("MMViewMessage"),Me=function(e){var t=e.onClick,n=e.redirUrl,r=e.type;return o.createElement("span",null,Ie("Не удалось загрузить картинку, возможно, она есть на {link}",{context:"https://nda.ya.ru/3UYjnC",link:o.createElement("a",{className:xe("ErrorMessage"),href:n,rel:"noopener",target:"_blank",onClick:t,key:r},"service"===r?Pe("сервисе Яндекс.Картинки",{context:"https://nda.ya.ru/3UYjnC"}):Pe("сайте",{context:"https://nda.ya.ru/3UYjnK"}))}),".")},Ne=n(225),Te=n(11),Re=(n(561),Object(s.withBaobab)({name:"MMDirectSnippet-StripeLabel"})(function(e){return o.createElement("a",{onClick:e.onClick,href:"https://direct.yandex.ru/?partner",target:"_blank",rel:"noopener",className:Object(Te.a)("StripeLabel")},"Яндекс.Директ")})),De=n(710),Le=n(209),Ae=n(444),Be=n(360),Ue=(n(560),Object(a.compose)(De.a,Le.a,Ae.a)(Be.a)),Fe=Object(s.withBaobab)({name:"MMDirectSnippet-StripeButton"})(function(e){return o.createElement(Ue,{theme:"action",className:Object(Te.a)("StripeButton"),size:"s",type:"link",url:e.url,target:"_blank",children:"Перейти",onClick:e.onClick})}),He=(n(559),n(82)),qe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ze=function(e){function t(t){var n=e.call(this,t)||this;return n.infoDisclaimerRef=o.createRef(),n.infoDisclaimerTextRef=o.createRef(),n.warningDisclaimerRef=o.createRef(),n.warningDisclaimerTextRef=o.createRef(),n.SECONDS_PER_SCREEN=3.5,n.onWarningDisclaimerMouseEnter=n.onWarningDisclaimerMouseEnter.bind(n),n.onWarningDisclaimerMouseLeave=n.onWarningDisclaimerMouseLeave.bind(n),n.onInfoDisclaimerMouseEnter=n.onInfoDisclaimerMouseEnter.bind(n),n.onInfoDisclaimerMouseLeave=n.onInfoDisclaimerMouseLeave.bind(n),n}return qe(t,e),t.prototype.onWarningDisclaimerMouseEnter=function(){this.onDisclaimerMouseEnter(this.warningDisclaimerRef,this.warningDisclaimerTextRef,30)},t.prototype.onWarningDisclaimerMouseLeave=function(){this.onDisclaimerMouseLeave(this.warningDisclaimerTextRef)},t.prototype.onInfoDisclaimerMouseEnter=function(){this.onDisclaimerMouseEnter(this.infoDisclaimerRef,this.infoDisclaimerTextRef)},t.prototype.onInfoDisclaimerMouseLeave=function(){this.onDisclaimerMouseLeave(this.infoDisclaimerTextRef)},t.prototype.onDisclaimerMouseEnter=function(e,t,n){if(void 0===n&&(n=0),e.current&&t.current){var r=Math.ceil(e.current.clientWidth),o=Math.ceil(t.current.clientWidth)+n;if(!(r>=o)){var i=Math.ceil(o/r)*this.SECONDS_PER_SCREEN;t.current.style.transitionDuration=i+"s",t.current.style.transform="translateX("+(r-o)+"px)"}}},t.prototype.onDisclaimerMouseLeave=function(e){e.current&&(e.current.style.transitionDuration="",e.current.style.transform="")},t.prototype.render=function(){var e=this.props,t=e.ads,n=e.onClick,r=t.url,i=t.title,a=t.body,s=t.age,c=t.warning,u=Object(He.e)(c),l=c&&!u,d=c&&u,p=r||"";return o.createElement("div",{className:Object(Te.a)("StripeMain")},o.createElement("div",{className:Object(Te.a)("StripeBlock"),onMouseLeave:this.props.onDisclaimerMouseLeave},o.createElement("a",{className:Object(Te.a)("StripeLink"),target:"_blank",rel:"noopener",href:p,onClick:n},o.createElement("span",{className:Object(Te.a)("StripeLinkBody")},o.createElement("span",{className:Object(Te.a)("StripeTitle")},o.createElement(B.a,{start:"<hl>",end:"</hl>"},i)),o.createElement("span",{className:Object(Te.a)("StripeDescription")},o.createElement(B.a,{start:"<hl>",end:"</hl>"},a))),l&&o.createElement("span",{className:Object(Te.a)("StripeDisclaimerInfo"),ref:this.infoDisclaimerRef,onMouseEnter:this.onInfoDisclaimerMouseEnter,onMouseLeave:this.onInfoDisclaimerMouseLeave},o.createElement("span",{ref:this.infoDisclaimerTextRef,className:Object(Te.a)("StripeDisclaimerInfoMask")},o.createElement("span",{className:Object(Te.a)("StripeDisclaimerInfoText")},o.createElement(B.a,null,c))))),l&&o.createElement("div",{className:Object(Te.a)("StripeDisclaimer"),onMouseEnter:this.props.onDisclaimerMouseEnter},o.createElement("span",{className:Object(Te.a)("StripeDisclaimerInner")},"Юр.информация"))),d&&o.createElement("div",{ref:this.warningDisclaimerRef,className:Object(Te.a)("StripeDisclaimerExpand"),onMouseEnter:this.onWarningDisclaimerMouseEnter,onMouseLeave:this.onWarningDisclaimerMouseLeave},o.createElement("span",{ref:this.warningDisclaimerTextRef,className:Object(Te.a)("StripeDisclaimerExpandText")},o.createElement(B.a,null,c))),s&&o.createElement("div",{className:Object(Te.a)("StripeDisclaimerAge")},s))},t}(o.Component),We=Object(s.withBaobab)({name:"MMDirectSnippet-StripeMain"})(ze),Ge=n(81),Ve=(n(558),Object(s.withBaobab)({name:"MMDirectSnippet-StripeFavicon"})(function(e){var t=e.favicon,n=e.url;return t?o.createElement(Ge.a,{favicon:t,url:n,className:Object(Te.a)("StripeFavicon"),onClick:e.onClick}):null})),Ye=(n(557),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Ke=function(){return(Ke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Xe=Object(a.withBemMod)(Object(Te.a)(),{type:"stripe"},function(e){return function(t){function n(e){var n=t.call(this,e)||this;return n.state={disclaimerHovered:!1},n.onDisclaimerMouseLeave=n.onDisclaimerMouseLeave.bind(n),n.onDisclaimerMouseEnter=n.onDisclaimerMouseEnter.bind(n),n}return Ye(n,t),n.prototype.onDisclaimerMouseEnter=function(){this.setState({disclaimerHovered:!0})},n.prototype.onDisclaimerMouseLeave=function(){this.setState({disclaimerHovered:!1})},n.prototype.render=function(){var t=this,n=this.props,r=n.ads,i=n.favicon,a=n.pos,c=n.reqid,u=n.className;if(!r)return null;var l=this.state.disclaimerHovered,d=r.url,p=r.domain,f=d||"";return o.createElement(C.a,null,function(n){return o.createElement(e,Ke({},t.props,{className:Object(Te.a)({disclaimerHovered:l},[u]),counter:n&&n.directSnippetStripe&&Object(S.b)(n.directSnippetStripe.shown,{"-pos":a},{domain:p,pos:a,reqid:c},{href:f})}),o.createElement(Ve,{favicon:i,url:f,logNode:{attrs:(Object(S.a)(n.directSnippetStripe.path)||{}).attrs,events:{onClick:Object(s.logClick)(Object(S.b)(n.directSnippetStripe.path,{"-pos":a,"-elem":"favicon"},{domain:p,pos:a,reqid:c},{href:f}))}}}),o.createElement(We,{ads:r,onDisclaimerMouseEnter:t.onDisclaimerMouseEnter,onDisclaimerMouseLeave:t.onDisclaimerMouseLeave,logNode:{attrs:(Object(S.a)(n.directSnippetStripe.title)||{}).attrs,events:{onClick:Object(s.logClick)(Object(S.b)(n.directSnippetStripe.title,{"-pos":a},{domain:p,pos:a,reqid:c},{href:f}))}}}),o.createElement(Fe,{url:f,logNode:{attrs:(Object(S.a)(n.directSnippetStripe.path)||{}).attrs,events:{onClick:Object(s.logClick)(Object(S.b)(n.directSnippetStripe.path,{"-pos":a,"-elem":"button"},{domain:p,pos:a,reqid:c},{href:f}))}}}),o.createElement(Re,{logNode:{attrs:(Object(S.a)(n.directSnippetStripe.partner)||{}).attrs,events:{onClick:Object(s.logClick)(Object(S.b)(n.directSnippetStripe.partner,{"-pos":a},{domain:p,pos:a,reqid:c},{href:"https://direct.yandex.ru/?partner"}))}}}))})},n}(o.Component)}),Qe=Object(a.compose)(Xe)(Ne.a),Je=Object(a.compose)(Object(u.d)(function(e,t,n){return Object(He.b)(e,n)}),Object(Oe.a)(function(e){return Boolean(e.ads)}))(Qe),Ze=n(363),$e=n(128),et=n(178),tt=Object(_.cn)("CircleButton"),nt=(n(546),o.memo(function(e){var t=e.disabled,n=void 0!==t&&t,r=e.onMouseEnter,i=e.onMouseOut,a=e.forwardRef,s=e.onClick;return o.createElement("div",{className:tt({disabled:n},[e.className]),onClick:n?void 0:s,onMouseEnter:r,onMouseOut:i,ref:a},e.children)})),rt=Object(s.withBaobab)({name:"CircleButton"})(nt),ot=(n(540),o.memo(function(){return o.createElement("i",{className:tt("Icon")})})),it=function(){return(it=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},at=Object(a.withBemMod)(tt(),{type:"*"},function(e){return function(t){return o.createElement(e,it({},t,{className:tt({type:!0},[t.className])}),t.children,o.createElement(ot,null))}}),st=(n(543),Object(a.withBemMod)(tt(),{type:"next"})),ct=(n(542),Object(a.withBemMod)(tt(),{type:"prev"})),ut=(n(541),n(311)),lt=function(){return(lt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},dt=A()(ut),pt=Object(a.withBemMod)(tt(),{type:"fullscreen"},function(e){return function(t){return o.createElement(e,lt({},t,{title:dt("Открыть в полноэкранном режиме",{context:"Кнопка открытия полноэкранного режима в просмотрщике картинок"})}),t.children)}}),ft=(n(544),function(){return(ft=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),ht=A()(ut),mt=Object(a.withBemMod)(tt(),{type:"cbircrop"},function(e){return function(t){return o.createElement(e,ft({},t,{title:ht("Поиск по фрагменту картинки",{context:"Кнопка открытия режима поиска по фрагменту картинки в просмотрщике картинок"})}),t.children)}}),vt=n(259),bt=function(){return(bt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},gt=Object(a.withBemMod)(tt(),{withTooltip:!0},function(e){return function(t){var n=o.useRef(null);return o.createElement(vt.a,{text:t.title,anchor:n,directions:["right-center"],mainOffset:7,hasTail:!0},function(r,i){var a=o.useCallback(function(e){i(),t.onClick&&t.onClick(e)},[i]);return o.createElement(e,bt({},t,{className:tt(null,[t.className]),forwardRef:n,onMouseEnter:r,onMouseOut:i,onClick:a}),t.children)})}}),yt=(n(539),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Ot=function(){return(Ot=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},wt=Object(_.cn)("MediaViewer"),jt=Object(a.compose)(at,Object(a.composeU)(pt,ct,st,mt),gt)(rt);!function(e){e.imageClick="imageClick",e.imageShow="imageShow",e.imageError="imageError",e.nextItem="nextItem",e.prevItem="prevItem",e.setItem="setItem",e.close="close",e.paranjaClick="paranjaClick",e.fullscreenEnter="fullscreenEnter",e.fullscreenExit="fullscreenExit",e.fullscreenTitleClick="fullscreenTitleClick",e.fullscreenDomainClick="fullscreenDomainClick",e.fullscreenStartAutoplay="fullscreenStartAutoplay",e.fullscreenStopAutoplay="fullscreenStopAutoplay",e.previewSave="previewSave",e.previewShow="previewShow"}(ye||(ye={}));var Ct=function(e){function t(n){var r=e.call(this,n)||this;return r.isFullscreenMode=!1,r.onViewErrorHandler=r.onViewErrorHandler.bind(r),r.genClass=r.genClass.bind(r),r.onFullscreenClick=r.onFullscreenClick.bind(r),r.onFullscreenExit=r.onFullscreenExit.bind(r),r.onFullscreenTitleClick=r.onFullscreenTitleClick.bind(r),r.onFullscreenDomainClick=r.onFullscreenDomainClick.bind(r),r.onFullscreenStartAutoplay=r.onFullscreenStartAutoplay.bind(r),r.onPreviewSave=r.onPreviewSave.bind(r),r.onPreviewShow=r.onPreviewShow.bind(r),r.onSceneClick=r.onSceneClick.bind(r),r.onItemClick=r.onItemClick.bind(r),r.onItemShow=r.onItemShow.bind(r),r.onFullscreenStopAutoplay=r.onFullscreenStopAutoplay.bind(r),r.switchNext=r.genItemSwitcher(1),r.switchPrev=r.genItemSwitcher(-1),r.onKeyDownHandler=Object(x.throttle)(r.onKeyDownHandler.bind(r),100),r.onKeyUpHandler=Object(x.throttle)(r.onKeyUpHandler.bind(r),100),r.onSceneMouseMove=r.onSceneMouseMove.bind(r),r.onMouseMove=Object(x.throttle)(r.onMouseMove.bind(r),100,{delayedLastCall:!0}),r.getScrollContainer=r.getScrollContainer.bind(r),r.nodes={},r.state=Ot({hoveredArrow:"",viewHeightStyle:"100%",viewWidthStyle:"100%"},t.getStateForNewItem(n.items,n.initialIdx||0,n.showItem)),r}return yt(t,e),t.prototype.componentDidMount=function(){this.componentIsMounted=!0,window.addEventListener("keydown",this.onKeyDownHandler),window.addEventListener("keyup",this.onKeyUpHandler),this.trigger(ye.setItem,this.state.currentIdx)},t.prototype.componentWillUnmount=function(){this.componentIsMounted=!1,window.removeEventListener("keydown",this.onKeyDownHandler),window.removeEventListener("keyup",this.onKeyUpHandler)},t.prototype.componentDidUpdate=function(e,n){var r=this.props.items,o=e.items;this.state.shownItem!==n.shownItem||this.state.currentIdx===n.currentIdx&&r.length===o.length&&r[this.state.currentIdx]===o[n.currentIdx]&&this.props.showItem===e.showItem||this.setState(t.getStateForNewItem(this.props.items,this.state.currentIdx,this.props.showItem))},t.prototype.render=function(){var e=this.state,t=this.props.theme,n=this.props,r=n.layout,i=n.className;return o.createElement("div",{className:wt({theme:t},[i]),ref:this.saveRef("self")},o.createElement("div",{className:this.genClass("LayoutContainer"),ref:this.saveRef("container")},r&&r.leftSideblock&&o.createElement("div",{className:this.genClass("LayoutLeftSideblock"),ref:this.saveRef("leftSideblock")},r.leftSideblock),o.createElement("div",{className:this.genClass("LayoutMain"),style:{width:e.viewWidthStyle}},this.renderScene(),r&&r.footer&&o.createElement("div",{className:this.genClass("LayoutFooter"),ref:this.saveRef("footer")},this.props.layout&&this.props.layout.footer)),r&&r.sideblock&&o.createElement("div",{className:this.genClass("LayoutSideblock"),ref:this.saveRef("sideblock")},r.sideblock)))},t.prototype.getScrollContainer=function(){return this.nodes.container},t.prototype.switchToItem=function(e){var n=this,r=t.getStateForNewItem(this.props.items,e,this.props.showItem);this.setState(r,function(){n.trigger(ye.setItem,r.currentIdx)})},t.prototype.renderScene=function(){var e=this,t=this.state,n=this.props,r=n.buttons,i=void 0===r?{}:r,a=n.vertical,c=Object.keys(i).map(function(e){return Object.assign({},i[e],{type:i[e].type||e})});return this.props.hasFullscreen&&c.unshift({type:"fullscreen",clickHandler:this.onFullscreenClick}),o.createElement(et.a,{className:this.genClass("LayoutScene"),forwardRef:this.saveRef("scene"),onClick:this.props.hasTrimmer?void 0:this.onSceneClick,logNode:{name:"preview",events:{onClick:Object(s.logClick)(function(){return{action:e.state.hoveredArrow}})}},onMouseMove:this.onSceneMouseMove},o.createElement(jt,{className:this.genClass(["Button","ButtonPrev"],[{hovered:"prev"===this.state.hoveredArrow},{vertical:a}]),logNode:{name:"arrow-left",events:{onClick:Object(s.logClick)()}},disabled:t.isFirst,onClick:this.switchPrev,type:"prev"}),Boolean(c.length)&&o.createElement("div",{className:this.genClass("LayoutSceneControls")},c.map(function(t,n){return t.content||o.createElement(jt,{key:n,type:t.type,className:e.genClass(["Button","Button"+t.type]),onClick:t.clickHandler,logNode:{name:t.type,events:{onClick:Object(s.logClick)()}},withTooltip:!0})})),o.createElement("div",{className:this.genClass("View"),ref:this.saveRef("view"),style:{width:t.viewWidthStyle,height:t.viewHeightStyle,lineHeight:t.viewHeightStyle}},this.props.itemRenderer(this.state.shownItem,{switchNext:this.switchNext,switchPrev:this.switchPrev,onShow:this.onItemShow,onError:this.onViewErrorHandler,hasFullscreen:this.props.hasFullscreen,onFullscreenExit:this.onFullscreenExit,onFullscreenTitleClick:this.onFullscreenTitleClick,onFullscreenDomainClick:this.onFullscreenDomainClick,onFullscreenStartAutoplay:this.onFullscreenStartAutoplay,onFullscreenStopAutoplay:this.onFullscreenStopAutoplay,onPreviewSave:this.onPreviewSave,onPreviewShow:this.onPreviewShow,hasTrimmer:this.props.hasTrimmer,fallbackOnPreview:this.props.fallbackOnPreview,imageRef:this.props.imageRef})),o.createElement(jt,{className:this.genClass(["Button","ButtonNext"],[{hovered:"next"===this.state.hoveredArrow},{vertical:a}]),logNode:{name:"arrow-right",events:{onClick:Object(s.logClick)()}},disabled:t.isLast,onClick:this.switchNext,type:"next"}),this.props.viewMessage&&o.createElement("div",{className:this.genClass("ViewMessage")},this.props.viewMessage))},t.prototype.onItemShow=function(e,t){this.trigger(ye.imageShow,e,t)},t.prototype.onItemClick=function(e){this.trigger(ye.imageClick,e)},t.prototype.onSceneClick=function(e){"prev"===this.state.hoveredArrow?this.switchPrev(e,"",this.onItemClick):this.switchNext(e,"",this.onItemClick)},t.prototype.saveRef=function(e){var t=this;return function(n){return t.nodes[e]=n}},t.prototype.genClass=function(e,t){var n=this.props.theme||"fiji",r=Object(_.cn)(wt()+"_theme_"+n),o=Array.isArray(t)?t:[t];return(Array.isArray(e)?e:[e]).map(function(e,t){return wt(e,o[t],[r(e)])}).join(" ")},t.prototype.trigger=function(e,t,n,r){var o=this.props.on,i=o&&o[e];i&&i(void 0!==t?t:this.state.currentIdx,n,r)},t.prototype.genItemSwitcher=function(e){var n=this;return void 0===e&&(e=1),function(r,o,i){r&&r.stopPropagation();for(var a=n.state.currentIdx,s=n.props.items,c=a+e;!s[c]&&c>=0&&c<s.length;c+=e);if(s[c]){var u=t.getStateForNewItem(n.props.items,c,n.props.showItem);n.setState(u,function(){i&&i(u.currentIdx),n.trigger(e>0?ye.nextItem:ye.prevItem,u.currentIdx,null,o),n.trigger(ye.setItem,u.currentIdx)})}}},t.prototype.onFullscreenClick=function(e){var t;t=this.nodes.view,q&&t&&q.request(t),this.isFullscreenMode=!0,this.trigger(ye.fullscreenEnter),e.stopPropagation()},t.prototype.onFullscreenExit=function(){this.isFullscreenMode=!1,this.trigger(ye.fullscreenExit)},t.prototype.onFullscreenTitleClick=function(){this.trigger(ye.fullscreenTitleClick)},t.prototype.onFullscreenDomainClick=function(){this.trigger(ye.fullscreenDomainClick)},t.prototype.onFullscreenStartAutoplay=function(){this.trigger(ye.fullscreenStartAutoplay)},t.prototype.onPreviewSave=function(){this.trigger(ye.previewSave,this.state.currentIdx)},t.prototype.onPreviewShow=function(e,t){this.trigger(ye.previewShow,e||this.state.currentIdx,t)},t.prototype.onFullscreenStopAutoplay=function(){this.trigger(ye.fullscreenStopAutoplay)},t.prototype.onViewErrorHandler=function(e){this.trigger(ye.imageError)},t.prototype.onSceneMouseMove=function(e){this.onMouseMove(e.clientX,e.clientY)},t.prototype.onMouseMove=function(e,t){if(this.nodes.scene&&this.componentIsMounted){var n=this.props,r=n.prevArrowSize,o=n.vertical,i="number"===typeof r?r:.3,a=this.nodes.scene.getBoundingClientRect(),s=o?a.top:a.left,c=(o?a.bottom:a.right)-s,u=((o?t:e)-s)/c<=i?"prev":"next";this.state.hoveredArrow!==u&&this.setState({hoveredArrow:u})}},t.prototype.onKeyDownHandler=function(e){var t=this.props.vertical;if(!this.shouldPreventKeyHandler(e))switch(e.keyCode){case 8:case 27:this.isFullscreenMode||this.trigger(ye.close);break;case 32:e.preventDefault(),this.switchNext(null,"keyboard");break;case 40:t&&this.switchNext(null,"keyboard");break;case 39:this.switchNext(null,"keyboard");break;case 38:t&&this.switchPrev(null,"keyboard");break;case 37:this.switchPrev(null,"keyboard")}},t.prototype.onKeyUpHandler=function(e){this.shouldPreventKeyHandler(e)||32===e.keyCode&&e.preventDefault()},t.prototype.shouldPreventKeyHandler=function(e){var t=e.target.nodeName;return!this.componentIsMounted||"TEXTAREA"===t||"INPUT"===t},t.getStateForNewItem=function(e,t,n){var r=0===e.length,o=e.length-1,i=t;i<0?i=0:i>o&&(i=o);var a=r?void 0:e[i];return{currentIdx:i,isFirst:0===i||r,isLast:i===o||r,shownItem:n||a}},t}(o.Component),Et=n(220),St=(n(537),n(305),function(){return(St=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),_t=St(St({},y.f),{beforeOpen:"images-viewer:beforeOpen",cbirCrop:"images-viewer:cbirCrop",opened:"images-viewer:opened",close:"images-viewer:close",beforeClose:"images-viewer:beforeClose",selectItem:"images-viewer:selectItem",imageShow:"images-viewer:imageShow",listOut:"images-viewer:listOut",rimClick:"images-viewer:rimClick",fullscreenEnter:"images-viewer:fullscreenEnter",fullscreenExit:"images-viewer:fullscreenExit"}),kt=function(){return(kt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Pt(e){var t=e.path,n=e.params,r=e.reqid;return kt({dtype:"iweb",path:"/image/new/preview/"+t,reqid:r},n)}n(538);var It=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xt=function(){return(xt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Mt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Nt=P.a,Tt=Object(_.cn)("ImagesViewerApp"),Rt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return It(t,e),t}(Ct),Dt=function(e){function t(t){var n,r=e.call(this,t)||this;return r.isFullscreenMode=!1,r.eventsEnabled=!1,r.viewer=i.a.createRef(),r.directStripe=i.a.createRef(),r.behavioralDirectRef=i.a.createRef(),r.gallery=i.a.createRef(),r.sidebarNode=i.a.createRef(),r.leftSidebarNode=i.a.createRef(),r.wasMounted=!1,r.galleryItemsLoadEventOffset=1200,r.directAutoUpdateTimeout=1e4,r.logTechCounter=r.logTechCounter.bind(r),r.onCbirCropEvent=r.onCbirCropEvent.bind(r),r.onCbirCropSearchEvent=r.onCbirCropSearchEvent.bind(r),r.onNewItemSelected=r.onNewItemSelected.bind(r),r.onRelatedItemClick=r.onRelatedItemClick.bind(r),r.onDirectStripeClick=r.onDirectStripeClick.bind(r),r.onDirectStripeShow=r.onDirectStripeShow.bind(r),r.onDirectStripeHide=r.onDirectStripeHide.bind(r),r.onGalleryClick=r.onGalleryClick.bind(r),r.onGalleryScroll=Object(x.throttle)(r.onGalleryScroll.bind(r),50,{delayedLastCall:!0}),r.onPreviewShowEvent=r.onPreviewShowEvent.bind(r),r.sendNextCounter=r.sendNextCounter.bind(r),r.sendPrevCounter=r.sendPrevCounter.bind(r),r.previewSave=r.previewSave.bind(r),r.onOpenItem=r.onOpenItem.bind(r),r.hitFullscreenCounter=r.hitFullscreenCounter.bind(r),r.hitSlideshowCounter=r.hitSlideshowCounter.bind(r),r.hitTrimmerCounter=r.hitTrimmerCounter.bind(r),r.onFullscreenEnter=r.onFullscreenEnter.bind(r),r.onFullscreenExit=r.onFullscreenExit.bind(r),r.onFullscreenTitleClick=r.onFullscreenTitleClick.bind(r),r.onFullscreenDomainClick=r.onFullscreenDomainClick.bind(r),r.onFullscreenStartAutoplay=r.onFullscreenStartAutoplay.bind(r),r.onFullscreenStopAutoplay=r.onFullscreenStopAutoplay.bind(r),r.onTrimmerStart=r.onTrimmerStart.bind(r),r.onTrimmerChange=r.onTrimmerChange.bind(r),r.onCloseEventKeyboard=r.onCloseEventKeyboard.bind(r),r.onWheel=r.onWheel.bind(r),r.onCloseEventParanja=r.onCloseEvent.bind(r,"paranja"),r.onCloseEventMouse=r.onCloseEvent.bind(r,"mouse"),r.onCloseEventHistory=r.onCloseEventHistory.bind(r,"history"),r.onCloseEvent=r.onCloseEvent.bind(r),r.tryUpdateDirect=Object(x.throttle)(r.tryUpdateDirect.bind(r),r.directAutoUpdateTimeout),r.onGlobalDragStart=r.onGlobalDragStart.bind(r),r.onGlobalDragEnd=r.onGlobalDragEnd.bind(r),r.onTagClick=r.onTagClick.bind(r),r.loginUrl="https://passport.yandex."+t.tld+"/auth?retpath=https%3A%2F%2Fyandex.ru%2Fcollections%2Ffavorites%2F&origin=images_collections",r.imageRenderer=(n={onTrimmerStart:r.onTrimmerStart,onTrimmerChange:r.onTrimmerChange},function(e,t){if(!e)return null;var r=e.loadedImage,i=Object(ne.a)(e),a=Boolean(r);return o.createElement(o.Fragment,null,o.createElement(ge,ce({item:e,ref:t.imageRef},t,n)),t.hasFullscreen&&o.createElement(W,{isLoaded:a,title:i.title,domain:i.domain,url:i.redirUrl||i.url,nextItemHandler:t.switchNext,prevItemHandler:t.switchPrev,onExit:t.onFullscreenExit,onTitleClick:t.onFullscreenTitleClick,onDomainClick:t.onFullscreenDomainClick,onStartAutoplay:t.onFullscreenStartAutoplay,onStopAutoplay:t.onFullscreenStopAutoplay}))}),r.state={isVisible:null!=t.currentItemIdx&&t.currentItemIdx>=0,activeItemIdx:t.currentItemIdx||-1,initialIdx:t.currentItemIdx||void 0,showCbirCrop:!1,globalDragging:!1,loggedIn:t.config.loggedIn},r.handlers={setItem:r.onNewItemSelected,close:r.onCloseEvent,nextItem:r.sendNextCounter,prevItem:r.sendPrevCounter,imageClick:function(e,t){var n=r.getItemParamsByIdx(e),o=n.imgHref||"";t&&t.isMixedImage&&t.origin&&(o=t.origin.url),r.logTechCounter({method:"hitDelayed",__oldCounter__:Pt({path:"imgclick",params:{vars:{"-pos":n.pos}},reqid:n.reqid||""}),node:{href:o}})},imageShow:function(e,t){if(r.state.isVisible){Object(w.a)().emit(_t.imageShow);var n=r.getActiveItemParams(),o=n.preview[0],i=n.imgHref||"",a={"-pos":n.pos,"-width":o&&o.w||0,"-height":o&&o.h||0,"-time":Number(t&&t.loadTime),"-usertime":Number(t&&t.usertime)};if(t&&t.isRim&&(a["-rim_id"]=t.rimid,a["-rim_index"]=t.rim_index,t.origin&&(a["-width"]=t.origin.w,a["-height"]=t.origin.h)),t&&t.isMixedImage&&t.origin){var s=t.url.match(/id=([^&]+)/);i=t.origin.url,s&&(a["-id"]=s[1]),a["-origin_w"]=t.origin.w,a["-origin_h"]=t.origin.h}r.logTechCounter({method:"hitDelayed",__oldCounter__:Pt({path:"image/show",params:{vars:a},reqid:n.reqid||""}),node:{href:i}})}},imageError:j.a,fullscreenEnter:r.onFullscreenEnter,fullscreenExit:r.onFullscreenExit,fullscreenTitleClick:r.onFullscreenTitleClick,fullscreenDomainClick:r.onFullscreenDomainClick,fullscreenStartAutoplay:r.onFullscreenStartAutoplay,fullscreenStopAutoplay:r.onFullscreenStopAutoplay,previewSave:r.previewSave,previewShow:j.a},r.buttons={CbirCrop:{type:"cbircrop",clickHandler:r.onCbirCropEvent}},r}return It(t,e),t.prototype.componentDidMount=function(){if(this.wasMounted=!0,Object(w.a)().on("i-keyrouter:esc",this.onCloseEventKeyboard).on(_t.open,this.onOpenItem).on("serp-controller:viewer-close",this.onCloseEventHistory),this.state.isVisible){if(this.enableEventListeners(),this.triggerBeforeOpenEvent(),null!=this.props.currentItemIdx&&this.props.currentItemIdx>-1){this.logOpenCounter(this.props.currentItemIdx);var e=this.getItemParamsByIdx(this.props.currentItemIdx);this.triggerSelectItemEvent(e,{openedFromSerp:!1,initialLoading:!0,historyLoading:!1})}this.triggerOpenEvent()}},t.prototype.componentWillUnmount=function(){this.wasMounted=!1,Object(w.a)().off("i-keyrouter:esc",this.onCloseEventKeyboard).off(_t.open,this.onOpenItem).off("serp-controller:viewer-close",this.onCloseEventHistory),this.disableEventListeners()},t.prototype.componentDidUpdate=function(e,t){var n=t.activeItemIdx!==this.state.activeItemIdx,r=this.props.rimSelectedIdx!==e.rimSelectedIdx;this.state.isVisible?(this.enableEventListeners(),(n||r)&&this.tryUpdateDirect()):this.disableEventListeners()},t.prototype.render=function(){var e,t,n=this.props,r=n.items,o=n.experiments,a=void 0===o?{}:o;return i.a.createElement(Ze.a,{className:Object($e.a)({mode:this.state.globalDragging?"dragging":void 0},[Object(M.a)(N.a)]),isVisible:this.state.isVisible,zIndex:this.state.isVisible?400:3,zIndexGroupLevel:10,onCloseClick:this.onCloseEventMouse,onParanjaClick:this.onCloseEventParanja,isSSREnabled:!0},this.state.isVisible&&i.a.createElement(Rt,{theme:"fiji",className:Object($e.a)("Container",{mode:this.state.showCbirCrop?"CbirCrop":void 0,sideblock:this.props.stretchSideblock?"stretch":void 0,ssr:null===(e=this.props.experiments)||void 0===e?void 0:e.imagesViewerSSR}),ref:this.viewer,initialIdx:this.state.initialIdx||0,items:r,showItem:this.props.shownImage&&this.props.shownImage.isRim?this.props.shownImage:void 0,on:this.handlers,layout:{leftSideblock:this.renderLeftSidebar(),sideblock:this.renderSidebar(),footer:this.renderFooter()},itemRenderer:this.imageRenderer,buttons:this.buttons,vertical:Boolean(a.verticalGallery),hasFullscreen:this.wasMounted&&Nt&&Nt.isEnabled,hasTrimmer:this.state.showCbirCrop,viewMessage:this.renderError(),fallbackOnPreview:Boolean(null===(t=this.props.experiments)||void 0===t?void 0:t.imagesViewerFallbackOnPreview)&&!this.wasMounted}))},t.prototype.logOpenCounter=function(e){var t=this.getItemParamsByIdx(e),n=t.pos,r=t.reqid;this.logTechCounter({method:"hitDelayed",__oldCounter__:Pt({path:"open",params:{vars:{"-pos":n}},reqid:r||""})})},t.prototype.open=function(e){var t=this;this.triggerBeforeOpenEvent(),this.props.setCurrentItemIdx(e),this.setState({initialIdx:e,activeItemIdx:e,isVisible:!0},function(){t.viewer.current&&t.viewer.current.switchToItem(e)}),this.logOpenCounter(e),this.triggerOpenEvent()},t.prototype.renderError=function(){var e=this.props.shownImage,t=e&&e.loadedImage&&!e.loadedImage.data;if(e&&t)return i.a.createElement(Me,{type:e.snippet.gotoService?"service":"site",redirUrl:e.snippet.redirUrl})},t.prototype.enableEventListeners=function(){this.eventsEnabled||(document.body.addEventListener("dragstart",this.onGlobalDragStart),document.body.addEventListener("dragend",this.onGlobalDragEnd),document.body.addEventListener("wheel",this.onWheel),this.eventsEnabled=!0)},t.prototype.disableEventListeners=function(){this.eventsEnabled&&(document.body.removeEventListener("dragstart",this.onGlobalDragStart),document.body.removeEventListener("dragend",this.onGlobalDragEnd),document.body.removeEventListener("wheel",this.onWheel),this.eventsEnabled=!1)},t.prototype.triggerOpenEvent=function(){Object(w.a)().emit(_t.opened)},t.prototype.triggerBeforeOpenEvent=function(){Object(w.a)().emit(_t.beforeOpen)},t.prototype.renderSidebar=function(){var e=this,t=this.props,n=t.counters,r=t.reqid,o=n.sidebarScrollShow,a=n.sidebarScrollStart,c=n.sidebarScrollEnd,u=n.direct,l=n.directSnippetStripe,d=this.getActiveItemParams(),p={"-col":d.col,"-row":d.row};void 0===d.page||isNaN(d.page)||(p["-page"]=d.page),u.title=Object(S.b)(u.title,p),u.path=Object(S.b)(u.path,p),u.sitelink=Object(S.b)(u.sitelink,p),u.contacts=Object(S.b)(u.contacts,p),u.shown=Object(S.b)(u.shown,p),l.title=Object(S.b)(l.title,p),l.path=Object(S.b)(l.path,p),l.partner=Object(S.b)(l.partner,p),l.shown=Object(S.b)(l.shown,p);var f={"-reqid":r};return d&&(f["-pos"]=d.pos),i.a.createElement(I.ComponentRegistryConsumer,{id:Object($e.a)()},function(t){var n=t.MMSidebar;return i.a.createElement(n,{isVisible:e.state.isVisible,addToCollectionsLoginUrl:e.loginUrl,logNode:{events:{onScrollShow:Object(s.logTech)("scroll-show",Object(S.b)(o,f)),onScrollStart:Object(s.logTech)("scroll-start",Object(S.b)(a,f)),onScrollToBottom:Object(s.logTech)("scroll-end",Object(S.b)(c,f))}},nodeRef:e.sidebarNode,behavioralDirectRef:e.behavioralDirectRef,onTagClick:e.onTagClick,onRelatedItemClick:e.onRelatedItemClick,onLog:e.logTechCounter})})},t.prototype.tryUpdateDirect=function(){this.directStripe.current&&this.directStripe.current.renderDirect(),this.behavioralDirectRef.current&&this.behavioralDirectRef.current.renderDirect()},t.prototype.shouldShowContextDirectStripe=function(){var e=this.props,t=e.directSnippetStripeEnabled,n=e.directSnippetShown,r=this.props.config.directSnippetParams;return Boolean(t&&n&&r)},t.prototype.shouldShowBehaviouralDirectStripe=function(){var e=this.props,t=e.directStripeEnabled,n=e.directSnippetStripeEnabled,r=e.directSnippetShown,o=e.directSnippetStripeLoading;if(n&&(r||o))return!1;var i=this.props.config.directStripeParams;return Boolean(t&&i)},t.prototype.shouldShowDirecStripeStub=function(){var e=this.props,t=e.directStripeEnabled,n=e.directSnippetStripeEnabled,r=e.directSnippetStripeLoading,o=this.props.config.directSnippetParams;return Boolean(n&&r&&t&&o)},t.prototype.onTagClick=function(e,t){2===e.which||e.metaKey||e.ctrlKey||(e.preventDefault(),Object(w.a)().emit("location:change",{url:t}))},t.prototype.getDirectContainerId=function(){var e=this.props.config.directStripeParams;if(null===e||void 0===e?void 0:e.containerId)return null===e||void 0===e?void 0:e.containerId},t.prototype.getDirectStripeId=function(){var e=this.props.config.directStripeParams;return e?this.props.isPornoQuery?e.directIdAdult||"":e.directId:""},t.prototype.renderFooter=function(){var e=this,t=this.props,n=t.config,r=t.experiments,o=void 0===r?{}:r,a=n.directStripeParams,s=this.getActiveItemParams(),c=this.state.showCbirCrop,u=this.shouldShowContextDirectStripe(),l=this.shouldShowBehaviouralDirectStripe(),d=this.shouldShowDirecStripeStub(),p=a&&a.mod,f=this.getDirectStripeId(),h=this.getDirectContainerId();return i.a.createElement(I.ComponentRegistryConsumer,{id:Object($e.a)()},function(t){var n,r=t.Gallery;return i.a.createElement(i.a.Fragment,null,c&&i.a.createElement(_e,{onClose:e.onCbirCropEvent,onSearchClick:e.onCbirCropSearchEvent,target:"_self"}),i.a.createElement("div",{className:Tt("FooterContent",{hidden:c})},u&&i.a.createElement(Je,{type:"stripe",className:Tt("DirectSnippetStripe")}),l&&f&&i.a.createElement("div",{className:Tt("DirectStripeContainer",{mod:p,verticalGallery:o.verticalGallery})},i.a.createElement(Et.a,{directId:f,yandexuid:e.props.yandexuid,text:e.props.query,onClick:e.onDirectStripeClick,onRender:e.onDirectStripeShow,onHide:e.onDirectStripeHide,reqid:s.reqid||"",className:Tt("DirectStripe",{mod:p}),forwardRef:e.directStripe,getUniqId:h?(n=h,function(){return n}):void 0})),d&&i.a.createElement("div",{className:Tt("DirectStripeContainer",{mod:p})}),o.noBottomGallery?"":i.a.createElement(r,{clickOverHoverTime:o.clickOverHoverTime,clickOverHoverTimeNoScroll:o.clickOverHoverTimeNoScroll,forwardRef:e.gallery,selectedIdx:e.state.activeItemIdx,onClick:e.onGalleryClick,onScroll:e.onGalleryScroll,items:e.props.items})))})},t.prototype.renderLeftSidebar=function(){var e=this,t=this.props.experiments,n=void 0===t?{}:t;if(n.verticalGallery)return i.a.createElement(I.ComponentRegistryConsumer,{id:Object($e.a)()},function(t){var r=t.Gallery;return i.a.createElement(i.a.Fragment,null,n.verticalGalleryTitle&&i.a.createElement("div",{className:Tt("LeftSideblockTitle")},"Картинки по запросу"),i.a.createElement("div",{className:Tt("LeftSideblockContent"),ref:e.leftSidebarNode},i.a.createElement(r,{clickOverHoverTime:n.clickOverHoverTime,clickOverHoverTimeNoScroll:n.clickOverHoverTimeNoScroll,vertical:!0,forwardRef:e.gallery,selectedIdx:e.state.activeItemIdx,onClick:e.onGalleryClick,onScroll:e.onGalleryScroll,items:e.props.items})))})},t.prototype.previewSave=function(e){var t=this.getItemParamsByIdx(e);this.logTechCounter({method:"hitDelayed",__oldCounter__:Pt({path:"save",params:{vars:{"-pos":e}},reqid:t.reqid||""})})},t.prototype.onWheel=function(e){var t=this.gallery.current&&this.gallery.current.getNode();if(!(t&&t.current&&t.current.contains(e.target))){var n=this.sidebarNode.current;if(n&&!n.contains(e.target)){var r=this.leftSidebarNode.current;if(!r||!r.contains(e.target)){var o=Math.abs(e.deltaX)>Math.abs(e.deltaY)||!e.deltaY?e.deltaX:e.deltaY;o&&(e.deltaMode>0&&(o*=16),n.scrollTop+=o)}}}},t.prototype.onOpenItem=function(e){if(!(e.activeIdx<0)){this.open(e.activeIdx);var t=this.getItemParamsByIdx(e.activeIdx);this.triggerSelectItemEvent(t,{openedFromSerp:!e.initialLoading&&!e.historyLoading,initialLoading:Boolean(e.initialLoading),historyLoading:Boolean(e.historyLoading)})}},t.prototype.onNewItemSelected=function(e){var t=this;this.props.setCurrentItemIdx(e),this.state.showCbirCrop&&this.cbirCropClose(),this.state.activeItemIdx!==e&&this.setState({activeItemIdx:e},function(){var e=t.getActiveItemParams();t.triggerSelectItemEvent(e)})},t.prototype.triggerSelectItemEvent=function(e,t){e&&Object(w.a)().emit(_t.selectItem,{itemParams:e,initialLoading:Boolean(t&&t.initialLoading),historyLoading:Boolean(t&&t.openedFromSerp),openedFromSerp:Boolean(t&&t.openedFromSerp)})},t.prototype.onGalleryScroll=function(){this.loadNextPageIfNeeded()},t.prototype.onFullscreenEnter=function(){this.isFullscreenMode=!0,this.hitFullscreenCounter("open"),Object(w.a)().emit(_t.fullscreenEnter)},t.prototype.onFullscreenExit=function(){this.isFullscreenMode=!1,this.hitFullscreenCounter("close"),Object(w.a)().emit(_t.fullscreenExit)},t.prototype.onFullscreenTitleClick=function(){this.onFullscreenTitleDomainClick("/image/new/preview/site")},t.prototype.onFullscreenDomainClick=function(){this.onFullscreenTitleDomainClick("/image/new/preview/duplicates/url")},t.prototype.onFullscreenTitleDomainClick=function(e){var t=this.props.reqid,n=this.getActiveItemParams(),r=n.isMarketIncut,o=n.pos,i=n.commercialSource,a=n.snippet,s=r?"/commercial/"+i:"";this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",redirUrl:a.url,path:""+e+s,pos:s?o:"",vars:{"-pos":o},reqid:n.reqid||t||""},node:{href:a.redirUrl}})},t.prototype.onFullscreenStartAutoplay=function(){this.hitSlideshowCounter("play")},t.prototype.onFullscreenStopAutoplay=function(){this.hitSlideshowCounter("stop")},t.prototype.onGlobalDragStart=function(e){var t=e.target;t&&("IMG"===t.tagName||t.firstElementChild&&"IMG"===t.firstElementChild.tagName)?this.setState({globalDragging:!0}):(e.stopPropagation(),e.preventDefault())},t.prototype.onGlobalDragEnd=function(){this.setState({globalDragging:!1})},t.prototype.onTrimmerStart=function(e){this.hitTrimmerCounter("",{},{href:e})},t.prototype.onTrimmerChange=function(e,t,n){var r={"-crop":encodeURIComponent([e.point1.x,e.point1.y,e.point2.x,e.point2.y].join(";"))};this.hitTrimmerCounter(t,r,{href:n})},t.prototype.hitFullscreenCounter=function(e){var t=this.getActiveItemParams();this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/fullscreen/"+e,reqid:t.reqid||""}})},t.prototype.hitSlideshowCounter=function(e){var t=this.getActiveItemParams(),n={};t&&(n["-pos"]=t.pos),this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",vars:n,path:"/image/new/preview/slideshow/"+e,reqid:t.reqid||""}})},t.prototype.hitTrimmerCounter=function(e,t,n){var r=this.getActiveItemParams(),o=xt({},t||{});r&&(o["-pos"]=r.pos),this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",vars:o,path:"/image/new/preview/similar"+(e?"/"+e:""),reqid:r.reqid||""},node:n})},t.prototype.loadNextPageIfNeeded=function(){if(this.gallery.current){var e=this.gallery.current.getScrollPosition();if(e)e.rightEdgeOffset<e.currentPosition+this.galleryItemsLoadEventOffset&&Object(w.a)().emit(_t.listOut)}},t.prototype.getActiveItemParams=function(){return this.getItemParamsByIdx(this.state.activeItemIdx)},t.prototype.getItemParamsByIdx=function(e){return this.props.items[e]||{}},t.prototype.onRelatedItemClick=function(e,t){if(this.props.rimSelectedIdx!==e){var n=this.getActiveItemParams(),r=xt(xt({},t),{isRim:!0,parentPos:n&&n.pos});Object(w.a)().emit(_t.rimClick,r)}},t.prototype.logTechCounter=function(e){e&&this.props.logTech&&this.props.logTech(e)},t.prototype.sendPrevCounter=function(e,t,n){e!==this.state.activeItemIdx&&this.sendDirectionCounter(e,"prev",n)},t.prototype.sendNextCounter=function(e,t,n){e!==this.state.activeItemIdx&&this.sendDirectionCounter(e,"next",n)},t.prototype.sendDirectionCounter=function(e,t,n){var r=this.getItemParamsByIdx(e);if(r&&e!==this.state.activeItemIdx){this.isFullscreenMode&&!n&&(n="slideshow");var o=r.preview,i=r.isMarketIncut,a=r.commercialSource||"market",s=i?"/commercial/"+a:"",c=i?"commercial/"+a:r.freshness,u={"-pos":r.pos};if("keyboard"===n||"slideshow"===n)return u["-direction"]=t,void this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/serp/results/"+n+"/"+c,pos:u["-pos"],vars:u,reqid:r.reqid},node:{href:o[0].url}});this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/preview/"+t+"/mouse"+s,vars:u,reqid:r.reqid},node:{href:o[0].url}})}},t.prototype.onCbirCropEvent=function(e){this.state.showCbirCrop&&this.hitTrimmerCounter("cancel"),Object(w.a)().emit(_t.cbirCrop),this.setState({showCbirCrop:!this.state.showCbirCrop}),e.stopPropagation()},t.prototype.onCbirCropSearchEvent=function(e){e.preventDefault(),this.hitTrimmerCounter("crop"),Object(w.a)().emit("location:change",{url:e.currentTarget.href})},t.prototype.cbirCropClose=function(){this.setState({showCbirCrop:!1})},t.prototype.onCloseEventKeyboard=function(e){this.isFullscreenMode||this.onCloseEvent("keyboard",e)},t.prototype.onCloseEventHistory=function(){this.onCloseEvent("history")},t.prototype.onCloseEvent=function(){if(this.state.isVisible){var e=this.getActiveItemParams(),t=Mt(arguments,2),n=t[0],r=t[1];if(Object(w.a)().emit(_t.beforeClose,{source:n}),this.setState({isVisible:!1,activeItemIdx:-1}),this.state.showCbirCrop&&this.cbirCropClose(),Object(w.a)().emit(_t.close),"string"===typeof n&&("mouse"===n||"keyboard"===n||"paranja"===n)){var o={"-place":n};"paranja"===n&&(o["-x"]=r.clientX,o["-y"]=r.clientY,o["-screenW"]=window.innerWidth,o["-screenH"]=window.innerHeight),this.logTechCounter({method:"hitDelayed",__oldCounter__:Pt({path:"close",params:{vars:o},reqid:e.reqid||""})})}}},t.prototype.onPreviewShowEvent=function(e,t){},t.prototype.onGalleryClick=function(e){var t=this.getItemParamsByIdx(e);this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/serp/results/"+t.counterPath,pos:e,vars:{"-click_source":"preview"},reqid:t.reqid},node:{href:t.imgHref}}),this.viewer.current&&this.viewer.current.switchToItem(e)},t.prototype.onDirectStripeShow=function(){var e=this.getActiveItemParams();this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/preview/commercial/show/direct",vars:{"-type":"stripe","-page":e.page,"-pos":e.pos,"-row":e.row,"-col":e.col},reqid:e.reqid||""}})},t.prototype.onDirectStripeClick=function(){var e=this.getActiveItemParams();this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/preview/commercial/click/direct",vars:{"-type":"stripe","-pos":e.pos,"-row":e.row,"-col":e.col,"-page":e.page},reqid:e.reqid||""}})},t.prototype.onDirectStripeHide=function(){var e=this.getActiveItemParams();this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/preview/commercial/hide/direct",vars:{"-type":"stripe","-pos":e.pos,"-row":e.row,"-col":e.col,"-page":e.page},reqid:e.reqid||""}})},t}(i.a.Component),Lt=function(){return(Lt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},At=Object(s.withBaobab)({name:"ImagesViewer",events:{logTech:Object(s.logTech)("",function(e,t){return t[0]})}})(Dt),Bt=Object(E.d)(function(e){return function(t){return e(Object(g.k)(t))}}),Ut=Object(u.d)(function(e,t,n){var r=e.globalContext,o=Object(d.b)(e),i=n.experiments&&n.experiments.directSnippetStripeDisabled;return{tld:e.globalContext.tld,yandexuid:e.globalContext.yandexuid,rimSelectedIdx:e.rimSelectedIdx,reqid:e.globalContext.reqid,query:e.globalContext.query,isCommercialQuery:e.globalContext.isCommercialQuery,isCommercialEnabled:e.globalContext.isCommercialEnabled,items:e.images,shownImage:Object(S.m)(e),isPornoQuery:Boolean(r.isQueryPorn),directStripeEnabled:Object(d.j)(e),directSnippetStripeEnabled:Object(d.i)(e)&&!i,config:e.config,currentItemIdx:e.currentItemIdx,setCurrentItemIdx:Bt(t),directSnippetShown:Boolean(o),directSnippetStripeLoading:void 0===o,experiments:n.experiments,stretchSideblock:Boolean(Object(S.o)(e))}})(function(e){return i.a.createElement(C.b,{value:e.counters},i.a.createElement(At,Lt({},e)))}),Ft=n(45),Ht=n(114),qt=(n(661),function(){return(qt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),zt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Wt=Object(Ft.a)("BehavioralDirectContainer",[Ht.a]),Gt=Object(a.compose)(Object(u.d)(function(e){var t=e.config.behavioralDirectSnippetParams,n=Object(S.e)(e);if(!t)return{};var r=t.mode;if((r===y.e.withoutDSnMarket||r===y.e.withoutMarket)&&n&&n.marketSnippet)return{};var o=n&&Object(d.e)(e,n);return r!==y.e.withoutDSnMarket&&r!==y.e.withoutDS||!(!o||o.data&&o.data[0])?{directId:t.directId,height:t.height,mode:t.mode,yandexuid:e.globalContext.yandexuid,text:e.globalContext.query,reqid:n&&n.reqid||"",visible:!0}:{}}),Object(Oe.a)(["directId"]))(function(e){var t=e.visible,n=e.height,r=zt(e,["visible","height"]),i=o.useMemo(function(){return{height:void 0!==n?n+"px":void 0,display:t?"block":"none"}},[n,t]);return o.createElement(Et.a,qt({},r,{className:Wt,style:i,fixWidth:!0}))}),Vt=n(375),Yt=n(20),Kt=n(173),Xt=n(182),Qt=n(133),Jt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zt=function(e){function t(t,n,r){var o=e.call(this,n,r)||this;return o.loadStarted=!1,o.item=t,o.startLoading(),o}return Jt(t,e),t.prototype.getUrlFromItem=function(){if(!this.loadStarted)return this.loadStarted=!0,this.item.url},t.prototype.getResultData=function(){return this.item},t}(Qt.a),$t=function(){function e(e){this.currentWorkersData=[],this.imagesCache={},this.onImageLoaded=e&&e.onImageLoaded,this.onImageError=e&&e.onImageError}return e.prototype.load=function(e,t){var n=this;if(void 0===t&&(t=!0),!this.imagesCache[e.url]&&!this.currentWorkersData.some(function(t){return t.item.url===e.url})){var r;t&&this.stop();r={item:e,loader:new Zt(e,function(e,t){n.resultHandler(e,t,r)},{itemTimeout:15e3,timeout:9e4,onImageError:this.onImageError})},this.currentWorkersData.push(r)}},e.prototype.precache=function(e){var t=this;e.forEach(function(e){return t.load(e,!1)})},e.prototype.stop=function(){return this.currentWorkersData.length&&(this.currentWorkersData.forEach(function(e){return e.loader.stop()}),this.currentWorkersData.length=0),this},e.prototype.removeItemFromQueue=function(e){var t=this.currentWorkersData.indexOf(e);-1!==t&&this.currentWorkersData.splice(t,1)},e.prototype.resultHandler=function(e,t,n){var r=n.item;this.removeItemFromQueue(n),this.imagesCache[r.url]=!0,this.onImageLoaded&&this.onImageLoaded(r,t)},e}(),en=n(28),tn=n(267),nn=n.n(tn),rn=n(65),on=n(347),an=(n(566),Object(a.withBemMod)(Object(en.b)(),{type:"moreVertical"})),sn=n(433),cn=n(434),un=n(248),ln=(n(562),Object(_.cn)("ExtraLinksPopup")),dn=Object(a.compose)(sn.a,cn.a)(un.a),pn=function(e){var t=e.visible,n=e.anchor,r=e.scope,o=e.onClose,a=e.children;return i.a.createElement(dn,{className:ln(),target:"anchor",view:"default",zIndex:1001,visible:t,anchor:n,scope:r,onClose:o},a)},fn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},hn=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(fn(arguments[t]));return e},mn=function(){function e(){}return e.show=function(e){Object(w.a)().emit("feedback:show",{urls:function(e){var t,n=((t={})[vn(e.preview[0])]=!0,t);e.imgHref&&(n[e.imgHref]=!0);return hn(e.dups,e.preview).forEach(function(e){n[vn(e)]=!0}),Object.keys(n)}(e)})},e}();function vn(e){return e.origin?e.origin.url:e.url}n(564);var bn=Object(a.withBemMod)(Object(en.b)(),{type:"errorOutline"}),gn=(n(563),Object(_.cn)("ExtraLinksItem")),yn=Object(o.memo)(function(e){var t=e.title,n=e.icon,r=e.onClick,o=e.className;return i.a.createElement("button",{className:gn(null,[o]),onClick:r},i.a.createElement("span",{className:gn("Icon")},n),t)}),On=n(671),wn=bn(en.a),jn=A()(On),Cn=Object(_.cn)("ExtraLinksComplain"),En=Object(o.memo)(function(e){var t=e.imageItem,n=e.onClick,r=void 0===n?j.a:n,a=Object(o.useCallback)(function(){mn.show(t),r()},[t,r]),s=jn("Пожаловаться",{context:"Надпись на кнопке, позволяющей пожаловаться на содержимое страницы или конкретную картинку"}),c=i.a.createElement(wn,{size:"s",type:"errorOutline"});return i.a.createElement(yn,{className:Cn(),title:s,icon:c,onClick:a})}),Sn=(n(565),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),_n=Object(_.cn)("ExtraLinks"),kn=Object(a.compose)(an,on.a)(en.a),Pn=Object(o.memo)(function(e){var t=e.scope,n=e.scrollArea,r=e.imageItem,a=Object(o.useRef)(null),s=Sn(Object(rn.a)(!1),3),c=s[0],u=s[1],l=s[2];return nn()(l,[r]),Object(o.useEffect)(function(){if(c&&n&&n.current){var e=n.current;return e.addEventListener("scroll",l),function(){e.removeEventListener("scroll",l)}}},[c,n,l]),i.a.createElement("div",{className:_n()},i.a.createElement("div",{className:_n("Icon"),onClick:c?l:u,ref:a},i.a.createElement(kn,{size:"m",type:"moreVertical",tone:"gray"})),i.a.createElement(pn,{visible:c,onClose:l,anchor:a,scope:t},i.a.createElement(En,{onClick:l,imageItem:r})))}),In=n(380),xn=n(85),Mn=n(243),Nn=n(33),Tn=n(130),Rn=(n(574),Object(a.compose)(Object(I.withRegistry)(In.a))(function(e){var t=e.unfocused,n=e.vertical,r=e.selectedIdx,a=e.onClick,s=e.clickOverHoverTime,c=e.clickOverHoverTimeNoScroll,u=e.onScroll,l=e.forwardRef,d=e.items,p=Object(I.useComponentRegistry)(Object(Tn.a)()),f=p.Gallery,h=p.Thumb,m=Object(o.useMemo)(function(){return d.map(function(e){var t,n;return i.a.createElement(h,{className:Object(Tn.a)("Thumb"),fit:"square",width:null===(t=e.thumb.size)||void 0===t?void 0:t.w,height:null===(n=e.thumb.size)||void 0===n?void 0:n.h,src:e.thumb.url,targetSize:80,stickers:{bottomRight:"market"===e.commercialSource?i.a.createElement(Nn.a,{className:Object(Tn.a)("ThumbMarketIcon"),type:"market-logo"}):null},key:e.id})})},[d]);return i.a.createElement(f,{className:Object(xn.a)({unfocused:t,vertical:n},[Object(Tn.a)()]),forwardRef:l,selectedIdx:r,fixedPositionOnUpdate:!0,edgeCentered:"left",onClick:a,clickOverHoverTime:s,clickOverHoverTimeNoScroll:c,vertical:n,onScroll:u,autoScroll:Mn.b.fijiStyle},m)})),Dn=n(192),Ln=n(165),An=n(374),Bn=(n(619),Object(a.compose)(Object(u.d)(Ln.b),Object(Oe.a)(["image"]),An.b)(Dn.a)),Un=n(258),Fn=n(100),Hn=n(167),qn=function(){return(qn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},zn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Wn=A()(Hn),Gn="openImagePopupShown";var Vn,Yn=(Vn=Un.a,function(e){var t=zn(e,[]),n=t,r=i.a.useCallback(function(e,n,r){e.preventDefault(),e.stopPropagation(),t.isOpenImageUnauthPopupEnabled&&t.showUnauthPopup&&t.showUnauthPopup(e,Gn,{strictShow:t.isOpenImageUnauthPopupStrictEnabled,loginUrl:Object(Fn.a)(t.tld||"ru","images_viewer_open_image"),registrationUrl:void 0,skipUrl:n,skipText:Wn("Не сейчас",{context:"Кнопка отказа от залогина на сервисе. Кнопка закрывает попап."}),baobabLogOnClose:"object"===typeof r?r:void 0,onCloseClick:function(o){t.isOpenImageUnauthPopupEnabled&&(window.open(n,"_blank"),"function"===typeof r&&r(e),o&&(o.preventDefault(),o.stopPropagation()))}})},[t]);return t.isOpenImageUnauthPopupEnabled&&t.showUnauthPopup&&(n=qn(qn({},n),{onOpenButtonClick:r,onSizeClick:r})),i.a.createElement(Vn,qn({},n))}),Kn=n(254),Xn=n(257),Qn=function(){return(Qn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Jn=A()(Hn);var Zn=function(e){return function(t){var n=t.isDiskShareEnabled,r=t.diskShareDirectoryName,o=Jn("Мои Яндекс.Картинки",{context:"Название папки на Яндекс.Диске, куда загружаются картинки"});return i.a.createElement(e,Qn({},t,{isDiskShareEnabled:n,diskShareDirectoryName:r||o}))}}(Xn.a),$n=function(){return($n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},er=A()(Hn),tr="shareDiskShown";var nr=function(e){return function(t){var n=t.isDiskShareEnabled,r=t.isDiskShareUnauthPopupEnabled,o=t.showUnauthPopup,a=t.tld,s=void 0===a?"ru":a,c=i.a.useCallback(function(){r&&o&&o(null,tr,{loginUrl:Object(Fn.a)(s,"images_disk"),registrationUrl:Object(Fn.b)(s,"images_disk"),title:er("Войдите в Яндекс, чтобы сохранить картинку",{context:'Надпись в диалоговом окне с логином при клике на кнопку "сохранить на Яндекс.Диск"'})})},[r,o,s]);return i.a.createElement(e,$n({},t,{requestAuthorization:c,isDiskShareEnabled:n}))}}(Zn),rr=new I.Registry({id:Object($e.a)()});rr.set("MMSidebar",Vt.a),rr.set("Gallery",Rn);var or=new I.Registry({id:Object(Xt.a)()});or.set("ThumbsLoader",$t);var ir=new I.Registry({id:Object(Ft.a)()});ir.set("ExtraLinks",Pn),ir.set("BehavioralDirectSnippet",Gt),ir.set(Object(Yt.a)(),Bn);var ar=new I.Registry({id:Kt.a.id});ar.set(Object(Yt.a)("OpenImage"),Yn),ar.set(Object(Yt.a)("SearchByImage"),Kn.a),ar.set(Object(Yt.a)("Share"),nr);var sr=n(378),cr=i.a.createContext({}),ur=n(197),lr=n(365),dr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pr=function(){return(pr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},fr=["DirectLoaderHighComm","DirectLoaderLowComm","DirectLoaderAdultHighComm","DirectLoaderAdultLowComm"],hr=function(e){function t(t){var n=e.call(this,t)||this;return n.imageViewerAppRef=Object(o.createRef)(),n.directLoadersConfig={},n.reportedBadImages={},n.inited=!1,n.onViewerStateChange=n.props.integrateState?function(e,t){window.Ya.Images.onViewerStateChange&&window.Ya.Images.onViewerStateChange(e,t)}:void 0,n.onUpdateImages=n.onUpdateImages.bind(n),n.setImageStoreProvider=n.setImageStoreProvider.bind(n),n.updateGlobalContext=n.updateGlobalContext.bind(n),n.getBadImageReporter=n.getBadImageReporter.bind(n),O.a&&Object(w.a)().emit("i-global:get-params",n.updateGlobalContext),n.props.directAdvMachineMode&&n.props.directAdvMachineMode.split(":").forEach(function(e,t){"1"===e&&(n.directLoadersConfig[fr[t]]=b)}),n.state={initialImageStoreState:n.getInitialStoreState()},n}return dr(t,e),t.prototype.getInitialStoreState=function(){var e=this.props.viewerData.config,t=this.getDirectParamsWithEncryption(e);return{images:[],config:pr(pr({},e),{directSnippetParams:t,imagesLoadingParams:pr(pr({},e.imagesLoadingParams),{onImageError:this.getBadImageReporter("2055"),onImageFileSizeError:this.getBadImageReporter("73007"),onImageSizeError:this.getBadImageReporter("72681"),onRimLoadingError:this.getBadImageReporter("73781")})}),experiments:this.props.viewerData.experiments,loadedPagesCount:1,currentItemIdx:this.props.currentItemIdx,globalContext:pr({tld:"ru",query:"",yandexuid:"",lr:0,reqid:"",lang:""},this.nextContext)}},t.prototype.componentDidMount=function(){Object(w.a)().on("i-global:update",this.updateGlobalContext).on(y.f.fill,this.onUpdateImages),Object(w.a)().emit(y.f.mounted)},t.prototype.componentWillUnmount=function(){Object(w.a)().off("i-global:update",this.updateGlobalContext).off(y.f.fill,this.onUpdateImages)},t.prototype.getDirectParamsWithEncryption=function(e){var t=e.directSnippetParams;if(t)return pr(pr({},t),{encryptUrl:this.isEncryptionConfigAvailable()?this.encryptCountUrl:void 0,safeRequest:this.getSafeRequest()})},t.prototype.getSafeRequest=function(){if(O.a){var e=BEM.blocks["direct-utils"].getSafeMakeCounterRequest();if(e)return function(t,n,r){var o={},i=!1;return(null===n||void 0===n?void 0:n.jsonp)&&(o.jsonp=!0),o.onSuccess=function(e){var t;i=!0,null===(t=null===r||void 0===r?void 0:r.successCallback)||void 0===t||t.call(r,e)},o.onFinish=function(){var e;i||null===(e=null===r||void 0===r?void 0:r.failureCallback)||void 0===e||e.call(r)},e(t,o),{abort:j.a}}}},t.prototype.onUpdateImages=function(e,t){var n=this.imageStoreProvider,r=Object(lr.a)(e);n&&(t?n.dispatch(Object(g.l)(r)):n.dispatch(Object(g.d)(r)))},t.prototype.updateGlobalContext=function(e){var t=this.imageStoreProvider,n={tld:e.tld,query:e.query,yandexuid:e.yandexuid,lr:Number(e.lr),reqid:e.reqid,lang:e.lang,isQueryPorn:Boolean(e.isPornoQuery),cm2:Number(e.cm2),QCommercialProb:Number(e.QCommercialProb),QCommercialProbV2:Number(e.QCommercialProbV2),vcomm:Number(e.vcomm),isCommercialEnabled:Boolean(e.isCommercialEnabled),isCommercialQuery:Boolean(e.isCommercialQuery),isThumbsCommercialSnippetEnabled:Boolean(e.isThumbsCommercialSnippetEnabled)};t?t.dispatch(Object(g.o)(n)):this.nextContext||(this.nextContext=n)},t.prototype.isEncryptionConfigAvailable=function(){if(!O.a)return!1;var e=BEM.blocks["direct-utils"];return e&&e.isConfigAvailable()},t.prototype.encryptCountUrl=function(e){return BEM.blocks["direct-utils"].tagNEncryptUrl(e)},t.prototype.getBadImageReporter=function(e){var t=this;return function(n){t.reportedBadImages[n]||(t.reportedBadImages[n]=!0,window.Ya.Images.errcnt({src:n},e))}},t.prototype.shouldRender=function(){return Boolean(O.a&&this.state&&this.state.initialImageStoreState)},t.prototype.render=function(){if(!this.shouldRender())return null;var e=this.props;return i.a.createElement(u.a,pr({forwardRef:this.setImageStoreProvider},this.directLoadersConfig,{initialState:this.state.initialImageStoreState,onStateChange:this.onViewerStateChange}),i.a.createElement(cr.Provider,{value:this.props.viewerData.experiments||{}},i.a.createElement(c.FavoritesContextProvider,null,i.a.createElement(Ut,pr({},e.viewerData,{onLog:this.props.onLog})))))},t.prototype.setImageStoreProvider=function(e){this.imageStoreProvider=e,this.props.integrateState&&(window.Ya.Images.getViewerState=e?function(){return e.getState()}:void 0)},t}(o.Component),mr="/clck/jclck",vr="/*//",br=Object(a.compose)(function(e){return function(t){return i.a.createElement(e,pr({baobab:{ui:t.ui,service:t.service,prefix:t.reqid,senderParams:{hrefPrefix:t.trueBaobab?mr:"",hrefPostfix:vr}}},t))}},Object(s.withBaobabRoot)({name:"$page",attrs:{service:"images",ui:"desktop"},events:{onLog:Object(s.logClick)(function(e,t){return t[0]})}},ur.a,ur.b),function(e){return function(t){var n=i.a.useMemo(function(){return t.isPumpkin?Object(I.withRegistry)(sr.a,rr)(e):Object(I.withRegistry)(rr,ir,ar,or)(e)},[t.isPumpkin]);return i.a.createElement(n,t)}}),gr=br(hr)},324:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(448),n(449);var r={color:"yandex-default",root:"legacy"}},325:function(e,t,n){"use strict";n.d(t,"a",function(){return de});var r,o=n(0),i=n.n(o),a=n(1),s=n(7),c=n.n(s),u=n(47),l=n(6),d=n(31);!function(e){e.callouts="callouts",e.sitelinks="sitelinks",e.contacts="contacts",e.rating="rating"}(r||(r={}));var p=n(11),f=n(298),h=n(230),m=n(79),v=n(327),b=n(5),g=n(44),y=(n(462),Object(p.a)("Thumb")),O=o.memo(function(e){var t=e.image,n=t&&t.url,r=o.useMemo(function(){return{name:"ThumbLink",attrs:e.logNode&&e.logNode.attrs,events:{onClick:Object(b.logClick)(e.counter)}}},[e.counter,e.logNode]);return o.createElement("div",{className:Object(p.a)("ThumbContainer",{position:e.imagePosition}),style:{height:Math.min(Math.max(t.height,50),90)+"px"}},o.createElement(m.a,{className:Object(p.a)("ThumbLink",[y]),style:{width:t.width+"px",height:t.height+"px"},url:e.url,logNode:r},o.createElement("img",{src:n,key:n,alt:e.title,style:{width:t.width+"px",height:t.height+"px"}})))}),w=Object(g.a)(["image","imagePosition","url"])(O),j=n(87),C=(n(461),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),E=Object(h.a)(m.a),S=c()(j),_=Object(p.a)("Description"),k=Object(p.a)("AddItem"),P=Object(p.a)("AddItems"),I=Object(p.a)("ShortenText"),x=Object(p.a)("ShowMore"),M=function(e){var t=e.image,n=e.imagePosition,r=e.url,i=C(o.useState(Boolean(e.cutDescription)),2),a=i[0],s=i[1],c=o.useCallback(function(){return s(!1)},[s]),u=0,l=e.additions&&e.additions.length?o.createElement("div",{className:P},e.additions.map(function(t,n){return u+=t.length,o.createElement("span",{key:t,className:e.highlightFirstItem&&0===n?Object(p.a)("AddItem",{highlight:!0}):k},t)})):null;return a&&l&&u>35&&(l=o.createElement("div",{className:I},l,o.createElement(E,{onClick:c,className:x,theme:"normal",logNode:{name:"contact",events:{onClick:Object(b.logClick)(e.readMoreCounter)}}},S("Читать ещё",{context:"Надпись на кнопке, показывающей полный текст рекламного объявления"})))),o.createElement("div",{className:_},o.createElement(w,{image:t,imagePosition:n,url:r,title:e.title||"",counter:e.thumbCounter}),o.createElement(v.a,{start:"<hl>",end:"</hl>"},e.text),l)},N=n(297),T=n(82),R=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},D=c()(j),L=Object(h.a)(m.a),A=Object(p.a)("ContactPhone",[Object(p.a)("ContactData")]),B=Object(p.a)("ContactData"),U=o.memo(function(e){var t=e.telNum,n=R(o.useState(!0),2),r=n[0],i=n[1],a=o.useCallback(function(){return i(!1)},[i]),s=o.useMemo(function(){return Object(T.d)(t)+" "+D("Показать",{context:"Надпись на кнопке, показывающей полный номер телефона"})},[t]),c=o.useMemo(function(){return{name:"contact",events:{onClick:Object(b.logClick)(e.counter)},attrs:e.logNode&&e.logNode.attrs}},[e.counter,e.logNode]);return r?o.createElement(o.Fragment,null,o.createElement(L,{onClick:a,className:A,theme:"normal",logNode:c},s),o.createElement("br",null)):o.createElement(o.Fragment,null,o.createElement("span",{className:B},t),o.createElement("br",null))}),F=(n(458),Object(p.a)("Contact")),H=Object(p.a)("Contacts",[p.b]),q=Object(p.a)("ContactData"),z=Object(h.a)(m.a),W=function(e){var t=o.useMemo(function(){return{name:"contact",events:{onClick:Object(b.logClick)(e.counter)},attrs:e.logNode&&e.logNode.attrs}},[e.counter,e.logNode]);return o.createElement("div",{className:H},o.createElement(z,{className:F,theme:"normal",logNode:t,url:e.vcardUrl},"Контакты"),e.telNum&&(e.semiHidden?o.createElement(U,{key:e.telNum,telNum:e.telNum,counter:e.showContactCounterClick}):o.createElement("span",{className:q},e.telNum)),e.info.map(function(e){return o.createElement("span",{key:e,className:q},e)}))},G=n(2),V=n(105),Y=(n(456),Object(a.withBemMod)(V.b,{size:"s"},function(e){return function(t){return i.a.createElement(e,Object(G.__assign)({starSize:12},t))}})),K=Object(V.a)("Stars"),X=Object(V.a)("Half"),Q=Object(V.a)("Star"),J=Object(V.a)("Rest"),Z=function(e){var t=e.size,n=e.base,r=Math.min(e.value,n),o=10*Math.round(10*r/n),a=o/10%2===1,s=5*t+4,c=Math.round(s/100*o),u=s-c-(a?t/2:0),l=s-u;return i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:K,style:{width:l+"px"}},i.a.createElement("span",{className:X,style:{width:l+"px"}}),i.a.createElement("span",{className:Q,style:{width:c+"px"}})),i.a.createElement("span",{className:J,style:{width:u+"px"}}))},$=(n(457),n(455),Object(a.compose)(Y)(function(e){return i.a.createElement("span",{className:Object(V.a)(null,[e.className])},i.a.createElement(Z,{value:e.value,base:e.base,size:e.starSize||12}),e.children)})),ee=c()(j),te=Object(p.a)("RatingLine",[p.b]),ne=Object(p.a)("Rating"),re=o.memo(function(e){var t=e.value;return o.createElement("div",{className:te},o.createElement($,{className:ne,value:t,base:5,size:"s"}),ee("Магазин на маркете",{context:"Подпись к оценке данного магазина на сервисе Яндекс.Маркет"}))}),oe=(n(453),function(){return(oe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),ie=Object(p.a)("Sitelink",[p.b]),ae=Object(p.a)("Sitelink"),se=o.memo(function(e){for(var t=[],n=e.sitelinks,r=e.oneLine,i=r?1:2,a=r?4:2,s=Math.min(Math.ceil(n.length/i),a),c=0,u=o.useCallback(function(t){return{name:"sitelink",attrs:e.logNode&&e.logNode.attrs,events:{onClick:Object(b.logClick)(oe(oe({},e.counter),{node:{href:t}}))}}},[e.counter,e.logNode]),l=0;l<n.length&&c<i;l++){var d=n[l],f=t[c]||(t[c]=[]),h=d.url;f.push(o.createElement(m.a,{className:r?ae:ie,theme:"normal",logNode:u(h),url:h,key:f.length},d.title)),f.length>=s&&c++}var v=1===t.length;return t.length?o.createElement("div",{className:Object(p.a)("Sitelinks",{ontop:e.ontop},r?void 0:[p.b])},r?t[0]:t.map(function(e,t){return o.createElement("div",{className:Object(p.a)("SitelinkColumn",{wide:v}),key:t},e)})):null}),ce=n(296),ue=(n(452),function(){return(ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),le=Object(s.i18nRaw)(j),de=Object(a.withBemMod)(Object(p.a)(),{type:"default"},function(e){return function(t){var n=t.hiddenElements,i=void 0===n?{}:n,a=t.ratingPosition,s=t.favicon,c=t.reqid,p=t.ads,h=t.pos,m=o.useCallback(function(e){return!i[e]},[i]),v=Object(d.c)();if(!p)return null;var b=p.url,g=p.body,y=p.domain,O=p.title,w=p.warning,j=p.age,C=p.path,E=p.image,S=p.pathUrl,_=p.telNum,k=p.region,P=p.metro,I=p.workingTime,x=p.vcardUrl,R=p.sitelinks,D=p.marketRating,L=m(r.callouts)?p.callouts:[],A=b||"",B=x||"",U=S||"",F=P&&le("м.{space}{station}",{context:'Сокращениие от слова "метро", для обозначения станции метро, например, "м. Комсомольская". space - пробельный символ, station - название станции',station:P,space:" "}),H=F&&F.join(""),q=O;t.calloutAsATitle&&L&&L.length&&(q+=" "+L[0],L=L.slice(1));var z=t.optionalDisclaimer&&!Object(T.e)(w)?void 0:Object(T.c)(w,j),G=t.optionalDisclaimer?Object(T.a)(L,w,j):L,V=L&&L.length>0&&t.highlightCallout,Y=[H,k,I].filter(function(e){return"string"===typeof e&&""!==e}),K=v&&v.direct,X=t.upliftSitelinks,Q=!t.upliftSitelinks&&t.advanced,J=m(r.sitelinks)&&t.advanced&&R&&R.length>0&&(X||Q),Z=a===u.b.top,$=a===u.b.bottom&&t.advanced,ee=m(r.rating)&&void 0!==D&&D>=0&&(Z||$),te=m(r.contacts)&&t.advanced&&Y&&Y.length>0,ne=J?o.createElement(se,{counter:K&&Object(l.b)(null===K||void 0===K?void 0:K.sitelink,{"-pos":h},{domain:y,pos:h,reqid:c}),logNode:K&&Object(l.a)(null===K||void 0===K?void 0:K.sitelink),oneLine:t.unifiedV1,ontop:t.upliftSitelinks,sitelinks:R}):null,oe=o.createElement(ce.a,ue({counter:K&&Object(l.b)(null===K||void 0===K?void 0:K.path,{"-pos":h},{domain:y,pos:h,reqid:c},{href:A}),labelHighlight:t.labelHighlight,logNode:K&&Object(l.a)(null===K||void 0===K?void 0:K.path)},{url:A,pathUrl:U,domain:y,path:C,favicon:s})),ie=ee&&o.createElement(re,{value:D}),ae=te&&o.createElement(W,{counter:K&&Object(l.b)(null===K||void 0===K?void 0:K.contacts,{"-pos":h},{domain:y,pos:h,reqid:c},{href:B}),logNode:K&&Object(l.a)(null===K||void 0===K?void 0:K.contacts),vcardUrl:B,telNum:_,info:Y,semiHidden:t.semiHiddenContacts,showContactCounterClick:K&&Object(l.b)(null===K||void 0===K?void 0:K.showContact,{"-pos":h},{domain:y,pos:h,reqid:c},{href:B})}),de=z&&z.map(function(e){return o.createElement(N.a,{text:e,key:e})});return o.createElement(e,ue({},t,{counter:K&&Object(l.b)(null===K||void 0===K?void 0:K.shown,{"-pos":h},{domain:y,pos:h,reqid:c},{href:A})}),o.createElement(f.a,{counter:K&&Object(l.b)(null===K||void 0===K?void 0:K.title,{"-pos":h},{domain:y,pos:h,reqid:c},{href:A}),bold:t.titleBold,labelHighlight:"title"===t.labelHighlight,logNode:K&&Object(l.a)(null===K||void 0===K?void 0:K.title),url:A,title:q}),X&&ne,oe,Z&&ie,o.createElement(M,{key:g,text:g,title:q,url:A,additions:t.advanced?G:void 0,image:t.advanced?E:void 0,imagePosition:t.advanced?t.imagePosition:void 0,thumbCounter:t.advanced?null===K||void 0===K?void 0:K.thumb:void 0,highlightFirstItem:V,cutDescription:t.cutDescription,readMoreCounter:null===K||void 0===K?void 0:K.readMore}),de,t.advanced&&o.createElement(o.Fragment,null,ae,$&&ie,Q&&ne))}})},327:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n.n(r),i=n(127),a=n(86);var s=o.a.memo(function(e){return o.a.createElement(o.a.Fragment,null,Object(i.markup)(e.children,function(e){var t={};return(e.end||e.start)&&(t.delimiters={start:e.start||i.HIGHLIGHT_OPEN,end:e.end||i.HIGHLIGHT_CLOSE}),e.highlighter&&(t.highlighter=e.highlighter),e.textPreprocessor?t.textPreprocessor=e.textPreprocessor:e.ignoreHTMLEntities||(t.textPreprocessor=a.decodeHTMLEntities),t}(e)))})},328:function(e,t,n){},33:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=n(4),i=(n(575),Object(o.cn)("MMIcon")),a=function(e){var t=e.type,n=e.className;return r.createElement("i",{className:i({type:t},[n])})}},331:function(e,t,n){},332:function(e,t,n){},333:function(e,t,n){},334:function(e,t,n){},335:function(e,t,n){},336:function(e,t,n){},337:function(e,t,n){},339:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(3),o=n(1),i=n(5),a=n(755),s=n(711),c=n(525),u=n(518),l=n(0),d=n(110),p=(n(515),Object(i.withBaobab)({name:"ViewerModal-Paranja",events:{onClick:Object(i.logClick)()}})(l.memo(function(e){return l.createElement("div",{className:Object(d.a)("Paranja",null,[e.className]),onClick:e.onClick})}))),f=(n(516),Object(i.withBaobab)({name:"ModalViewer-Close",events:{onClick:Object(i.logClick)()}})(l.memo(function(e){return l.createElement("div",{className:Object(d.a)("Close",null,[e.className]),onClick:e.onClick})}))),h=Object(o.compose)(a.a,c.a,u.a,Object(i.withBaobab)({name:"MMViewerModal"}))(s.a),m=new r.Registry({id:Object(d.a)()});m.set("Modal",h),m.set("Paranja",p),m.set("Close",f)},34:function(e,t,n){"use strict";var r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,a={},s=0,c=0;function u(e){var t="";do{t=o[e%i]+t,e=Math.floor(e/i)}while(e>0);return t}function l(){var e=u(+new Date);return e!==r?(s=0,r=e):e+"."+u(s++)}for(;c<i;c++)a[o[c]]=c;l.encode=u,l.decode=function(e){var t=0;for(c=0;c<e.length;c++)t=t*i+a[e.charAt(c)];return t},e.exports=l},340:function(e,t,n){"use strict";n.d(t,"b",function(){return I}),n.d(t,"a",function(){return x});var r,o=n(0),i=n(7),a=n.n(i),s=n(5),c=n(6),u=n(264),l=n(256),d=n(114),p=n(53),f=n(894),h=n(887),m=n(404),v=n(891),b=(n(644),Object(s.withBaobab)({name:"MMSimilarOffersImage"})(function(e){var t=e.url,n=e.imageUrl,r=e.title,i=e.onClick,a=e.onError,s=e.onLoad;return o.createElement("a",{href:t,className:Object(p.a)("ImageLink"),onClick:i,rel:"noopener",target:"_blank"},o.createElement("img",{className:Object(p.a)("Image"),key:n,src:n,alt:r,onError:a,onLoad:s}))})),g=(n(642),n(81)),y=Object(h.a)(m.a);!function(e){e.image="image",e.path="path",e.title="title",e.container="container"}(r||(r={}));function O(e,t){return Object(s.logClick)(function(n){var r=n.props,o=r.extendedClickArea,i=r.counters,a=r.source,s=r.pos,u=r.link;if(o&&t||!o&&!t)return Object(c.b)(null===i||void 0===i?void 0:i.click,{"-action-type":"greenurl","-click-source":"similar_offers","-data-source":a,"-click-area":e,"-pos":String(s)},void 0,{href:encodeURIComponent(u)})})}var w,j=Object(s.withBaobab)({name:"offer",events:{onImageClick:O(r.image,!1),onPathClick:O(r.path,!1),onTitleClick:O(r.title,!1),onContainerClick:O(r.container,!0)}})(function(e){var t=e.image,n=e.title,r=e.domain,i=e.price,a=e.link,s=e.favicon,c=e.extendedClickArea,u=void 0===c||c,l=e.onError,d=e.onImageLoad,h=e.onImageClick,m=e.onPathClick,O=e.onTitleClick,w=e.onContainerClick,j=o.useMemo(function(){return[{url:a,text:r,onClick:m}]},[a,r,m]);return o.createElement(y,{className:Object(p.a)("Offer",{extendedClickArea:u}),theme:u?"normal":void 0,url:u?a:void 0,onClick:u?w:void 0,as:u?"a":"div"},o.createElement(b,{url:a,imageUrl:t.url,title:n,onError:l,onLoad:d,onClick:h}),o.createElement("div",{className:Object(p.a)("Content")},o.createElement(y,{className:Object(p.a)("Title"),theme:"normal",url:a,onClick:O},n),o.createElement(v.a,{favicon:s?o.createElement(g.a,{className:Object(p.a)("Favicon"),favicon:s}):void 0,className:Object(p.a)("GreenUrl"),items:j}),o.createElement("div",{className:Object(p.a)("Spacer")}),i&&o.createElement("div",{className:Object(p.a)("Price")},o.createElement(f.a,{value:i,currency:"RUB",rurSymbolFont:!0}))))}),C=n(313),E=(n(640),w=function(e,t){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}w(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),S=function(){return(S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},_=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},k=a()(C),P=function(e){function t(t){var n=e.call(this,t)||this;return n.loadedCount=0,n.shownCounted=!1,n.onErrorHandler=n.onErrorHandler.bind(n),n.onLoadHandler=n.onLoadHandler.bind(n),n.onImageLoadingResult=n.onImageLoadingResult.bind(n),n.state={banned:{}},n}return E(t,e),t.prototype.render=function(){var e=this.props,t=e.offers,n=e.className;this.prevOffers!==t&&(this.prevOffers=t,this.loadedCount=0,this.shownCounted=!1);var r=this.getRenderedOffersList();return r.length?o.createElement("div",{className:Object(p.a)({withMarket:this.props.isMarket,offersInRow:this.props.offersInRow||2},[d.a,n])},o.createElement("div",{className:Object(p.a)("Header",[l.a])},this.props.title),o.createElement("div",{className:Object(p.a)("Content")},r)):null},t.prototype.getRenderedOffersList=function(){var e=this,t=this.state.banned;return this.props.offers.reduce(function(n,r,i){var a;return r.image&&r.image.url&&!t[r.image.url]&&n.push(o.createElement(j,S({key:i,pos:i},r,{onError:e.onErrorHandler(r),extendedClickArea:e.props.extendedClickArea,counters:null===(a=e.props.counters)||void 0===a?void 0:a.offer,onImageLoad:e.onLoadHandler}))),n},[])},t.prototype.onErrorHandler=function(e){var t=this;return function(){var n;return t.setState({banned:S(S({},t.state.banned),(n={},n[e.image&&e.image.url||""]=!0,n))},function(){t.onImageLoadingResult()})}},t.prototype.onLoadHandler=function(){this.loadedCount++,this.onImageLoadingResult()},t.prototype.onImageLoadingResult=function(){if(this.props.onShow&&!this.shownCounted){var e=this.props.offers,t=this.state.banned,n=e.reduce(function(e,n){return e+(t[n.image.url]?1:0)},0);this.loadedCount+n===e.length&&(this.shownCounted=!0,this.props.onShow({count:this.loadedCount}))}},t}(o.PureComponent),I={title:k("Похожие товары",{context:'Заголовок блока в просмотрщике картинок содержащего товары, похожие на показанный. Содержит данные из сервиса "Яндекс.Маркет"'})},x=Object(s.withBaobab)({name:"similar-offers",events:{onShow:Object(s.logTech)("show",function(e,t){var n,r=e.props,o=_(t,1)[0];return Object(c.b)(null===(n=r.counters)||void 0===n?void 0:n.show,{"-count":String(o.count)})})}})(Object(u.a)(I)(P))},347:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(28),i=Object(r.withBemMod)(Object(o.b)(),{tone:"gray"})},348:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(1),o=n(18),i=n(6),a=n(25),s=n(44),c=n(31),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=Object(o.c)(function(e){var t,n,r,o,a=Object(i.m)(e),s=a&&a.preview&&a.preview[0];s||(s=a&&a.dups&&a.dups[0]);var c=null===a||void 0===a?void 0:a.similarOffers,u=Boolean(null===(t=e.experiments)||void 0===t?void 0:t.similarOffersExtendedClickArea),l=Number(null===(n=e.experiments)||void 0===n?void 0:n.similarOffersFitInRow),d=Boolean(null===(r=e.experiments)||void 0===r?void 0:r.similarOffersFavicons),p=e.favicons,f=null===(o=e.experiments)||void 0===o?void 0:o.similarOffersTheme;return[a,s,c,p,u,l,d,f?String(f):void 0]},function(e,t,n,r,o,i,a,s){var c;return{offers:(n||[]).map(function(e){var t;return u(u({},e),{favicon:a?null===(t=r[e.domain.toLowerCase()])||void 0===t?void 0:t.data:void 0})}),extendedClickArea:o,isMarket:e&&Boolean(e.marketSnippet)&&"market"===(null===(c=e.marketSnippet)||void 0===c?void 0:c.source),reqid:e&&e.reqid,href:t&&t.url,offersInRow:i,theme:s}}),d=Object(r.compose)(Object(c.e)("similarOffers"),Object(a.d)(l),Object(s.a)(function(e){return Boolean(e.offers&&e.offers.length)}))},349:function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"a",function(){return m});var r=n(1),o=n(18),i=n(6),a=n(89),s=n(88),c=n(44),u=n(21),l=n(25),d=n(366),p=Object(o.d)(function(e){return function(t){return e(Object(u.m)(t))}}),f=Object(o.c)(function(e,t){var n,r,o=e.experiments,s=void 0===o?{}:o,c=e.globalContext,u=e.config.dataLoadingPriority,l=Object(i.e)(e),d=Object(a.i)(e),p=Object(a.e)(e,l);!Object(i.f)(e)&&(null===u||void 0===u?void 0:u.rimImgWaitForImage)||d&&!p&&(null===u||void 0===u?void 0:u.rimImgWaitForDirect)||(r=e.rimForItem);var f=null===(n=e.config.rim)||void 0===n?void 0:n.justifier.baseRowHeight,h=c.isCommercialEnabled||c.isCommercialQuery;s.commercialRimItemBaseHeight&&h&&(f=Number(s.commercialRimItemBaseHeight));var m=Object(i.o)(e);return[l,Object(i.m)(e),e.rimSelectedIdx,r,e.rimLoadingId,f,m,Boolean(s.rimRedesign),t]},function(e,t,n,r,o,i,a,c,u){return{imgHref:t&&t.imgHref?t.imgHref:(l=t,d=l&&l.dups&&l.dups[0],d&&d.origin?d.origin.url:""),rimid:Object(s.f)(e),relatedImages:r,selectedRimIdx:n,setSelectedRim:p(u),isLoading:""!==o,baseRowHeight:i,sideblockWidth:a,expRedesign:c};var l,d});function h(e){return Object(r.compose)(Object(l.d)(f),Object(c.a)(["relatedImages","rimid","isLoading"]))(e)}var m=h(d.a)},35:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.BaobabContext=r.createContext(void 0),t.Provider=t.BaobabContext.Provider,t.Consumer=t.BaobabContext.Consumer},352:function(e,t,n){},357:function(e,t,n){},359:function(e,t,n){},36:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Object(r.useMemo)(function(){return e.bind.apply(e,i([null],t))},i([e],t))}},360:function(e,t,n){"use strict";n(185),n(233);var r=n(9);n.d(t,"a",function(){return r.a})},363:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(3),o=n(0),i=n(221),a=n(110),s=(n(517),n(339)),c=Object(r.withRegistry)(s.a)(function(e){var t=o.useRef(null),n=Object(r.useComponentRegistry)(Object(a.a)()),s=n.Modal,c=n.Close,u=n.Paranja;return o.useEffect(function(){if(t.current){var n=t.current;if(e.isVisible)return Object(i.disableBodyScroll)(n),function(){e.isVisible&&Object(i.enableBodyScroll)(n)};Object(i.enableBodyScroll)(n)}},[e.isVisible,t.current]),o.createElement(s,{innerRef:t,className:Object(a.a)(null,[e.className]),theme:"normal",visible:e.isVisible,hasAnimation:!1,zIndex:e.zIndex,zIndexGroupLevel:e.zIndexGroupLevel||20,disablePortal:e.isSSREnabled},o.createElement(u,{onClick:e.onParanjaClick}),o.createElement(c,{onClick:e.onCloseClick}),e.children)})},365:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=function(e){var t,n;if(e.snippet)return{id:e.id,pos:e.pos,docid:e.docid,rimid:e.rimId,imgHref:e.img_href,reqid:e.reqid,fresh:e.fresh,freshness:e.freshness,counterPath:e.counterPath,isMarketIncut:e.isMarketIncut,commercialSource:e.commercialSource,previewUrl:e.detail_url,isFavorite:Boolean(e.isFavorite),photostockUrl:e.photostockUrl,uniqId:e.reqid+"-"+e.id,images:[],preview:e.preview,snippet:(n=e.snippet,r(r({},n),{text:((null===n||void 0===n?void 0:n.text)||"").replace(/<b>/g,"[").replace(/<\/b>/g,"]"),redirUrl:n.redirUrl||n.url})),similarOffers:function(e){if(e&&e.length)return e.map(function(e){return r(r({},e),{price:e.price?Number(e.price.toString().replace(/ +/g,"")):void 0})})}(e.similarOffers),marketSnippet:e.marketSnippet&&function(e){if(e)return{domain:e.domain,isMarketPlace:e.isMarketPlace,punycode:e.punycode,imageUrl:e.image_url,modelUrl:e.model_url,moneyId:e.money_id,price:e.price,shopRating:e.shop_rating,modelRating:e.model_rating,source:e.source,title:e.title,url:e.url,oldPrice:e.oldPrice,currency:e.currency,discount:e.discount,text:e.text,fullText:e.fullText}}(e.marketSnippet),schemaOrgSnippet:e.schemaOrgSnippet&&function(e){if(e)return{domain:e.domain,punycode:e.punycode,imageUrl:e.image_url,modelUrl:e.model_url,moneyId:e.money_id,price:e.price,currency:e.currency,shopRating:e.shop_rating,source:e.source,title:e.title,url:e.url,redirUrl:e.redirUrl,text:e.text,fullText:e.fullText,availability:e.availability,brand:e.brand}}(e.schemaOrgSnippet),otherOffers:e.otherOffers,thumb:(t=e.thumb,{url:t.url,microImg:t.microImg,size:{w:t.size.width,h:t.size.height}}),col:e.col,row:e.row,page:e.page,dups:e.dups,extraOrigin:e.extraOrigin,origOnlyOpen:e.origOnlyOpen}},i=function(e){for(var t=[],n=0;n!==e.length;n++){var r=o(e[n]);r&&t.push(r)}return t}},366:function(e,t,n){"use strict";n.d(t,"b",function(){return L}),n.d(t,"c",function(){return A}),n.d(t,"a",function(){return B});var r=n(0),o=n(7),i=n.n(o),a=n(1),s=n(3),c=n(5),u=n(31),l=n(256),d=n(114),p=n(18),f=n(6),h=(n(659),n(113)),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function v(e){return r.createElement(h.b,m({size:h.a.s},e))}var b=n(309),g=n(377),y=n(129),O=n(118),w=new s.Registry({id:Object(O.a)()});w.set(Object(y.a)(),g.a);var j,C=n(678),E=(n(658),j=function(e,t){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}j(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),S=function(){return(S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},_=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},k=i()(C),P=function(e,t){void 0===t&&(t=0);var n=[],r=e.length;if(r>0)for(var o=t;o<r;o++){var i=e[o],a=i.preview[0]||i.dups[0],s=a.origin&&a.origin.url||a.url;s&&n.push(i.id+":"+encodeURIComponent(s))}return n},I=function(e){var t=e.relatedImages,n=e.counterParams,r=P(t),o=n&&n.vars,i=S({},o);return r.length&&(i["-images"]=r.join(";")),i},x=function(e,t){var n=e.relatedImages,r=e.counterParams,o=n.length,i=r&&r.vars,a=S({},i);if(e.selectedRimIdx&&(a["-rim_id"]=e.rimid,a["-rim_index"]=e.selectedRimIdx),o>t){var s=P(n,t);s.length&&(a["-images"]=s.join(";"))}return a},M=Object(y.a)(),N=Object(O.a)(),T=Object(p.d)(function(e){return Object(O.a)(null,[d.a,e])}),R=Object(O.a)("Tiles"),D=Object(O.a)("Header",null,[l.a]),L=function(e){function t(t){var n=e.call(this,t)||this;return n.shownCount=0,n.prevShownCount=0,n.fittedItems=[],n.setDefaults(),n.justifierConfig={rowWidth:n.getSideblockWidth(),baseRowHeight:t.baseRowHeight||150,marginRight:5,minImageWidth:70},n.onClick=n.onClick.bind(n),n}return E(t,e),t.prototype.getSideblockWidth=function(){return this.props.sideblockWidth?this.props.sideblockWidth-21:319},t.prototype.componentDidMount=function(){this.handlePageLoad()},t.prototype.componentDidUpdate=function(){this.handlePageLoad()},t.prototype.handlePageLoad=function(){this.shownCount>this.prevShownCount&&this.props.onPageLoaded&&this.props.onPageLoaded()},t.prototype.render=function(){var e=this,t=this.props.relatedImages;if(!t||!t.length)return this.setDefaults(),null;var n=this.shownRimId===this.props.rimid;if(n&&t===this.prevRelatedImages||(this.prevShownCount=this.shownCount,this.fittedItems=this.fitAllItems(t),this.prevRelatedImages=t),n?this.fittedItems.length>this.shownCount&&this.props.onMore&&this.props.onMore(this.shownCount):this.props.onShow&&this.props.onShow(),this.shownRimId=this.props.rimid,this.shownCount=this.fittedItems.length,!this.fittedItems.length)return null;var o=this.props.sideblockWidth?{width:this.justifierConfig.rowWidth+"px"}:void 0;return r.createElement(s.ComponentRegistryConsumer,{id:N},function(t){var n=t[M];return r.createElement("div",{className:T(e.props.className)},r.createElement("div",{className:D},k("Связанные картинки",{context:"Заголовок блока в просмотрщике картинки"})),r.createElement(n,{className:R,style:o,items:e.fittedItems,onClick:e.onClick,counterParams:e.props.counterParams,selectedItemIdx:e.props.selectedRimIdx,clickedCounter:e.props.clickedCounter,expRedesign:e.props.expRedesign}),e.props.isLoading?r.createElement(v,{theme:"yellow"}):"")})},t.prototype.setDefaults=function(){this.shownRimId=void 0,this.shownCount=0,this.prevShownCount=0,this.fittedItems=[],this.prevRelatedImages=void 0},t.prototype.fitAllItems=function(e){var t=this,n=e.map(function(e){var n=e.thumb,r=t.justifierConfig.baseRowHeight,o=n.size?n.size.w:0,i=n.size?n.size.h:0,a=1.5*i<r?1.5*i:r,s=o*a/i;return S(S({},e),{width:s,height:a})});return Object(b.a)(n,this.justifierConfig)},t.prototype.onClick=function(e,t){this.props.setSelectedRim(e),this.props.onClick&&this.props.onClick(e,t)},t}(r.Component);function A(e){var t=Object(a.compose)(Object(s.withRegistry)(w),Object(c.withBaobab)({name:"related-images"}))(e);return function(e){var n=Object(u.c)(),o=n.rimShown,i=n.rimMore,a=n.rimClicked,s=r.useMemo(function(){return{events:{onShow:Object(c.logTech)("show",function(e){var t=e.props;return Object(f.b)(o,I(t),void 0,{href:t.imgHref})}),onMore:Object(c.logTech)("more",function(e,t){var n=e.props,r=_(t,1)[0];return Object(f.b)(i,x(n,r),void 0,{href:n.imgHref})})}}},[o,i]);return r.createElement(t,S({logNode:s,clickedCounter:a},e))}}var B=A(L)},367:function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"c",function(){return y}),n.d(t,"a",function(){return O});var r,o=n(0),i=n(3),a=n(84),s=n(5),c=n(18),u=n(379),l=n(137),d=!!l.canUseDOM&&Boolean("IntersectionObserver"in window&&"IntersectionObserverEntry"in window),p=!!l.canUseDOM&&!(window.navigator.userAgent.indexOf("Edg/")>-1)&&window.navigator.userAgent.indexOf("Edge/")>-1,f=n(45),h=(n(620),n(24)),m=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},b=Object(c.d)(function(e){return{vars:{"-pos":e&&e.pos}}}),g=function(e){function t(t){var n=e.call(this,t)||this;return n.containerNode={current:null},n.fixedPaneRef=o.createRef(),n.fixedPaneVisibilityAnchorRef=o.createRef(),n.rootRef={current:null},n.scrollStartLogged=!1,n.scrollToBottomLogged=!1,n.scrollShowLogged=!1,n.autoScroll=!1,n.componentIsMounted=!1,n.BOTTOM_REACH_OFFSET=300,n.state={scrollShowLogged:!1,fixedPaneHidden:!0,fixedPaneAnimated:!1},n.onScroll=Object(a.throttle)(n.onScroll.bind(n),100,{delayedLastCall:!0}),n.onRootNodeRef=n.onRootNodeRef.bind(n),n.onContainerNodeRef=n.onContainerNodeRef.bind(n),n.onMutation=n.onMutation.bind(n),n.onRimPageLoaded=n.onRimPageLoaded.bind(n),n.observerCallback=n.observerCallback.bind(n),n}return m(t,e),t.prototype.isFixedPaneEnabled=function(){if(!d)return!1;if(!this.props.fixedPaneConfig)return!1;var e=window.navigator.userAgent.toLowerCase();return-1===e.indexOf("safari")||-1!==e.indexOf("chrome")},t.prototype.componentDidUpdate=function(e,t){var n=this;this.props.isVisible&&(e.activeImage&&this.props.activeImage&&e.activeImage.docid!==this.props.activeImage.docid&&(this.scrollShowLogged=!1,this.hasScroll()&&this.resetScroll(),this.setState({fixedPaneHidden:!0,fixedPaneAnimated:!1})),t.fixedPaneHidden!==this.state.fixedPaneHidden&&window.requestAnimationFrame(function(){n.setState({fixedPaneAnimated:!0})}))},t.prototype.componentDidMount=function(){this.componentIsMounted=!0,this.autoScroll=!1,this.props.fixedPaneConfig&&this.attachFixedPaneObserver()},t.prototype.attachFixedPaneObserver=function(){if(this.isFixedPaneEnabled()){var e=this.fixedPaneVisibilityAnchorRef&&this.fixedPaneVisibilityAnchorRef.current,t=this.rootNode;e&&t&&(this.fixedPaneAnchorObserver=new IntersectionObserver(this.observerCallback,{root:t,threshold:1}),this.fixedPaneAnchorObserver&&this.fixedPaneAnchorObserver.observe(e))}},t.prototype.detachFixedPaneObserver=function(){this.fixedPaneAnchorObserver&&this.fixedPaneAnchorObserver.disconnect()},t.prototype.componentWillUnmount=function(){this.componentIsMounted=!1,this.detachFixedPaneObserver()},t.prototype.render=function(){var e=this,t=this.props,n=t.activeImage,r=t.shownImage,a=t.directPosition,s=t.marketPosition,c=t.behavioralDirectRef,u=t.directSnippetCanHideElements,l=t.cnSidebarParams,d=r&&r.marketSnippet,m=r&&r.schemaOrgSnippet,v="undefined"!==typeof s?s:h.e.middle,g=this.isFixedPaneEnabled(),y=this.props.fixedPaneConfig,O=y&&y.theme?y.theme:h.d.full,w=this.state,j=w.fixedPaneHidden,C=w.fixedPaneAnimated,E=!j&&C,S=p?"fixed":"sticky",_=d&&v===h.e.middle?u:{};return o.createElement("div",{className:Object(f.a)("",l),onScroll:this.onScroll,ref:this.onRootNodeRef,style:this.getSidebarStyle()},o.createElement(i.ComponentRegistryConsumer,{id:Object(f.a)()},function(t){var r=t.MMOrganicSnippet,i=t.MMDirectSnippet,s=t.MMSchemaOrgSnippet,u=t.BehavioralDirectSnippet,l=t.MMRelatedImages,d=t.MMSimilarOffers,p=(null===m||void 0===m?void 0:m.url)?o.createElement(s,{type:"schemaorg",minified:!0}):o.createElement(r,{minified:!0});return o.createElement(o.Fragment,null,g&&!j&&o.createElement("div",{className:Object(f.a)("FixedPane",{hidden:j,type:j?"":S,animated:E,theme:O}),ref:e.fixedPaneRef},o.createElement(i,{type:"default",advanced:!1}),p,e.getViewerButtons(!0)),o.createElement("div",{className:Object(f.a)("Container"),ref:e.onContainerNodeRef},a===h.c.top&&e.renderBlock(o.createElement(i,{type:"default",hiddenElements:_}),"MMDirectSnippet-top"),e.renderMarketSnippet(t,h.e.top),e.renderMainContent(t,_),a===h.c.middle&&o.createElement(i,{type:"default"}),u&&o.createElement(u,{forwardRef:c}),e.renderMarketSnippet(t,h.e.middle),d&&o.createElement(d,null),o.createElement(l,{onPageLoaded:e.onRimPageLoaded,onClick:e.props.onRelatedItemClick,counterParams:b(n)})))}))},t.prototype.renderMainContent=function(e,t){var n,r=e.OtherOffers,i=e.MMDirectSnippet,a=e.MMViewerTags,s=this.props,c=s.shownImage,u=s.directPosition,l=s.isDuckEnabled,d=s.onTagClick,p=c&&c.marketSnippet,m=this.isFixedPaneEnabled();return o.createElement(o.Fragment,null,this.renderBlock(o.createElement(o.Fragment,null,this.renderSnippet(e),r&&!p&&(null===c||void 0===c?void 0:c.otherOffers)&&0!==(null===(n=null===c||void 0===c?void 0:c.otherOffers)||void 0===n?void 0:n.length)&&o.createElement(o.Fragment,null,o.createElement("div",{className:Object(f.a)("OtherOffersDivider",{snippet:"schemaorg"})}),o.createElement(r,{fold:!0,className:Object(f.a)("OtherOffers",{snippet:"schemaorg"})}))),"baseOrganicSnippetContainer"),u===h.c.suborganic&&this.renderBlock(o.createElement(i,{type:"default",hiddenElements:t}),"MMDirectSnippet-suborganic"),l&&o.createElement(a,{onTagClick:d}),this.getViewerButtons(),m&&o.createElement("div",{className:Object(f.a)("FixedPaneVisibilityAnchor"),ref:this.fixedPaneVisibilityAnchorRef}))},t.prototype.renderSnippet=function(e){var t=e.MMOrganicSnippet,n=e.MMSchemaOrgSnippet,r=e.ExtraLinks,i=this.props,a=i.shownImage,s=i.activeImage,c=null===a||void 0===a?void 0:a.schemaOrgSnippet,u=s&&r?o.createElement(r,{imageItem:s,scope:this.containerNode,scrollArea:this.rootRef}):void 0;return(null===c||void 0===c?void 0:c.url)?o.createElement(n,{type:"schemaorg",key:"baseOrganicSnippetNode",aside:u}):o.createElement(t,{key:"baseOrganicSnippetNode",aside:u})},t.prototype.renderMarketSnippet=function(e,t){var n,r=e.MMMarketSnippet,i=e.OtherOffers,a=this.props,s=a.shownImage,c=a.marketPosition,u=null===s||void 0===s?void 0:s.marketSnippet,l="undefined"!==typeof c?c:h.e.middle;if(u&&r&&l===t)return o.createElement(r,v({},u),i&&(null===s||void 0===s?void 0:s.otherOffers)&&0!==(null===(n=null===s||void 0===s?void 0:s.otherOffers)||void 0===n?void 0:n.length)&&o.createElement(i,{fold:!0,className:Object(f.a)("OtherOffers",{snippet:"market"})}))},t.prototype.getSidebarStyle=function(){var e=this.props.width;if(e)return{width:e+"px"}},t.prototype.getViewerButtons=function(e){var t,n=this,r=this.props,a=r.shownImage,s=r.addToCollectionsLoginUrl,c=void 0===s?"":s,u=this.containerNode.current?this.containerNode:void 0,l=Boolean(a&&a.isFavorite);return t=e?h.b.compact:h.b.twoLines,o.createElement(i.ComponentRegistryConsumer,{id:Object(f.a)()},function(e){var r=e.MMViewerButtons;return o.createElement(r,{view:t,popupScope:u,onLog:n.props.onLog,loginUrl:c,isFavorite:l})})},t.prototype.renderBlock=function(e,t){return this.props.view===h.a.block?o.createElement("div",{className:Object(f.a)("Block"),key:t},e):e},t.prototype.onRootNodeRef=function(e){this.rootRef.current=e,e&&this.rootNode!==e&&(this.rootObserver&&this.rootObserver.disconnect(),this.rootObserver=new MutationObserver(this.onMutation),this.rootObserver.observe(e,{attributes:!0,childList:!0,subtree:!0})),this.props.nodeRef&&(this.props.nodeRef.current=e),this.rootNode=e,this.checkSidebarBottomReached()},t.prototype.onContainerNodeRef=function(e){this.containerNode.current!==e&&(this.containerNode.current=e,this.forceUpdate())},t.prototype.onMutation=function(){this.props.isVisible&&!this.scrollShowLogged&&this.countNewScrollState()},t.prototype.onRimPageLoaded=function(){this.checkSidebarBottomReached()},t.prototype.resetScroll=function(){var e=this;this.rootNode&&(this.autoScroll=!0,this.rootNode.scrollTop=0,setTimeout(function(){e.autoScroll=!1},0))},t.prototype.hasScroll=function(){var e=this.containerNode.current,t=e&&e.parentElement;return!(!e||!t)&&e.offsetTop+e.clientHeight>t.clientHeight},t.prototype.countNewScrollState=function(){this.scrollStartLogged=!1,this.scrollToBottomLogged=!1,this.hasScroll()&&(this.scrollShowLogged=!0,this.props.onScrollShow&&this.props.onScrollShow())},t.prototype.observerCallback=function(e){var t=this;this.componentIsMounted&&e.forEach(function(e){var n=e.rootBounds,r=e.boundingClientRect;n&&r.top<n.top?t.setState({fixedPaneHidden:!1,fixedPaneAnimated:!1}):t.setState({fixedPaneHidden:!0,fixedPaneAnimated:!1})})},t.prototype.isSidebarBottomReached=function(){var e=this.rootNode;if(!e)return!1;var t=e.scrollTop+e.clientHeight;return e.scrollHeight-t<=this.BOTTOM_REACH_OFFSET},t.prototype.checkSidebarBottomReached=function(){this.isSidebarBottomReached()&&this.props.onBottomSidebar&&this.props.onBottomSidebar()},t.prototype.onScroll=function(){if(this.componentIsMounted)if(this.autoScroll)this.autoScroll=!1;else if(this.checkSidebarBottomReached(),!this.scrollStartLogged||!this.scrollToBottomLogged){var e=this.containerNode.current,t=e&&e.parentElement;e&&t&&(this.scrollStartLogged||(this.scrollStartLogged=!0,this.props.onScrollStart&&this.props.onScrollStart()),!this.scrollToBottomLogged&&t.scrollTop+t.clientHeight>=e.clientHeight&&(this.scrollToBottomLogged=!0,this.props.onScrollToBottom&&this.props.onScrollToBottom()))}},t}(o.Component);function y(e){return Object(s.withBaobab)({name:"pane"})(Object(i.withRegistry)(u.a)(e))}var O=y(g)},37:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(151)),r(n(152)),r(n(153)),r(n(154))},373:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(9),i=(n(199),Object(r.withBemMod)(Object(o.b)(),{width:"max"}))},374:function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"a",function(){return y});var r=n(0),o=n.n(r),i=n(401),a=n.n(i),s=n(136),c=n(1),u=n(25),l=n(44),d=n(192),p=n(165),f=n(254),h=n(100),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},v=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},b=a()({loader:function(){return n.e(96).then(n.bind(null,862))},loading:function(){return null},render:function(e,t){var n=e.MMUnauthPopup;return o.a.createElement(n,m({logNode:"object"===typeof t.baobabLogOnClose?{events:{onCloseClick:t.baobabLogOnClose}}:void 0},t))}}),g=function(e){return function(t){var n=!t.loggedIn&&!t.isQueryPorn,r=Object(s.a)(),i=n&&0!==t.unauthPopupSimilarFlag&&Object(h.c)(f.b,t.unauthPopupSimilarFlag),a=m(m({},t),{isOpenImageUnauthPopupEnabled:n,isOpenImageUnauthPopupStrictEnabled:n,isSimilarUnauthPopupEnabled:i,isDiskShareUnauthPopupEnabled:!0}),c={visible:!1,loginUrl:"",registrationUrl:"",title:"",text:"",onCloseClick:void 0,skipUrl:"",skipText:"",baobabLogOnClose:void 0},u=v(o.a.useState(c),2),l=u[0],d=u[1],p=o.a.useCallback(function(e){d(c),l.onCloseClick&&l.visible&&l.onCloseClick(e)},[c,l]),g=o.a.useCallback(function(e){l.visible&&e&&27===e.keyCode&&(d(c),e.stopImmediatePropagation())},[c,l.visible]);o.a.useEffect(function(){return l.visible&&document.addEventListener("keydown",g,!0),function(){l.visible&&document.removeEventListener("keydown",g,!0)}},[g,l.visible]);var y=o.a.useCallback(function(e,t,n){return Object(h.d)(e,d,t,n)},[]);return n&&r()?(b.preload(),o.a.createElement(o.a.Fragment,null,l.visible&&o.a.createElement(b,{loginUrl:l.loginUrl,registrationUrl:l.registrationUrl,title:l.title,text:l.text,onCloseClick:p,skipUrl:l.skipUrl,skipText:l.skipText,baobabLogOnClose:l.baobabLogOnClose}),o.a.createElement(e,m({},a,{showUnauthPopup:y})))):o.a.createElement(e,m({},a))}},y=Object(c.compose)(Object(u.d)(p.b),Object(l.a)(["image"]),g)(d.a)},375:function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return f});var r=n(18),o=n(6),i=n(89),a=n(25),s=n(367),c=n(24),u=n(21),l=Object(r.d)(function(e){return function(){return e(Object(u.j)())}});var d=function(e,t){var n,r=Object(o.e)(e),a=Object(o.m)(e),s=e.config,u=s.directSnippetParams,d=s.marketSnippetParams,p=s.isDuckEnabled,f=s.sidebar,h=c.c.disabled,m=(null===u||void 0===u?void 0:u.fixedUpperPosition)||c.c.top;if(u&&Object(i.i)(e)&&r&&(n=r,Boolean(n.dups.length||n.preview.length)))if(u.forceDirectSnippetAtTop)h=m;else if(u.useAlternativePositionData){var v=Object(i.b)(e);v&&(h="premium"===v.adType?m:c.c.middle)}else{h=Object(i.h)(e.globalContext,u)?m:c.c.middle}var b=d&&d.position,g=b||c.e.disabled;if(d&&!b){var y=d.useTopPositionIfAvailable,O=Object(i.b)(e),w=Object(i.i)(e)&&null===O;g=(y?w||h!==m:w)?c.e.top:c.e.middle}var j,C=null===f||void 0===f?void 0:f.view;return C&&((j||(j={})).view=C),{fixedPaneConfig:null===f||void 0===f?void 0:f.fixedPaneConfig,directPosition:h,marketPosition:g,isDuckEnabled:Boolean(p),reqid:r&&r.reqid,activeImage:r,shownImage:a,onBottomSidebar:l(t),width:Object(o.o)(e),directSnippetCanHideElements:u&&u.canHideElements,view:C,cnSidebarParams:j}};function p(e){return Object(a.d)(d)(e)}var f=p(s.a)},376:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),o=n(1),i=n(7),a=n.n(i),s=n(313),c=n(53),u=(n(639),function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),l=a()(s),d=Object(o.withBemMod)(Object(c.a)(),{theme:"v2"},function(e){return function(t){return r.createElement(e,u({title:l("Похожие товары",{context:'Заголовок блока в просмотрщике картинок содержащего товары, похожие на показанный. Содержит данные из сервиса "Яндекс.Маркет"'})},t))}})},377:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(5),i=n(6),a=n(129),s=(n(660),function(e){var t=e.items,n=e.selectedItemIdx,s=e.onClick,u=e.clickedCounter,l=e.className,d=e.counterParams,p=e.incutStart,f=e.incutStep,h=e.incutRenderer,m=e.style,v=e.expRedesign,b=0;return r.createElement("div",{className:Object(a.a)({expRedesign:v},[l]),style:m},t.reduce(function(e,t,a){var l=d&&d.vars,m=t.thumb.url,v={},g=a===n;if(t.newWidth&&(v.width=t.newWidth+"px"),t.newHeight&&(v.height=t.newHeight+"px",t.rowHeight&&t.rowHeight>t.newHeight&&(v.paddingTop=Math.round((t.rowHeight-t.newHeight)/2)+"px")),e.push(r.createElement(c,{key:m,src:m,style:v,logNode:{events:{onClick:g?void 0:Object(o.logClick)(Object(i.b)(u,{"-rim-idx":a,"-rim_index":a,"-pos":l&&l["-pos"],"-rim_id":t.rimid}))}},selected:g,onClick:s&&s.bind(void 0,a,t)})),t.isLast&&(b++,void 0!==p&&void 0!==f&&void 0!==h)){var y=b-p;y>=0&&y%f===0&&e.push(h(b,y/f))}return e},[]))}),c=Object(o.withBaobab)({name:"item"})(function(e){var t=e.selected,n=e.onClick,o=e.style,i=e.src,s=e.title,c=void 0===s?"":s;return r.createElement("div",{className:Object(a.a)("Item",{selected:t}),onClick:n,style:o},r.createElement("img",{src:i,className:Object(a.a)("Image"),alt:c}))})},378:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(3),o=n(20),i=n(173),a=new r.Registry({id:i.a.id}),s=Object(o.a)("OpenImage");Object.keys(i.a.snapshot()).forEach(function(e){e!==s&&a.set(e,function(){return null})})},379:function(e,t,n){"use strict";n.d(t,"a",function(){return Cn});var r=n(3),o=n(1),i=n(4),a=Object(i.cn)("MMOrganicSnippet"),s=n(0),c=n.n(s),u=n(230),l=n(79),d=n(891),p=n(327),f=n(45),h=(n(622),Object(f.a)("SectionTitle")),m=n(5),v=n(31),b=n(81),g=n(6),y=(n(621),n(710)),O=n(209),w=n(306),j=n(373),C=n(360),E=n(7),S=n.n(E),_=(n(625),n(675)),k=Object(o.compose)(y.a,O.a,w.a,j.a)(C.a),P=S()(_),I=a("Button"),x=Object(m.withBaobab)({name:"MMOrganicSnippetButton",events:{onClick:Object(m.logClick)(function(e){return e.props.counter})}})(function(e){var t=e.url,n=e.onClick;return c.a.createElement(k,{className:I,width:"max",theme:"action",size:"m",type:"link",target:"_blank",url:t,onClick:n},P("В магазин",{context:"Надпись на кнопке перехода в магазин"}))}),M=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},N=Object(u.a)(l.a);function T(e,t,n,r,o,i,a){return Object(g.b)(e,t,{path:""+Object(g.d)(e)+a,redirUrl:n,pos:a?r:"",reqid:i},{href:o})}var R,D=Object(m.withBaobab)({name:"OrganicSnippet",events:{onShow:Object(m.logTech)("show",function(e,t){var n=e.props,r=M(t,1)[0],o=n.extra,i=n.pos;if(r&&o)return Object(g.b)(r,{"-pos":i,"-type":o.type,"-view":o.view},void 0,{href:n.url})})}})(function(e){var t=e.redirUrl,n=e.url,r=e.text,o=e.domain,i=e.title,c=e.favicon,u=e.pos,l=e.reqid,f=e.commercialPath,y=e.rimPos,O=e.rimid,w=e.path,j=e.extra,C=e.aside,E=e.onShow,S=e.showStoreButton,_=e.minified,k=Object(v.c)();s.useEffect(function(){E&&j&&E(k.organic.shown)},[n,E,j]);var P=k.organic,I=P.path,M=P.title,R=P.button,D=s.useMemo(function(){var e={"-pos":u};return"undefined"!==typeof y&&(e["-rim_id"]=O,e["-rim_index"]=y),e},[u,O,y]),L=s.useMemo(function(){return{attrs:(Object(g.a)(k.organic.path)||{}).attrs}},[k.organic.path,g.a]),A=s.useMemo(function(){return{url:t,counter:T(I,D,n,u,t,l,f),logNode:L}},[t,o,I,f,D,u,l,n]),B=s.useMemo(function(){return w&&w.length?w:[{text:o.toLowerCase()}]},[o,w]),U=s.useMemo(function(){return{name:"title",events:{onClick:Object(m.logClick)(T(M,D,n,u,t,l,f))},attrs:(Object(g.a)(k.organic.title)||{}).attrs}},[t,D,M,f,n,u,l,k.organic.title,g.a]),F=T(R,D,n,u,t,l,f);return s.createElement("div",{className:a()},s.createElement("div",{className:a("TitleWrap")},s.createElement(N,{className:a("Title",[h]),theme:"normal",url:t,key:u,logNode:U},s.createElement(p.a,null,i)),C&&s.createElement("div",{className:a("Aside")},C)),s.createElement(d.a,{className:a("Path"),favicon:c?s.createElement(b.a,{favicon:c}):void 0,link:A,items:B}),s.createElement("div",{className:a("Text")},s.createElement(p.a,null,r)),!_&&S?s.createElement(x,{url:t||n,counter:F}):null)}),L=n(25),A=Object(L.d)(function(e){var t,n=Object(g.e)(e),r=Object(g.m)(e)||{},o=r.snippet||{},i=o.title,a=void 0===i?"":i,s=o.redirUrl,c=void 0===s?"":s,u=o.url,l=void 0===u?"":u,d=o.text,p=void 0===d?"":d,f=o.domain,h=void 0===f?"":f,m=o.shopScore,v=o.path,b=void 0===v?[]:v,y=o.extra,O=Object(g.g)(e,Object(g.h)(r)),w=r.commercialSource||"market",j=r.isMarketIncut?"/commercial/"+w:"",C=null===(t=e.experiments)||void 0===t?void 0:t.organicSnippetStoreButtonThreshold,E=!1;return(e.globalContext.isCommercialEnabled||e.globalContext.isCommercialQuery)&&C&&m&&!(null===r||void 0===r?void 0:r.marketSnippet)&&(E=m>Number(C)),{title:a,text:p,reqid:n&&n.reqid,pos:n&&n.pos,rimPos:e.rimSelectedIdx,rimid:r&&r.rimid,commercialPath:j,domain:h,favicon:O&&O.data,showStoreButton:E,url:l,redirUrl:c,path:b,extra:y}}),B=n(27),U=n(250),F=n(33),H=n(114),q=n(39),z=n(894),W=(n(630),Object(i.cn)("MMBigPrice"));n(629);!function(e){e.before="before",e.after="after"}(R||(R={}));var G,V=(G=function(e){var t=e.price,n=e.oldPrice,r=e.currency,o=e.className,i=e.prefix,a=e.suffix,c=s.useMemo(function(){return Object(q.classnames)(W(),o)},[o]);return s.createElement("div",{className:c},i,s.createElement(z.a,{value:t,oldValue:n,currency:r||"RUR",rurSymbolFont:!0}),a)},function(e){var t=e.currency,n=e.discountPercent,r=e.price,o=e.discountPosition,i=void 0===o?R.before:o,a=e.oldPrice,c=void 0===a?n?r-n*r/100:e.oldPrice:a,u=s.useMemo(function(){return Object(q.classnames)(W({discount:!0}),e.className)},[e.className]),l=n&&s.createElement("div",{className:W("Discount",{position:i})},"-",n,"%"),d=s.createElement(s.Fragment,null,e.prefix,i===R.before&&l),p=s.createElement(s.Fragment,null,i===R.after&&l,e.suffix);return s.createElement(G,{price:r,oldPrice:c,className:u,prefix:d,suffix:p,currency:t})}),Y=(n(627),n(676)),K=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},X=S()(Y),Q=Object(i.cn)("MMCut"),J=Object(u.a)(l.a),Z=function(e){var t=e.text,n=e.className,r=e.onExpand,o=e.onCollapse,i=e.fullText,a=void 0===i?"":i,c=e.readMoreEnabled,u=(void 0===c||c)&&Boolean(a)&&a.length!==t.length,l=K(s.useState(!0),2),d=l[0],f=l[1],h=s.useCallback(function(){d?r&&r():o&&o(),f(!d)},[d,r,o]);return u?s.createElement("div",{className:Q({readMore:"yes"},[n])},s.createElement(p.a,{start:"<hl>",end:"</hl>"},d?t:a),s.createElement(J,{onClick:h,className:Q("ReadMore"),theme:"normal"},d?X("Читать еще",{context:"Развернуть текст"}):X("Скрыть",{context:"Свернуть текст"}))):s.createElement("div",{className:Q({readMore:"no"},[n])},s.createElement(p.a,{start:"<hl>",end:"</hl>"},t))},$=Object(m.withBaobab)({name:"MMMarketSnippetImage",events:{onClick:Object(m.logClick)(),onError:Object(m.logClick)()}})(function(e){var t=e.url,n=e.imageUrl,r=e.title,o=e.onClick,i=e.onError;return s.createElement("a",{href:t,className:Object(B.a)("ImageLink"),onClick:o,rel:"noopener",target:"_blank"},s.createElement("img",{className:Object(B.a)("Image"),key:n,src:n,alt:r,onError:i}))});function ee(e,t,n){if(void 0===n&&(n=""),t&&t.market&&t.market[e]){var r=t.market[e];if(!r)return;var o=Object(g.c)(r,n);return Object(g.a)(o)}}function te(e){return function(t){var n=t.props;if(n.counters&&n.counters.market&&n.counters.market[e]){var r=n.counters.market[e];if(!r)return;var o=Object(g.c)(r,n.source||"");if(void 0===n.pos)return o;var i={};return i="shown"===e?{"-pos":n.pos}:{"-pos":n.pos,"-data-source":n.source,"-click-source":"commercial-snippet","-action-type":"greenurl"},Object(g.b)(o,i,void 0,{href:encodeURIComponent(n.url)})}}}n(634);var ne=n(9),re=(n(635),Object(o.withBemMod)(Object(ne.b)(),{theme:"mm-secondary"})),oe=(n(636),Object(o.compose)(re,y.a,O.a,w.a,Object(m.withBaobab)({name:"button"}))(C.a)),ie=function(e){var t=e.withImage,n=e.theme,r=e.url,o=e.onClick,i=e.logNode,a=e.children,c=e.addonBefore,u=e.addonAfter,l=e.className;return s.createElement(oe,{theme:n||"action",className:Object(B.a)("Button",{withImage:t,theme:n},[l]),size:"m",type:"link",url:r,target:"_blank",onClick:o,logNode:i,children:a,addonAfter:u,addonBefore:c})},ae=n(170),se=(n(637),function(){return(se=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),ce=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ue=S()(ae)("в магазине",{context:"Надпись на кнопке, которая ведет на сайт продавца товара"}),le=function(e){var t=e.price,n=e.currency,r=ce(e,["price","currency"]);return s.createElement(ie,se({},r,{className:Object(B.a)("Button",{withPrice:!0}),children:ue,addonBefore:s.createElement(s.Fragment,null,s.createElement("span",{className:Object(B.a)("PriceOnButton")},s.createElement(z.a,{value:t,currency:n||"RUR",rurSymbolFont:!0})))}))},de=function(){return(de=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},pe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},fe=S()(ae),he=fe("В магазин",{context:"Надпись на кнопке, которая ведет на сайт продавца товара"}),me=fe("Купить на Маркете",{context:'Надпись на кнопке, которая ведет на товар на "Яндекс.Маркет"'}),ve=function(e){var t=e.isMarketPlace,n=void 0!==t&&t,r=pe(e,["isMarketPlace"]);return s.createElement(ie,de({},r,{className:Object(B.a)("Button",{withoutPrice:!0}),children:n?me:he}))},be=n(885),ge=n(886),ye=Object(be.a)(ge.a),Oe=function(e){var t=e.value;return s.createElement("div",{className:Object(B.a)("RatingLine")},s.createElement(ye,{type:"market",value:t}))},we=(n(527),S()(ae)),je=we("Магазин на Маркете",{context:'Подпись блока, который содержит данные из сервиса "Яндекс.Маркет"'}),Ce=we("Покупка на Маркете",{context:'Подпись блока, который по клику открывает страницу "Яндекс.Маркет"'}),Ee=new r.Registry({id:Object(B.a)()});Ee.set("MMMarketSnippetLabel",function(e){var t=e.isMarketPlace,n=void 0!==t&&t;return c.a.createElement("div",{className:Object(B.a)("MarketLabel")},!n&&c.a.createElement(F.a,{className:Object(B.a)("MarketLabelIcon"),type:"market-logo"}),n?Ce:je)});n(626);var Se=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},_e=Object(u.a)(l.a),ke=S()(ae),Pe=Object(B.a)("ImageContainer"),Ie=Object(B.a)("Description"),xe=Object(B.a)("ShopInfo"),Me=Object(B.a)("BigPrice"),Ne=Object(B.a)("GreenUrl"),Te=Object(B.a)("MarketPlaceFavicon"),Re=Object(B.a)("Content"),De=Object(B.a)("Appendix"),Le=Object(B.a)("AppendixDivider"),Ae=Object(B.a)("TurboIcon"),Be=Object(r.withRegistry)(Ee)(function(e){var t=e.source,n=e.theme,o=e.url,i=e.domain,a=e.title,c=e.price,u=e.imageUrl,l=e.shopRating,p=e.modelRating,f=e.discount,g=e.oldPrice,y=e.currency,O=e.text,w=e.fullText,j=e.withButton,C=void 0===j||j,E=e.withImage,S=void 0===E||E,_=e.withDescription,k=void 0!==_&&_,P=e.withFavicon,I=void 0!==P&&P,x=e.buttonTheme,M=e.onShow,N=e.onButtonClick,T=e.onImageClick,R=e.onPathClick,D=e.onTitleClick,L=e.favicon,A=e.pos,q=e.isMarketPlace,z=e.experiments,W=e.children,G=Object(r.useComponentRegistry)(Object(B.a)()).MMMarketSnippetLabel;s.useEffect(function(){M&&M()},[o,M]);var Y=function(e){var t=e.source,n=e.pos,r=e.url,o=Object(v.c)(),i=s.useMemo(function(){return{props:{source:t,counters:o,pos:n,url:r}}},[n,r,o,t]),a=s.useMemo(function(){var e=ee("image",o,t);return{name:"image",events:{onClick:Object(m.logClick)(te("image").bind(null,i))},attrs:e&&e.attrs}},[o,i,t]),c=s.useMemo(function(){var e=ee("title",o,t);return{name:"title",events:{onClick:Object(m.logClick)(te("title").bind(null,i))},attrs:e&&e.attrs}},[o,i,t]),u=s.useMemo(function(){var e=ee("title",o,t);return{attrs:e&&e.attrs}},[o,t]);return{buttonLogNode:s.useMemo(function(){var e=ee("button",o,t);return{events:{onClick:Object(m.logClick)(te("button").bind(null,i))},attrs:e&&e.attrs}},[o,i,t]),pathLinkLogNode:u,titleLogNode:c,imageLogNode:a}}({pos:A,url:o,source:t}),K=Y.imageLogNode,X=Y.titleLogNode,Q=Y.pathLinkLogNode,J=Y.buttonLogNode,ne=Se(s.useState(!1),2),re=ne[0],oe=ne[1];Object(U.a)(function(){oe(!1)},[u]);var ie=Boolean(S&&u&&!re),ae="market"===t||"market-cpa"===t,se=s.useMemo(function(){return[{url:o,text:q?ke("Яндекс.Маркет",{context:'Подпись блока, который содержит данные из сервиса "Яндекс.Маркет"'}):i,onClick:R,logNode:Q}]},[o,i,q,R,Q]),ce=z.modelRating&&p&&0!==Number(p),ue=p&&ce&&s.createElement("div",{className:Object(B.a)("ModelRating",{level:p&&Math.floor(Number(p)),type:ie?"image-sticker":"title-suffix"})},parseFloat(p).toFixed(1).replace(".",",")),de=s.createElement("div",{className:Pe},s.createElement($,{url:o,imageUrl:u,title:a,onClick:T,onError:function(){return oe(!0)},logNode:K}),ie&&ue),pe=s.createElement(_e,{className:Object(B.a)("Title",{withModelRating:!ie&&Boolean(ue)},[h]),theme:"normal",url:o,onClick:D,logNode:X},a,!ie&&ue),fe=s.createElement(Z,{key:O||o,className:Ie,text:O||"",fullText:w,readMoreEnabled:z.readMore}),he=s.createElement(Oe,{value:l}),me=void 0;q?me=s.createElement(F.a,{className:Te,type:"market-logo"}):I&&L&&(me=s.createElement(b.a,{favicon:L}));var be=s.createElement("div",{className:xe},s.createElement(d.a,{className:Ne,favicon:me,items:se}),"turbo"===t&&s.createElement(F.a,{type:"turbo",className:Ae}),"market"===t&&!q&&he),ge=null;return ge=z.bigPrice?s.createElement(s.Fragment,null,s.createElement(V,{price:c,oldPrice:z.discount?g:void 0,discountPercent:z.discount?f:void 0,discountPosition:z.discountPosition,currency:y,className:Me}),s.createElement(ve,{url:o,withImage:ie,isMarketPlace:q,theme:x,onClick:N,logNode:J})):s.createElement(le,{currency:y,withImage:ie,theme:x,url:o,onClick:N,logNode:J,price:c}),s.createElement("div",{className:Object(B.a)({source:t,theme:n,withImage:ie,withDescription:k,withReadMore:z.readMore,withDescriptionWrap:z.descriptionWrap,withBigImage:"turbo"===t&&z.turboBigImage},[H.a])},z.marketLabel&&ae&&s.createElement(G,{isMarketPlace:q}),s.createElement("div",{className:Re},s.createElement("div",{className:Object(B.a)("Info",{withImage:ie})},ie&&de,pe,be,k&&O?fe:null,C&&ge)),W&&s.createElement("div",{className:De},s.createElement("div",{className:Le}),W))}),Ue=Object(v.d)(Object(m.withBaobab)({name:"MarketSnippet",events:{onShow:Object(m.logTech)("show",te("shown")),onPathClick:Object(m.logClick)(te("path"))}})(Be)),Fe=n(44),He=function(){return(He=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},qe=!1,ze=!0,We=!0,Ge=!0,Ve=!0,Ye=Object(o.compose)(Object(L.d)(function(e){var t,n=Object(g.m)(e),r=n&&n.marketSnippet,o=r&&Object(g.g)(e,r.punycode||r.domain),i=e.config.marketSnippetParams||{},a=i.withImage,s=void 0===a?Ge:a,c=i.withDescription,u=void 0===c?Ve:c,l=i.experiments,d=void 0===l?{}:l,p=i.buttonTheme;return He(He({withTitle:qe,withButton:ze,withFavicon:We,withDescription:u,withImage:s,experiments:d,buttonTheme:"turbo"===(null===(t=null===n||void 0===n?void 0:n.marketSnippet)||void 0===t?void 0:t.source)?"mm-secondary":p},n&&n.marketSnippet),{pos:n&&n.pos,favicon:o&&o.data})}),Object(Fe.a)(["domain","title","url","price"])),Ke=n(53),Xe=n(340),Qe=n(376),Je=n(348),Ze=n(11),$e=n(225),et=n(325),tt=n(82),nt=Object(o.compose)(et.a)($e.a),rt=Object(o.compose)(Object(L.d)(function(e,t,n){return Object(tt.b)(e,n)}),Object(Fe.a)(function(e){return Boolean(e.ads)}))(nt),ot=Object(i.cn)("MMViewerTags"),it=n(88),at=n(172),st={search:{icon:c.a.createElement("g",{fill:"none",fillRule:"evenodd"},c.a.createElement("path",{fill:"currentColor",fillRule:"nonzero",d:"M4.5 7.6a3.1 3.1 0 100-6.2 3.1 3.1 0 000 6.2zm0 1.4a4.5 4.5 0 110-9 4.5 4.5 0 010 9z"}),c.a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.4",d:"M10.5 10.5L7.4 7.4"})),size:12},more:{icon:c.a.createElement("g",{fill:"currentColor",fillRule:"evenodd"},c.a.createElement("circle",{cx:"2.5",cy:"8",r:"1.5"}),c.a.createElement("circle",{cx:"8",cy:"8",r:"1.5"}),c.a.createElement("circle",{cx:"13.5",cy:"8",r:"1.5"})),size:16}},ct=function(e){var t=e.className,n=e.icon,r=st[n],o=r.icon,i=r.size;return c.a.createElement("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+i+" "+i,width:12,height:12},o)};n(654);var ut,lt=s.memo(function(e){var t=e.text,n=e.tld,r=e.target,o=e.onClick,i=e.onVisible,a=e.expRedesign,c=s.useMemo(function(){return function(e,t){return Object(at.a)("images",e,{text:t,source:"related-duck"})}(n,t)},[n,t]),u=s.useCallback(function(e){return function(e,t){if(e&&e.parentElement){var n=e.parentElement.getBoundingClientRect().bottom;e.getBoundingClientRect().bottom>n||t&&t()}}(e,i)},[i]),l=s.useCallback(function(e){return o&&o(e,c)},[o,c]),d=1===a;return s.createElement("a",{ref:u,className:ot("Item",{expRedesign:Boolean(a)}),href:c,target:r||"_blank",onClick:l},d?s.createElement(ct,{className:ot("ItemIcon"),icon:"search"}):null,t)}),dt=Object(m.withBaobab)({name:"tag"})(lt),pt=s.memo(function(e){var t=e.expRedesign;return s.createElement("span",{className:ot("Item",{blink:!0,expRedesign:Boolean(t)})})}),ft=(n(657),function(){return c.a.createElement("div",{className:ot("Item",{expRedesign:!0},[ot("ItemMore")])},c.a.createElement(ct,{className:ot("ItemMoreIcon"),icon:"more"}))}),ht=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},mt=Object(i.cn)("FlexLineExpandable"),vt=(n(656),function(e){var t=e.margin,n=e.shrink,r=e.onClick,o=e.children;return c.a.createElement("div",{className:mt("Item"),style:{marginLeft:t,marginTop:t,flexShrink:n?1:0,maxWidth:"calc(100% - "+t+"px)"},onClick:r},o)}),bt=(n(655),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a});!function(e){e.calculating="calculating",e.line="line",e.expanded="expanded"}(ut||(ut={}));var gt=function(e){var t=e.className,n=e.items,r=e.more,o=e.margin,i=e.itemMinWidth,a=bt(function(e){var t={value:e},n=ht(Object(s.useState)(t),2),r=n[0],o=n[1],i=Object(s.useCallback)(function(e){e instanceof Function?o(function(t){return{value:e(t.value)}}):o({value:e})},[]);return[r.value,i]}(null),2),u=a[0],l=a[1],d=function(e){var t=e.items,n=e.more,r=e.margin,o=e.itemMinWidth,i=bt(Object(s.useState)(!1),2),a=i[0],c=i[1],u=Object(s.useCallback)(function(){return c(!0)},[]),l=ut.line;return Object(s.useMemo)(function(){return l=ut.calculating},[]),Object(s.useMemo)(function(){return l=ut.calculating},[t,n,r,o]),Object(s.useMemo)(function(){return a=!1},[t]),Object(s.useEffect)(function(){return c(!1)},[t]),{renderState:a?ut.expanded:l,onExpand:u}}(e),p=d.renderState,f=d.onExpand,h=Object(s.useCallback)(function(e){if(p===ut.calculating&&e){var t=function(e,t,n){var r=e.children,o=e.children[e.children.length-1],i=e.offsetWidth;if(!o||!r||!i)return;for(var a=o.offsetWidth+t,s=0;s<r.length-1;s++){var c=r[s],u=c.offsetLeft+c.offsetWidth,l=s===r.length-2;if(l&&u<=i)break;var d=i-u-a;if(d<0)return d+c.offsetWidth<n&&s--,s+1}return null}(e,o,i);"undefined"!==typeof t&&l(t)}},[p,o,i,l]),m=p===ut.line&&u||n.length;return c.a.createElement("div",{className:mt({expanded:p===ut.expanded},[t]),style:{marginLeft:-o,marginTop:-o},ref:h},n.slice(0,m).map(function(e,t){return c.a.createElement(vt,{key:t,margin:o,shrink:t===m-1&&p===ut.line},e)}),p===ut.calculating||p===ut.line&&null!==u?c.a.createElement(vt,{margin:o,onClick:f},r):null)};n(653);var yt,Ot=(yt=function(e,t){return(yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}yt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),wt=function(){return(wt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},jt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Ct=Object(i.cn)("MMViewerTags"),Et=function(e){function t(t){var n=e.call(this,t)||this;return n.visibleTagsCount=0,n.onTagVisible=n.onTagVisible.bind(n),n}return Ot(t,e),t.prototype.componentDidUpdate=function(){var e=this.props,t=e.tagsItem,n=e.reqid,r=e.rimPos,o=e.pos,i=e.rimid,a=e.onTagShow;if(t&&t.data&&t.data.length&&this.shownData!==t.data){if(a){var s={"-pos":o,"-visibleTags":this.visibleTagsCount};"undefined"!==typeof r&&(s["-rim_id"]=i,s["-rim_index"]=r),a(s,{reqid:n})}this.shownData=t.data}},t.prototype.render=function(){var e=this.props,t=e.tagsItem,n=e.expRedesign;return this.visibleTagsCount=0,t?n?t.data&&t.data.length?s.createElement("div",{className:Ct({expRedesign:!0})},s.createElement(gt,{items:this.renderItems(),more:s.createElement(ft,null),margin:6,itemMinWidth:1===n?85:65})):null:t.data&&t.data.length?s.createElement("div",{className:Ct()},this.renderItems()):null:s.createElement("div",{className:Ct({expRedesign:Boolean(n)})},s.createElement(pt,{expRedesign:n})," ",s.createElement(pt,{expRedesign:n}),!n&&s.createElement(s.Fragment,null,s.createElement(pt,null)," ",s.createElement(pt,null)))},t.prototype.renderItems=function(){var e=this,t=this.props,n=t.tagsItem,r=t.expRedesign,o=t.reqid,i=t.rimPos,a=t.rimid,c=t.pos,u=t.tagClickedCounter,l=t.onTagClick,d=t.tld,p=Object(g.a)(u),f={"-pos":c};return"undefined"!==typeof i&&(f["-rim_id"]=a,f["-rim_index"]=i),n&&n.data&&n.data.length?n.data.map(function(t,n){return s.createElement(dt,{onVisible:e.onTagVisible,onClick:l,tld:d,key:t,text:t,target:e.props.openServiceOnNewTab?"_blank":"_self",expRedesign:r,logNode:{attrs:p&&p.attrs,events:{onClick:Object(m.logClick)(Object(g.b)(u,wt(wt({},f),{"-tag-position":n,"-text":t}),{reqid:o,pos:c}))}}})}):[]},t.prototype.onTagVisible=function(){this.visibleTagsCount++},t}(s.Component);var St,_t,kt=function(e){var t,n=Object(g.m)(e),r=Object(g.e)(e);return{reqid:r&&r.reqid,pos:r&&r.pos,rimPos:e.rimSelectedIdx,rimid:n&&n.rimid,openServiceOnNewTab:e.config.openServiceOnNewTab,tld:e.globalContext.tld,tagsItem:Object(it.i)(e,Object(it.j)(Object(g.m)(e))),expRedesign:Number(null===(t=e.experiments)||void 0===t?void 0:t.duckRedesign)}};var Pt,It=function(e){return Object(L.d)(kt)(e)}((St=Et,_t=Object(m.withBaobab)({name:"tags"})(St),function(e){return s.createElement(v.a,null,function(t){return s.createElement(_t,wt({logNode:{events:{onTagShow:Object(m.logTech)("show",function(e,n){var r=jt(n,2),o=r[0],i=r[1];return Object(g.b)(t.tagsShown,o,i)})}},tagClickedCounter:t.tagsClicked},e))})})),xt=n(118),Mt=n(349),Nt=n(20),Tt=n(165),Rt=Object(i.cn)("MMSchemaOrgSnippet"),Dt=n(887),Lt=n(404),At=(n(646),Object(Dt.a)(Lt.a)),Bt=function(e){var t=e.url,n=e.redirUrl,r=e.onClick,o=e.logNode,i=e.children,a=e.minified,c=Rt("Title",{minified:a},[h]);return s.createElement(At,{className:c,theme:"normal",url:n||t,onClick:r,logNode:o},i)},Ut=n(47),Ft=n(171),Ht=(n(648),S()(Ft)),qt=Rt("GreenUrl"),zt=Rt("GreenUrlLine"),Wt=Rt("Favicon"),Gt=Rt("GreenUrlSeparator"),Vt=((Pt={})[Ut.d.inStock]=Ht("В наличии",{context:"Товар есть в наличии"}),Pt[Ut.d.preOrder]=Ht("Предзаказ",{context:"Товар доступен по предзаказу"}),Pt[Ut.d.soldOut]=Ht("Товар закончился",{context:"Товара нет в наличии"}),Pt),Yt=function(e){var t=e.availability,n=t&&Vt[t];return n?s.createElement(s.Fragment,null,s.createElement("div",{className:Gt}),s.createElement("div",{className:Rt("Availability",{type:t})},n)):null},Kt=Object(m.withBaobab)({name:"MMSchemaOrgSnippetGreenUrl",events:{onClick:Object(m.logClick)(function(e){return e.props.counter})}})(function(e){var t=e.url,n=e.redirUrl,r=e.domain,o=e.onClick,i=e.favicon,a=e.availability,c=s.useMemo(function(){return{name:"path",attrs:e.logNode&&e.logNode.attrs}},[e.logNode]),u=s.useMemo(function(){return[{url:n||t,text:r,onClick:o}]},[n,t,r,o]);return s.createElement("div",{className:zt},s.createElement(d.a,{logNode:c,className:qt,favicon:i?s.createElement(b.a,{className:Wt,favicon:i}):void 0,items:u}),s.createElement(Yt,{availability:a}))}),Xt=(n(647),function(e){var t=e.price,n=e.currency,r=e.minified;return s.createElement("div",{className:Rt("Price",{minified:r})},s.createElement(z.a,{value:t,currency:n||"RUB",rurSymbolFont:!0}))}),Qt=(n(651),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),Jt=S()(Ft),Zt=Rt("Description"),$t=Rt("ReadMore"),en=Object(Dt.a)(Lt.a),tn=Object(m.withBaobab)({name:"MMSchemaOrgSnippetDescription",events:{onExpand:Object(m.logClick)(function(e){var t=e.props;return Object(g.b)(t.readMoreCounter,{"-action":"expand"})}),onCollapse:Object(m.logClick)(function(e){var t=e.props;return Object(g.b)(t.readMoreCounter,{"-action":"collapse"})})}})(function(e){var t=e.text,n=e.onExpand,r=e.onCollapse,o=e.fullText,i=void 0===o?"":o,a=e.readMoreEnabled,c=(void 0===a||a)&&Boolean(i)&&i.length!==t.length,u=Qt(s.useState(!0),2),l=u[0],d=u[1],f=s.useCallback(function(){l?n&&n():r&&r(),d(!l)},[l,n,r]);return c?s.createElement("div",{className:Zt},s.createElement(p.a,{start:"<hl>",end:"</hl>"},l?t:i),s.createElement(en,{onClick:f,className:$t,theme:"normal"},l?Jt("Читать еще",{context:"Развернуть описание схема-орг сниппета"}):Jt("Скрыть",{context:"Свернуть описание схема-орг сниппета"}))):s.createElement("div",{className:Zt},s.createElement(p.a,{start:"<hl>",end:"</hl>"},t))}),nn=Object(i.cn)("OneLine"),rn=(n(650),function(e){var t=e.className,n=e.children;return c.a.createElement("div",{className:nn(null,[t])},n)}),on=(n(649),S()(Ft)),an=s.memo(function(e){var t=e.minified;return s.createElement(rn,{className:Rt("Disclaimer",{minified:t})},on("Цена и наличие товара могли измениться",{context:"Дисклеймер о несоответствии информации о товаре. https://nda.ya.ru/t/dtTnE1gK3YY8cW"}))}),sn=(n(652),Object(o.compose)(y.a,O.a,w.a,j.a)(C.a)),cn=Rt("Button"),un=S()(Ft),ln=Object(m.withBaobab)({name:"MMSchemaOrgSnippetButton",events:{onClick:Object(m.logClick)(function(e){return e.props.counter})}})(function(e){var t=e.url,n=e.onClick;return c.a.createElement(sn,{className:cn,theme:"action",width:"max",size:"m",type:"link",target:"_blank",url:t,onClick:n},un("В магазин",{context:"Надпись на кнопке перехода в магазин"}))}),dn=(n(645),function(){return(dn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),pn=Rt("Content"),fn=Rt("Info"),hn=Rt("ShopInfo"),mn=Rt("HeaderLine"),vn=Rt("TitlePriceSeparator"),bn=Rt("PriceWrap"),gn={},yn=Object(o.compose)(v.d,Object(m.withBaobab)({name:"MMSchemaOrgSnippetPresenter",events:{onShow:Object(m.logClick)(function(e){var t,n=e.props;return Object(g.b)(null===(t=n.counters.schemaOrg)||void 0===t?void 0:t.shown,{"-pinned":Number(Boolean(n.minified)),"-pos":n.pos,"-availability":n.availability},void 0,{href:n.url})})}}))(function(e){var t,n,r,o,i,a,c=e.minified,u=void 0!==c&&c,l=e.onShow,d=e.favicon,p=e.domain,f=e.title,h=e.url,v=e.redirUrl,b=e.price,y=e.currency,O=e.text,w=e.availability,j=e.fullText,C=e.pos,E=e.counters,S=e.aside,_=s.useCallback(function(e){return Object(g.b)(e,{"-pos":C,"-pinned":Number(u),"-availability":w},void 0,{href:h})},[C,u]);return s.useEffect(function(){gn.url!==h&&(gn={url:h}),u||gn.default||(gn.default=!0,l&&l()),u&&!gn.pinned&&(gn.pinned=!0,l&&l())},[h,l,u]),s.createElement("div",{className:Rt({},[H.a])},s.createElement("div",{className:pn},s.createElement("div",{className:fn},s.createElement("div",{className:Rt("HeaderWrap")},s.createElement("div",{className:mn},s.createElement(Bt,{minified:u,url:h,redirUrl:v,logNode:dn(dn({name:"MMSchemaOrgSnippetTitle"},Object(g.a)(null===(t=E.schemaOrg)||void 0===t?void 0:t.title)||{}),{events:{onClick:Object(m.logClick)(_(null===(n=E.schemaOrg)||void 0===n?void 0:n.title))}})},f),u?s.createElement("span",{className:vn},"–"):null,u?s.createElement(Xt,{price:b,minified:!0}):null),S&&s.createElement("div",{className:Rt("Aside")},S)),s.createElement("div",{className:hn},s.createElement(Kt,{logNode:Object(g.a)(null===(r=E.schemaOrg)||void 0===r?void 0:r.path),counter:_(null===(o=E.schemaOrg)||void 0===o?void 0:o.path),availability:w,favicon:d,url:h,redirUrl:v,domain:p})),u?s.createElement(an,{minified:!0}):null,u?null:s.createElement(s.Fragment,null,O?s.createElement(tn,{key:h,text:O,fullText:j,readMoreEnabled:!0,readMoreCounter:_(null===(i=E.schemaOrg)||void 0===i?void 0:i.readMore)}):null,s.createElement(an,null),s.createElement("div",{className:bn},s.createElement(Xt,{price:b,currency:y})),s.createElement(ln,{url:h,counter:_(null===(a=E.schemaOrg)||void 0===a?void 0:a.button)})))))}),On=function(){return(On=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},wn=Object(o.compose)(Object(L.d)(function(e){var t=Object(g.m)(e),n=t&&t.schemaOrgSnippet,r=n&&Object(g.g)(e,n.punycode||n.domain);return n&&"schemaorg"===n.source?On(On({},t&&t.schemaOrgSnippet),{shownImage:t,pos:t&&t.pos,favicon:r&&r.data}):{}}),Object(Fe.a)(["source"])),jn=Object(o.compose)(wn)(yn),Cn=new r.Registry({id:Object(f.a)()});Cn.set(a(),A(D)),Cn.set(Object(B.a)(),Ye(Ue)),Cn.set(Object(Ke.a)(),Object(o.compose)(Je.a,Qe.a)(Xe.a)),Cn.set(Rt(),jn),Cn.set(Object(Ze.a)(),rt),Cn.set(ot(),It),Cn.set(Object(xt.a)(),Mt.a),Cn.set(Object(Nt.a)(),Tt.a)},380:function(e,t,n){"use strict";n.d(t,"a",function(){return k});var r,o,i,a=n(1),s=n(243),c=n(85),u=(n(570),Object(a.withBemMod)(Object(c.a)(),{edgeCentered:"left"})),l=(Object(a.withBemMod)(Object(c.a)(),{edgeCentered:"right"}),Object(a.withBemMod)(Object(c.a)(),{edgeCentered:"both"}),n(571),Object(a.withBemMod)(Object(c.a)(),{vertical:!0})),d=n(0),p=n.n(d),f=n(4),h=Object(f.cn)("MMThumbImage"),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},v=(n(569),function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),b=(r="square",o=function(e){return function(t){var n=t.width,r=void 0===n?0:n,o=t.height,i=void 0===o?0:o,a=t.targetSize,s=t.fit,c=t.src,u=t.className,l=Object(d.useMemo)(function(){return function(e,t,n){var r;if(t&&e&&t>e&&t>n&&(r=(t/.02618-e/.02)/(t-n)),r)return r+"%"}(r,i,a)},[r,i,a]),f=i<a||r<a,m=i<a,b=Object(d.useMemo)(function(){return{yCentered:m,small:f}},[f,m]),g=Object(d.useMemo)(function(){return{backgroundPositionY:l,backgroundImage:"url("+c+")"}},[l,c]);return p.a.createElement(e,v({},t,{className:h({fit:s},[u])}),p.a.createElement("div",{className:h("Image",b),style:g}))}},function(e){var t=o(e);return function(n){return n.fit===r?p.a.createElement(t,m({},n)):p.a.createElement(e,m({},n))}}),g=n(2),y=Object(f.cn)("Cover"),O=y("StickersWrapper"),w=(n(567),p.a.memo(function(e){var t=e.top,n=e.topLeft,r=e.topRight,o=e.bottom,i=e.bottomLeft,a=e.bottomRight;return p.a.createElement(p.a.Fragment,null,t&&p.a.createElement("div",{className:y("Sticker",{top:!0})},t),n&&p.a.createElement("div",{className:y("Sticker",{topLeft:!0})},n),r&&p.a.createElement("div",{className:y("Sticker",{topRight:!0})},r),o&&p.a.createElement("div",{className:y("Sticker",{bottom:!0})},o),i&&p.a.createElement("div",{className:y("Sticker",{bottomLeft:!0})},i),a&&p.a.createElement("div",{className:y("Sticker",{bottomRight:!0})},a))})),j=(n(568),p.a.memo(function(e){var t=e.className,n=e.height,r=e.children,o=e.forwardRef,i=e.onHover,a=e.wrapHeight,s=Object(g.__rest)(e,["className","height","children","forwardRef","onHover","wrapHeight"]),c=Object(d.useCallback)(function(e){i&&i("mouseenter"===e.type,o)},[i,o]),u=p.a.createElement(w,Object(g.__assign)({},s));return p.a.createElement("div",{className:y(null,[t]),ref:o,style:{height:n},onMouseEnter:i?c:void 0,onMouseLeave:i?c:void 0},r&&p.a.createElement("div",{className:y("Content")},r),"undefined"!==typeof a?p.a.createElement("div",{className:O,style:{height:a}},u):u)})),C=function(){return(C=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},E=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},S=n(3),_=n(130),k=new S.Registry({id:Object(_.a)()}),P=(i=b(function(e){var t=e.className,n=e.children;return p.a.createElement("div",{className:h({},[t])},n)}),function(e){var t=e.stickers,n=E(e,["stickers"]);return p.a.createElement(j,C({},t),p.a.createElement(i,C({},n)))}),I=Object(a.compose)(u,l)(s.a);k.set("Gallery",I),k.set("Thumb",P)},381:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var r=n(0),o=n(7),i=n.n(o),a=n(5),s=n(883),c=n(33),u=n(31),l=n(41),d=n(135),p=n(6),f=n(145);var h,m=n(20),v=(n(578),n(24)),b=n(123),g=(h=function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),y=Object(d.a)(l.b),O=i()(b),w=Object(m.a)("AddToCollection"),j=Object(m.a)("FavoritesPopup"),C=function(){},E=function(e){var t=e.vars,n=e.reqid,o=e.text,i=e.innerRef;return r.createElement(u.a,null,function(e){return r.createElement(y,{className:w,text:o,icon:r.createElement(c.a,{type:"favorites-filled"}),url:"/collections/user/",type:l.a.link,forwardRef:i,logNode:{events:{onClick:Object(a.logClick)(Object(p.b)(e.favoriteLink,t,{reqid:n}))}}})})},S=function(e){var t=e.onClick,n=e.vars,o=e.reqid,i=e.text,s=e.innerRef;return r.createElement(u.a,null,function(e){return r.createElement(y,{className:w,text:i,icon:r.createElement(c.a,{type:"favorites-empty"}),onClick:t,forwardRef:s,logNode:{events:{onClick:Object(a.logClick)(Object(p.b)(e.favoriteAdd,n,{reqid:o}))}}})})},_=function(e){function t(t){var n=e.call(this,t)||this;return n.state={itemSavedToFavorite:!1,wasMounted:!1},n.wasMounted=!1,n.domNode=r.createRef(),n.getAddButton=n.getAddButton.bind(n),n.getGotoButton=n.getGotoButton.bind(n),n}return g(t,e),t.prototype.componentDidMount=function(){this.setState({wasMounted:!0})},t.prototype.componentWillUnmount=function(){this.setState({wasMounted:!1})},t.prototype.render=function(){var e,t=this.props,n=t.image,o=t.loggedIn,i=t.loginUrl,a=t.isFavorite,c=t.view;return e=this.state.wasMounted?r.createElement(s.Favorites,{loginUrl:i,card:function(e){var t=function(e){if(e)return e.dups&&e.dups.length?e.dups:e.images&&e.images.length?e.images:e.preview&&e.preview.length?e.preview:void 0}(e),n=Object(f.a)(e),r=n.title||"",o=t&&t[0],i=o?o.origin&&o.origin.url||o.url:"";return{doc_id:e.docid,description:r,content:(t||[]).map(function(e){return{source_type:"image",source:{url:(t=e,t?t.origin&&t.origin.url||t.url:"")}};var t}),source_meta:{page_title:r,page_url:n.url||e.imgHref||i,page_domain:n.domain||""}}}(n),sourceName:"lego_img_viewer",loggedIn:Boolean(o),goTo:this.getGotoButton,add:this.getAddButton,isFavorite:a,scope:this.domNode,popupMainOffset:c===v.b.compact?void 0:-1,popupClassName:j,popupZIndex:1}):a?this.getGotoButton({}):this.getAddButton({onClick:C}),r.createElement("span",{ref:this.domNode,className:Object(m.a)("AddToCollectionWrapper",{view:c,wide:n.previewUrl?void 0:"yes"})},e)},t.prototype.getAddButton=function(e){var t,n=this.props,o=n.image,i=n.reqid,a=n.view,s=e.innerRef,c=e.onClick;return t=a===v.b.twoLines&&o.previewUrl?"":a===v.b.twoLines&&!o.previewUrl||a===v.b.compact?O("В коллекцию",{context:"Кнопка в просмотрщике картинки https://nda.ya.ru/3UYbqR"}):O("Добавить в коллекцию",{context:"Кнопка в просмоторщике картинки https://nda.ya.ru/3UYbqR"}),r.createElement(S,{text:t,vars:{"-pos":o.pos},reqid:i,onClick:c,innerRef:s})},t.prototype.getGotoButton=function(e){var t,n=this.props,o=n.image,i=n.reqid,a=n.view,s=e.innerRef;return t=a===v.b.twoLines&&o.previewUrl?"":a===v.b.twoLines&&!o.previewUrl||a===v.b.compact?O("Перейти",{context:"Кнопка в просмотрщике картинки https://nda.ya.ru/3UYbqY"}):O("Перейти в коллекции",{context:"Кнопка в просмоторщике картинки https://nda.ya.ru/3UYbqY"}),r.createElement(E,{text:t,vars:{"-pos":o.pos},reqid:i,innerRef:s})},t}(r.Component)},383:function(e,t,n){},387:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(2),o=n(0),i=function(e,t){var n=Object(o.useRef)(!0);Object(o.useEffect)(function(){n.current?n.current=!1:e()},Object(r.__spread)([e],t))}},388:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(10),i={value:0,id:0},a=Object(r.createContext)(i);function s(e){void 0===e&&(e="xuniq");var t=Object(r.useContext)(a),n=Object(r.useMemo)(function(){return e+"-"+t.id+"-"+ ++t.value},[]);return console.assert(Object(o.a)()||t!==i,"При серверном рендеринге необходимо обернуть приложение в <SSRProvider> для синхронизации id между сервером и клиентом."),n}},39:function(e,t,n){"use strict";e.exports=n(73)},391:function(e,t,n){"use strict";var r;!function(e){e[e.disabled=0]="disabled",e[e.enabled=1]="enabled"}(r||(r={}))},392:function(e,t){},393:function(e,t,n){"use strict";var r,o;!function(e){e.organic="organic",e.wizard="wizard",e.adv="adv"}(r||(r={})),function(e){e.adv="banner"}(o||(o={}))},394:function(e,t){},395:function(e,t){},396:function(e,t){},397:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(2),o=n(0),i=n.n(o),a=n(1),s=n(175),c=(n(585),Object(a.withBemMod)(Object(s.b)(),{theme:"strong"},function(e){return function(t){t.theme;var n=Object(r.__rest)(t,["theme"]);return i.a.createElement(e,Object(r.__assign)({},n))}}))},398:function(e,t){},399:function(e,t){},4:function(e,t,n){"use strict";e.exports=n(68)},401:function(e,t,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),c=n(140),u=[],l=[];function d(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then(function(e){return n.loading=!1,n.loaded=e,e}).catch(function(e){throw n.loading=!1,n.error=e,e}),n}function p(e){var t={loading:!1,loaded:{},error:null},n=[];try{Object.keys(e).forEach(function(r){var o=d(e[r]);o.loading?t.loading=!0:(t.loaded[r]=o.loaded,t.error=o.error),n.push(o.promise),o.promise.then(function(e){t.loaded[r]=e}).catch(function(e){t.error=e})})}catch(e){t.error=e}return t.promise=Promise.all(n).then(function(e){return t.loading=!1,e}).catch(function(e){throw t.loading=!1,e}),t}function f(e,t){return s.createElement((n=e)&&n.__esModule?n.default:n,t);var n}function h(e,t){var d,p;if(!t.loading)throw new Error("react-loadable requires a `loading` component");var h=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:f,webpack:null,modules:null},t),m=null;function v(){return m||(m=e(h.loader)),m.promise}return u.push(v),"function"===typeof h.webpack&&l.push(function(){if(e=h.webpack,"object"===r(n.m)&&e().every(function(e){return"undefined"!==typeof e&&"undefined"!==typeof n.m[e]}))return v();var e}),p=d=function(t){function n(r){o(this,n);var a=i(this,t.call(this,r));return a.retry=function(){a.setState({error:null,loading:!0,timedOut:!1}),m=e(h.loader),a._loadModule()},v(),a.state={error:m.error,pastDelay:!1,timedOut:!1,loading:m.loading,loaded:m.loaded},a}return a(n,t),n.preload=function(){return v()},n.prototype.componentWillMount=function(){this._mounted=!0,this._loadModule()},n.prototype._loadModule=function(){var e=this;if(this.context.loadable&&Array.isArray(h.modules)&&h.modules.forEach(function(t){e.context.loadable.report(t)}),m.loading){"number"===typeof h.delay&&(0===h.delay?this.setState({pastDelay:!0}):this._delay=setTimeout(function(){e.setState({pastDelay:!0})},h.delay)),"number"===typeof h.timeout&&(this._timeout=setTimeout(function(){e.setState({timedOut:!0})},h.timeout));var t=function(){e._mounted&&(e.setState({error:m.error,loaded:m.loaded,loading:m.loading}),e._clearTimeouts())};m.promise.then(function(){t()}).catch(function(e){t()})}},n.prototype.componentWillUnmount=function(){this._mounted=!1,this._clearTimeouts()},n.prototype._clearTimeouts=function(){clearTimeout(this._delay),clearTimeout(this._timeout)},n.prototype.render=function(){return this.state.loading||this.state.error?s.createElement(h.loading,{isLoading:this.state.loading,pastDelay:this.state.pastDelay,timedOut:this.state.timedOut,error:this.state.error,retry:this.retry}):this.state.loaded?h.render(this.state.loaded,this.props):null},n}(s.Component),d.contextTypes={loadable:c.shape({report:c.func.isRequired})},p}function m(e){return h(d,e)}m.Map=function(e){if("function"!==typeof e.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return h(p,e)};var v=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.getChildContext=function(){return{loadable:{report:this.props.report}}},t.prototype.render=function(){return s.Children.only(this.props.children)},t}(s.Component);function b(e){for(var t=[];e.length;){var n=e.pop();t.push(n())}return Promise.all(t).then(function(){if(e.length)return b(e)})}v.propTypes={report:c.func.isRequired},v.childContextTypes={loadable:c.shape({report:c.func.isRequired}).isRequired},m.Capture=v,m.preloadAll=function(){return new Promise(function(e,t){b(u).then(e,t)})},m.preloadReady=function(){return new Promise(function(e,t){b(l).then(e,e)})},e.exports=m},402:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(e){var t=e.logged,n=e.counterParams,r=void 0===n?{}:n;this.logged=t,this.params=r}return e.prototype.send=function(e,t,n){var r=(this.logged?"-authorized=1":"-authorized=0")+(n?","+n:"");this.counter(e,r,t,this.params)},e.prototype.counter=function(e,t,n,r){r=r||{};var o,i=["reqid","yuid","serpid","service","ui"].reduce(function(e,t){return e+(r[t]?"/"+t+"="+r[t]:"")},"");window.Ya.SerpContext&&window.Ya.SerpContext.noSignTechTable&&(o=window.Ya.SerpContext.noSignTechTable);var a=window.Ya.SerpContext&&window.Ya.SerpContext.noSignTechTables||{};a.favorites&&(o=a.favorites);var s=document&&document.location&&document.location.host&&document.location.host.match(/^.*(\..+)$/),c="//yandex"+(s&&s[1]||".ru")+"/clck/click/pid=902/cid="+n+"/dtype=stred"+(e?"/path="+e:"")+(t?"/vars="+t:"")+i+(o?"/table="+o:"");(new Date).getTime(),document.location.href,document.createElement("IMG").setAttribute("src",c)},e}()},403:function(e,t,n){"use strict";function r(e){var t=!1;try{var n=document.createRange();n.selectNodeContents(e);var r=window.getSelection();if(!r)return!1;r.removeAllRanges(),r.addRange(n),t=document.execCommand("copy"),r.removeAllRanges()}catch(e){return!1}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.copyToBufferFromHtml=r,t.copyToBuffer=function(e){var t=document.createElement("div");t.textContent=e,document.body.appendChild(t);var n=r(t);return document.body.removeChild(t),n}},404:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(673),o=n(79),i=Object(o.b)(r.a);i.isBaobabNode=!0},406:function(e,t,n){"use strict";n.d(t,"a",function(){return $});var r=n(0),o=n.n(r),i=n(7),a=n.n(i),s=n(1),c=n(4),u=n(96),l=(n(584),Object(s.withBemMod)(Object(u.b)(),{theme:"normal"})),d=n(2),p=n(138),f=n(168);function h(e){if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function m(e){return e?(e.nodeName||"").toLowerCase():null}function v(e){return"html"===m(e)?e:e.parentNode||e.host||document.ownerDocument||document.documentElement}function b(e){var t,n=m(e);if(n&&["html","body"].indexOf(n)>=0)return e.ownerDocument.body;if(function(e){return e instanceof h(e).HTMLElement}(e)){var r=h(t=e).getComputedStyle(t),o=r.overflow,i=r.overflowX,a=r.overflowY;if(/auto|scroll|overlay|hidden/.test(o+a+i))return e}return b(v(e))}var g,y=function(e,t,n){return 0===e.indexOf(t)||n&&0===e.indexOf(n)},O=function(e,t){return e.indexOf("-"+t)>0},w={directions:["bottom-left","bottom-center","bottom-right","top-left","top-center","top-right","right-top","right-center","right-bottom","left-top","left-center","left-bottom"],mainOffset:0,secondaryOffset:0,tailOffset:0,viewportOffset:0,scope:{current:Object(p.a)()?document.body:null}},j={top:-9999,left:-9999},C=Object(s.withBemMod)(Object(u.b)(),{target:"anchor"},function(e){var t;return(t=function(t){function n(e){var n=t.call(this,e)||this;return n.state={direction:"bottom-left",forwarded:{},isAnchorVisible:!0},n.popupRef=Object(r.createRef)(),n.tailRef=Object(r.createRef)(),n.anchorScrollParents=[],n.subscribeToEvents=function(){n.anchorScrollParents=function e(t,n){if(void 0===n&&(n=[]),!t)return[document.body];var r=b(t),o="body"===m(r),i=n.concat(r);return o?i:i.concat(e(v(r)))}(n.props.anchor&&n.props.anchor.current||null),n.anchorScrollParents.forEach(function(e){e.addEventListener("scroll",n.updateRefsPosition)}),window.addEventListener("resize",n.updateRefsPosition),document.addEventListener("documentchange",n.updateRefsPosition)},n.unsubscribeFromEvents=function(){n.anchorScrollParents.forEach(function(e){e.removeEventListener("scroll",n.updateRefsPosition)}),window.removeEventListener("resize",n.updateRefsPosition),document.removeEventListener("documentchange",n.updateRefsPosition)},n.updateRefsPosition=function(){requestAnimationFrame(function(){var e=n.props.directions,t=n.getDrawingParams(e),r=t.direction,o=t.popupPosition,i=t.tailPosition;n.state.direction!==r&&n.setState({direction:r}),null!==n.popupRef.current&&(n.popupRef.current.style.top=o.top+"px",n.popupRef.current.style.left=o.left+"px"),null!==n.tailRef.current&&(n.tailRef.current.style.top=i.top+"px",n.tailRef.current.style.left=i.left+"px");var a=!n.props.hideWithAnchor||n.calcIsAnchorVisible();null!==n.popupRef.current&&(n.popupRef.current.style.display=a?"":"none")})},n.getPossibleDrawingParams=function(){var e=n.getAnchorDimensions(n.props.anchor),t=n.getViewportDimensions(),r=n.getOffsets();return n.props.directions.map(function(n){var o={direction:n,width:0,height:0,left:0,top:0};return y(n,"bottom")?(o.top=e.top+e.height+2*r.main,o.height=t.bottom-o.top-r.viewport):y(n,"top")?(o.height=e.top-t.top-r.main-r.viewport,o.top=e.top-o.height-r.main):(O(n,"center")?(o.height=t.bottom-t.top-2*r.viewport,o.top=e.top+(e.height-o.height)/2):O(n,"bottom")?(o.height=e.top+e.height-t.top-r.secondary-r.viewport,o.top=e.top+e.height-o.height-r.secondary):O(n,"top")&&(o.top=e.top+r.secondary,o.height=t.bottom-o.top-r.viewport),y(n,"left")?(o.width=e.left-t.left-r.main-r.viewport,o.left=e.left-o.width-r.main):(o.left=e.left+e.width+r.main,o.width=t.right-o.left-r.viewport)),O(n,"right")?(o.width=e.left+e.width-t.left-r.secondary-r.viewport,o.left=e.left+e.width-o.width-r.secondary):O(n,"left")?(o.left=e.left+r.secondary,o.width=t.right-o.left-r.viewport):O(n,"center")&&y(n,"top","bottom")&&(o.width=t.right-t.left-2*r.viewport,o.left=e.left+e.width/2-o.width/2),o})},console.assert(void 0!==e.anchor,'Для работы "withTargetAnchor" требуется наличие свойства "anchor".'),console.assert(0!==e.directions.length,'Для работы "withTargetAnchor" требуется наличие хотя бы одного направления для раскрытия.'),n}return Object(d.__extends)(n,t),n.prototype.componentDidMount=function(){this.props.visible&&this.setState({forwarded:{}}),this.shouldSubscribeToEvents()&&this.subscribeToEvents()},n.prototype.componentDidUpdate=function(e,t){var n=this;null===this.popupRef.current&&this.props.visible&&requestAnimationFrame(function(){n.setState({forwarded:{}})}),e.visible===this.props.visible&&e.anchor===this.props.anchor&&t.forwarded===this.state.forwarded||this.updateRefsPosition(),this.shouldSubscribeToEvents()?this.subscribeToEvents():this.unsubscribeFromEvents()},n.prototype.componentWillUnmount=function(){this.unsubscribeFromEvents()},n.prototype.render=function(){var t=this.props,n=t.anchor,r=(t.directions,t.mainOffset,t.motionless,t.secondaryOffset,t.tailOffset,t.target,t.viewportOffset,t.getPossibleDrawingParams),i=Object(d.__rest)(t,["anchor","directions","mainOffset","motionless","secondaryOffset","tailOffset","target","viewportOffset","getPossibleDrawingParams"]);return Object(p.a)()&&void 0!==r&&r(this.getPossibleDrawingParams()),o.a.createElement(e,Object(d.__assign)({},i,{unstable_essentialRefs:[n],direction:this.state.direction,innerRef:Object(f.a)(this.popupRef,this.props.innerRef),tailRef:Object(f.a)(this.tailRef,this.props.tailRef),position:j}))},n.prototype.shouldSubscribeToEvents=function(){return this.props.visible&&!this.props.motionless},n.prototype.getDrawingParams=function(e){var t,n,r={direction:"bottom-left",popupPosition:{top:0,left:0},tailPosition:{top:0,left:0}},o=this.getPopupDimensions(this.popupRef),i=this.getAnchorDimensions(this.props.anchor),a=this.getViewportDimensions(),s=this.getScopeDimensions(this.props.scope),c=0;try{for(var u=Object(d.__values)(e),l=u.next();!l.done;l=u.next()){var p=l.value,f=this.getPopupPosition(p,i,o),h=this.getViewportFactor(f,a,o);if((h>c||this.state.direction===p)&&(r.popupPosition={top:f.top-(s.top+window.pageYOffset),left:f.left-(s.left+window.pageXOffset)},r.direction=p,c=h),c>.99)break}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return null!==this.tailRef.current&&(r.tailPosition=this.getTailPosition(r.direction,i,o)),r},n.prototype.getPopupDimensions=function(e){var t={area:0,height:0,width:0,popupHeight:0,popupWidth:0};if(void 0!==e&&null!==e.current){var n=e.current,r=n.clientWidth,o=n.clientHeight,i=e.current.getBoundingClientRect(),a=i.width,s=i.height;t.area=r*o,t.height=Math.round(s),t.width=Math.round(a),t.popupHeight=o,t.popupWidth=r}return t},n.prototype.getAnchorDimensions=function(e){var t={left:0,top:0,height:0,width:0},n=e&&e.current,r=n&&n.offsetParent;if(n&&r){var o=n.getBoundingClientRect(),i=o.left,a=o.top;t.left=i+window.pageXOffset,t.top=a+window.pageYOffset,t.height=n.offsetHeight,t.width=n.offsetWidth}return t},n.prototype.getTailDimensions=function(){return null===this.tailRef.current?{size:0,withChildren:!1}:{size:this.tailRef.current.offsetWidth,withChildren:this.tailRef.current.hasChildNodes()}},n.prototype.getViewportDimensions=function(){return{top:window.pageYOffset,left:window.pageXOffset,bottom:window.pageYOffset+window.innerHeight,right:window.pageXOffset+window.innerWidth}},n.prototype.getScopeDimensions=function(e){var t={top:0,left:0};if(void 0!==e&&null!==e.current){var n=e.current.getBoundingClientRect(),r=n.left,o=n.top;t.top=o,t.left=r}return t},n.prototype.getPopupPosition=function(e,t,n){var r={left:0,top:0},o=this.getOffsets();return y(e,"bottom")?r.top=t.top+t.height+o.main:y(e,"top")?r.top=t.top-n.height-o.main:y(e,"left")?r.left=t.left-n.width-o.main:y(e,"right")&&(r.left=t.left+t.width+o.main),O(e,"right")?r.left=t.left+t.width-n.width-o.secondary:O(e,"left")?r.left=t.left+o.secondary:O(e,"bottom")?r.top=t.top+t.height-n.height-o.secondary:O(e,"top")?r.top=t.top+o.secondary:O(e,"center")&&(y(e,"top","bottom")?r.left=t.left+t.width/2-n.width/2:y(e,"left","right")&&(r.top=t.top+t.height/2-n.height/2)),r},n.prototype.getTailPosition=function(e,t,n){var r={left:0,top:0},o=this.getTailDimensions(),i=o.size,a=o.withChildren,s=a?i:i/2,c=this.getOffsets();if(y(e,"bottom")?r.top=-s:y(e,"top")?r.top=a?n.popupHeight:Math.floor(n.popupHeight-s):y(e,"left")?r.left=a?n.popupWidth:Math.floor(n.popupWidth-s):y(e,"right")&&(r.left=-s),O(e,"right"))r.left=n.popupWidth-Math.ceil(Math.min(n.popupWidth,t.width)/2)-s-c.tail;else if(O(e,"left"))r.left=Math.ceil(Math.min(n.popupWidth,t.width)/2)-s+c.tail;else if(O(e,"bottom"))r.top=n.popupHeight-Math.ceil(Math.min(n.popupHeight,t.height)/2)-s-c.tail;else if(O(e,"top"))r.top=Math.ceil(Math.min(n.popupHeight,t.height)/2)-s+c.tail;else if(O(e,"center")){var u=a?s/2:s;y(e,"top","bottom")?r.left=Math.ceil(n.popupWidth/2)-u+c.tail:r.top=Math.ceil(n.popupHeight/2)-u+c.tail}return r},n.prototype.getOffsets=function(){var e=this.props,t=e.mainOffset,n=e.secondaryOffset,r=e.tailOffset,o=e.viewportOffset,i=this.getTailDimensions();return{main:t>=0&&i.size>0?Math.max(t,Math.round(i.size*Math.SQRT1_2)):t,secondary:n,tail:r,viewport:o}},n.prototype.getViewportFactor=function(e,t,n){var r=0,o=this.getOffsets(),i=Math.max(e.left,t.left+o.viewport),a=Math.min(e.left+n.width,t.right-o.viewport),s=Math.max(e.top,t.top+o.viewport),c=Math.min(e.top+n.height,t.bottom-o.viewport);return i<a&&s<c&&(r=(a-i)*(c-s)/n.area),r},n.prototype.calcIsAnchorVisible=function(){if(!this.anchorScrollParents.length)return!0;for(var e=0;e<this.anchorScrollParents.length;e++){var t=this.anchorScrollParents[e].getBoundingClientRect(),n=Math.floor(t.top),r=Math.floor(t.height),o=this.props.anchor&&this.props.anchor.current;if(!o)return!1;var i=o.getBoundingClientRect(),a=Math.floor(i.top),s=Math.floor(i.height),c=Math.floor(y(this.state.direction,"top")?a:a+s);if(c<n||n+r<c)return!1;var u=Math.floor(t.left),l=Math.floor(t.width),d=Math.floor(i.left),p=Math.floor(i.width),f=Math.floor(y(this.state.direction,"left")?d:d+p);if(!(f>=u&&u+l>=f))return!1}return!0},n}(r.PureComponent)).defaultProps=w,t}),E=n(408),S=n(397),_=(n(586),n(673)),k=n(884),P=n(190),I=(n(590),Object(s.withBemMod)(Object(P.b)(),{size:"xxs"})),x=n(115),M=(n(593),function(e){var t=e.side,n=e.provider,r=Object(d.__rest)(e,["side","provider"]);return n(T("Icon",{side:t},[r.className]))}),N=(n(594),function(e){var t=e.children,n=e.className,r=Object(d.__rest)(e,["children","className"]);return o.a.createElement("span",Object(d.__assign)({},r,{className:T("Text",null,[n])}),t)}),T=(n(592),Object(c.cn)("Button2")),R={autoComplete:"off",pressKeys:[x.a.SPACE,x.a.ENTER],prvntKeys:[],as:"button",type:"button"},D=((g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={pressed:!1},t.internalInnerRef=Object(r.createRef)(),t.onKeyDown=function(e){Object(x.b)(e.keyCode,t.props.pressKeys)&&(t.setState({pressed:!0}),Object(x.b)(e.keyCode,t.props.prvntKeys)&&e.preventDefault()),void 0!==t.props.onKeyDown&&t.props.onKeyDown(e)},t.onKeyUp=function(e){Object(x.b)(e.keyCode,t.props.prvntKeys)&&e.preventDefault(),Object(x.b)(e.keyCode,t.props.pressKeys)&&t.setState({pressed:!1}),void 0!==t.props.onKeyUp&&t.props.onKeyUp(e)},t.onClick=function(e){null!==t.internalInnerRef.current&&t.internalInnerRef.current.focus(),void 0!==t.props.onClick&&t.props.onClick(e)},t.onMouseDown=function(e){navigator.userAgent.match(/safari/i)&&e.preventDefault(),t.setState({pressed:!0}),void 0!==t.props.onMouseDown&&t.props.onMouseDown(e)},t.onMouseUp=function(e){t.setState({pressed:!1}),void 0!==t.props.onMouseUp&&t.props.onMouseUp(e)},t.onMouseLeave=function(e){t.setState({pressed:!1}),void 0!==t.props.onMouseLeave&&t.props.onMouseLeave(e)},t}return Object(d.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.addonAfter,n=e.addonBefore,r=e.autoComplete,i=e.checked,a=e.children,s=e.icon,c=e.iconLeft,u=e.iconRight,l=e.progress,p=e.disabled,h=e.as,m=e.type,v=e.className,b=e.innerRef,g=e.controlRef,y=e.title,O=e.role,w=(e.pressKeys,e.prvntKeys,e.view,e.theme,e.baseline,e.pin,e.width,Object(d.__rest)(e,["addonAfter","addonBefore","autoComplete","checked","children","icon","iconLeft","iconRight","progress","disabled","as","type","className","innerRef","controlRef","title","role","pressKeys","prvntKeys","view","theme","baseline","pin","width"])),j=this.state.pressed,C=h;w["string"===typeof h?"ref":"innerRef"]=Object(f.a)(this.internalInnerRef,b,g);var E=c||s;return o.a.createElement(C,Object(d.__assign)({},w,{type:m,disabled:Boolean(l||p),className:T({checked:i,progress:l,pressed:j},[v]),onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onClick:this.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseLeave:this.onMouseLeave,"aria-pressed":i,"aria-disabled":p,autoComplete:r,title:y,role:O,"aria-busy":l}),n,E&&o.a.createElement(M,{provider:E,side:a&&c?"left":void 0}),u&&o.a.createElement(M,{provider:u,side:a?"right":void 0}),a&&o.a.createElement(N,null,a),t)},t}(r.PureComponent)).displayName=T(),g.defaultProps=R,g),L=(n(591),Object(s.withBemMod)(T(),{theme:"clear"})),A=(n(595),n(596),Object(s.withBemMod)(T(),{theme:"action"})),B=(n(597),n(598),Object(s.withBemMod)(T(),{size:"m"})),U=Object(s.withBemMod)(T(),{type:"link"},function(e){return function(t){t.type;var n=t.target,r=t.rel,i=t.url,a=t.disabled,s=t.tabIndex,c=Object(d.__rest)(t,["type","target","rel","url","disabled","tabIndex"]),u=r;return"_blank"===n&&void 0!==r&&-1===r.indexOf("noopener")&&(u=r+" noopener"),o.a.createElement(e,Object(d.__assign)({},c,{rel:u,target:n,disabled:a,pressKeys:[x.a.ENTER],href:a?void 0:i,tabIndex:a?-1:s,type:null,autoComplete:null,as:"a"}))}}),F=(n(599),n(579),Object(s.withBemMod)(Object(E.b)(),{view:"tooltip"})),H=(n(582),Object(s.withBemMod)(Object(E.b)(),{tone:"blue"})),q=n(672),z=(n(583),a()(q)),W=Object(s.compose)(F,l,C,Object(s.composeU)(H))(E.a),G=Object(s.compose)(S.a)(_.a),V=Object(s.compose)(k.a,I)(P.a),Y=Object(s.compose)(Object(s.composeU)(L,A),B,U)(D),K=Object(c.cn)("FavoritesPopup"),X=function(){return o.a.createElement("div",{className:K("Description")},o.a.createElement("div",{className:K("Progress")},o.a.createElement(V,{className:K("Spin"),progress:!0,view:"default",size:"xxs"}),z("Добавляем в коллекцию...")))},Q=function(e){var t=e.onEditButtonClick,n=e.onLinkClick,r=e.board;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:K("Description")},o.a.createElement("div",{className:K("Message")},z("Добавлено в")," ",o.a.createElement(G,{theme:"strong",onClick:n,href:r&&r.url,className:K("CollectionName")},r&&r.title))),o.a.createElement("div",{className:K("Buttons")},o.a.createElement(Y,{className:K("Button",{theme:"clear"}),size:"m",theme:"clear",onClick:t},z("Изменить")),o.a.createElement(Y,{className:K("Button",{theme:"action"}),size:"m",theme:"action",type:"link",url:r&&r.url,target:"_blank"},z("Перейти"))))},J=function(e){var t=e.onClose,n=e.board,r=e.onLinkClick,i=e.loginUrl;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:K("Description")},o.a.createElement("div",{className:K("Message")},z("Добавлено в")," ",o.a.createElement(G,{theme:"strong",onClick:r,href:n&&n.url,className:K("CollectionName")},n&&n.title)),o.a.createElement("div",{className:K("SubMessage")},z("Войдите, чтобы добавить в другую коллекцию"))),o.a.createElement("div",{className:K("Buttons")},o.a.createElement(Y,{className:K("Button",{theme:"clear"}),size:"m",theme:"clear",onClick:t},z("Не сейчас")),o.a.createElement(Y,{className:K("Button",{theme:"action"}),size:"m",theme:"action",type:"link",url:i},z("Войти и изменить"))))},Z=function(){return o.a.createElement("div",{className:K("Description")},o.a.createElement("div",{className:K("ErrorMessage")},z("Не удалось добавить в коллекцию")))},$=function(e){var t=e.anchor,n=e.scope,i=e.onClose,a=e.status,s=e.loggedIn,c=e.onClickEdit,u=e.board,l=e.counter,d=e.tone,p=e.loginUrl,f=e.mainOffset,h=e.zIndex,m=e.className,v=Object(r.useCallback)(function(){i(),l.send("1352.1382.2052.486","73362","-type=cross")},[i,l]),b=Object(r.useCallback)(function(){l.send("1352.1382.2052.486","73362","-type=cross")},[l]),g=Object(r.useCallback)(function(){c(),l.send("1352.1382.2052.2818","73320")},[c,l]),y=Object(r.useRef)(a);return"hidden"!==a&&(y.current=a),o.a.createElement(W,{className:K({tone:d},[m]),visible:"hidden"!==a,anchor:t,scope:n,onClose:i,target:"anchor",directions:["bottom-center","bottom-left","bottom-right"],theme:"normal",tone:d,view:"tooltip",zIndex:void 0===h?110001:h,mainOffset:f,hasTail:!0},o.a.createElement("div",{className:K("Close"),title:"Закрыть",onClick:v}),"progress"===y.current?o.a.createElement(X,null):null,"saved"!==y.current||s?null:o.a.createElement(J,{onClose:i,onLinkClick:b,loginUrl:p,board:u}),"saved"===y.current&&s?o.a.createElement(Q,{onEditButtonClick:g,onLinkClick:b,board:u}):null,"error"===a?o.a.createElement(Z,null):null)}},407:function(e,t,n){"use strict";n.d(t,"a",function(){return j});var r=n(2),o=n(0),i=n.n(o),a=n(1),s=n(4),c=n(3),u=(n(603),Object(s.cn)("Modal")),l=function(e){var t=e.children,n=e.className,a=e.contentVerticalAlign,s=void 0===a?"middle":a,l=e.hasAnimation,d=void 0===l||l,p=e.visible,f=e.onClick,h=Object(r.__rest)(e,["children","className","contentVerticalAlign","hasAnimation","visible","onClick"]),m=Object(o.useRef)(null),v=Object(c.useComponentRegistry)(u()).Popup;return i.a.createElement(v,Object(r.__assign)({},h,{className:u({visible:p,hasAnimation:d},[n]),visible:p,unstable_hostRef:m,onClick:f}),i.a.createElement("div",{className:u("Table")},i.a.createElement("div",{className:u("Cell",{align:s})},i.a.createElement("div",{ref:m,className:u("Content")},t))),i.a.createElement("div",{className:u("Overlay")}))};l.displayName=u();n(602);var d=Object(a.withBemMod)(u(),{theme:"normal"}),p=(n(604),n(408)),f=new c.Registry({id:u()});f.set("Popup",p.a);var h=Object(c.withRegistry)(f)(l),m=n(884),v=n(190),b=(n(605),Object(a.withBemMod)(Object(v.b)(),{size:"m"})),g=(n(600),n(601)),y=Object(a.compose)(d)(h),O=Object(a.compose)(m.a,b)(v.a),w=Object(s.cn)("FavoritesIframe"),j=function(e){function t(t){var n=e.call(this,t)||this;return n.win=window,n.state={saved:!1,cardData:void 0},n.loadIframeFirstTime=n.loadIframeFirstTime.bind(n),n.loadIframe=n.loadIframe.bind(n),n.onIframeLoad=n.onIframeLoad.bind(n),n.getLoaderUrl=n.getLoaderUrl.bind(n),n.getIframeUrl=n.getIframeUrl.bind(n),n.getRPCBridge=n.getRPCBridge.bind(n),n.modalClose=n.modalClose.bind(n),n}return Object(r.__extends)(t,e),t.prototype.componentDidUpdate=function(e){this.props.status!==e.status&&"load"===this.props.status&&(this.setState({saved:!1,cardData:void 0}),this.loadIframeFirstTime())},t.prototype.loadIframeFirstTime=function(e){if((this.currentIframeUrl&&e&&this.currentIframeUrl!==e||!e&&this.currentIframeUrl!==this.getIframeUrl())&&this.removeIfame(),void 0!==this.rpcBridge)return this.ready();this.loadIframe(e)},t.prototype.removeIfame=function(){this.rpcBridge&&(this.rpcBridge.clean(),this.rpcBridge=void 0,this.currentIframeUrl=void 0)},t.prototype.loadIframe=function(e){var t=this;this.setState({iframeUrl:e||this.getIframeUrl()},function(){t.currentIframeUrl=t.state.iframeUrl,t.rpcBridge=t.getRPCBridge(),t.rpcBridge.pushMessagesToStack=!0})},t.prototype.getRPCBridge=function(){return this.rpcBridge?this.rpcBridge:new g(this,{url:this.state.iframeUrl})},t.prototype.onIframeLoad=function(e){if(e&&e.target&&this.rpcBridge){var t=e.target;this.rpcBridge.contrAgent.win=t.contentWindow,this.rpcBridge.onIframeLoad()}},t.prototype.getLoaderUrl=function(){var e=this.props,t=e.loaderUrl,n=e.baseUrl,r=e.loaderVersion;return t||n+"/iframe-loader/'"+r+"/index.min.js"},t.prototype.getIframeUrl=function(){var e=this.props,t=e.source_type,n=e.iframeOrigin,r=void 0===n?location.origin:n,o=e.iframePath;return(this.state.iframeUrl||r+o)+(t?"&source_type="+t:"")},t.prototype.ready=function(){this.addCard(),this.props.readyIframe()},t.prototype.close=function(e){this.cardSaved(e,this.modalClose)},t.prototype.cardSaved=function(e,t){void 0===t&&(t=function(){}),e&&e.card&&e.card.board?this.setState({saved:!0,cardData:e},t):this.setState({saved:!1,cardData:void 0},t)},t.prototype.addCard=function(){this.props.card&&this.props.card.task_id?this.props.counter.send("1352.1544.487.2818","73311"):this.props.counter.send("1352.1544.487.160","73310"),void 0!==this.rpcBridge&&this.rpcBridge.invokeMethod("pdb-add-card",{card:this.props.card,sourceName:this.props.sourceName})},t.prototype.modalClose=function(){var e=this.state,t=e.cardData,n=e.saved;this.props.onClose(),n||(this.props.closeIframe({eventName:"closed"}),this.props.counter.send("1352.1544.486.3177","73319")),n&&t&&t.card&&this.props.closeIframe({eventName:"saved",card:t.card})},t.prototype.render=function(){var e=this.props,t=e.status,n=e.zIndex,r=this.state.iframeUrl,o={display:"block",width:"100%",height:"100%",zIndex:n,border:0,transform:"translate3d(0px, 0px, 0px)"};return i.a.createElement(y,{className:w({theme:"normal"}),visible:"hidden"!==t,onClose:this.modalClose,theme:"normal",zIndex:n},"load"===t?i.a.createElement(O,{progress:!0,view:"default",size:"m"}):null,r?i.a.createElement("div",{className:w("Content")},i.a.createElement("iframe",{src:r,style:o,onWheel:function(){},onLoad:this.onIframeLoad,"aria-hidden":!0})):null)},t.defaultProps={zIndex:110002,baseUrl:"https://yastatic.net/q/global-notifications",loaderVersion:"v0.0.3",iframePath:"/collections/add/?bus=2"},t}(i.a.Component)},408:function(e,t,n){"use strict";n.d(t,"b",function(){return o.b}),n.d(t,"a",function(){return u});var r=n(3),o=n(96),i=n(2),a=n(0),s=n.n(a),c=(n(581),new r.Registry({id:Object(o.b)()}));c.set("Tail",function(e){var t=e.className,n=e.innerRef,r=e.children,a=Object(i.__rest)(e,["className","innerRef","children"]);return s.a.createElement("div",Object(i.__assign)({},a,{className:Object(o.b)("Tail",null,[t]),ref:n}),r)});var u=Object(r.withRegistry)(c)(o.a)},409:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(2);var o="undefined"!==typeof window&&window.document&&window.document.createElement;var i=n(606),a=function(){function e(){}return e.getInstance=function(){if(!o)throw new Error("Нельзя иметь инстанс FavoritesController на сервере");return this.instance||(this.instance=new e),this.instance},e.prototype.createCard=function(e,t,n,o,i){var a=this,s=!1;if(!e||!e.doc_id)return new Promise(function(t){t({eventName:"saved",card:Object(r.__assign)(Object(r.__assign)({},e),{failed:!0})})});if("undefined"!==typeof t&&(s=!t),n[e.content[0].source_type]||s){var c=Object(r.__assign)(Object(r.__assign)({},e),{board:n&&n[e.content[0].source_type]});return this.favoritesRequest("POST",c,void 0,i).then(function(t){return a.favoritesRequestSuccess("create",e.doc_id,t.task_id,o),t}).then(function(t){return a.favoritesRequestFinally("create",e.doc_id,e,t,o)})}return new Promise(function(t){t({eventName:"iframe",card:e,fav:!0})})},e.prototype.addCard=function(e,t,n,o,i){var a=this,s=Object(r.__assign)({},t);return s.board=n,this.favoritesRequest("POST",s,void 0,i).then(function(t){return a.favoritesRequestSuccess("create",e,t.task_id,o),t}).then(function(n){return a.favoritesRequestFinally("create",e,t,n,o)})},e.prototype.removeCard=function(e,t,n,r,o){var i=this,a=n.cardId||void 0;return!a&&t&&t.card_id&&(a=t.card_id),a?this.favoritesRequest("DELETE",{},a,o).then(function(t){return i.favoritesRequestSuccess("remove",e,t.task_id,r),t}).then(function(n){return i.favoritesRequestFinally("remove",e,t,n,r)}):this.oldRemoveCard(e,t,n,r)},e.prototype.oldRemoveCard=function(e,t,n,o){var i=this,a=Object(r.__assign)({},t);return n&&n.byTaskId&&(a.task_id=n.taskId),fetch("/collections/api/favorites/cards/",{credentials:"same-origin",method:"DELETE",headers:{contentType:"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(t){return i.favoritesRequestSuccess("remove",e,t.task_id,o),t}).then(function(n){return i.favoritesRequestFinally("remove",e,t,n,o)})},e.prototype.moveCollectionsCard=function(e,t,n,r){var o=this;if(t&&e.card_id)return this.favoritesRequest("PATCH",{board_id:t},e.card_id,r).then(function(t){return o.favoritesRequestSuccess("move",e.item_id,t.task_id,n),t}).then(function(t){return o.favoritesRequestFinally("move",e.item_id,e,t,n)})},e.prototype.favoritesRequest=function(e,t,n,r){var o="/collections/api/v1.0/cards"+(n?"/"+n:"")+"?source_name="+(r||"serp-components")+"&source_version="+i+"&ui=common";return this.getCrf().then(function(n){return fetch(o,{credentials:"same-origin",method:e,headers:{"Content-Type":"application/json","x-csrftoken":n["csrf-token"]},body:JSON.stringify(t)}).then(function(e){return e.json()})})},e.prototype.favoritesRequestSuccess=function(e,t,n,r){"create"===e&&r(t,{taskId:n})},e.prototype.favoritesRequestFinally=function(e,t,n,o,i){var a="create"===e||"move"===e?"saved":"removed",s=Boolean(o&&o.id);if(!o)return{eventName:a,card:Object(r.__assign)(Object(r.__assign)({},n),{failed:!0})};if("remove"!==e){var c={cardId:o.id};s&&(c.isSaved=s),i(t,c)}else i(t,{isSaved:!1});return{eventName:a,card:Object(r.__assign)(Object(r.__assign)({},n),{id:o.id,item_id:t,failed:!s,card_id:o.id,task_id:o.task_id,board:o.board})}},e.prototype.getCrf=function(){var e=this,t=this.crfToken&&this.crfToken.expires;return t&&1e3*Number(new Date(Number(t)))>Number(new Date)?new Promise(function(t){t(e.crfToken)}):fetch("/collections/api/v1.0/csrf-token",{credentials:"same-origin",method:"get",headers:{contentType:"application/json"}}).then(function(e){return e.json()}).then(function(t){return e.crfToken=t,t})},e}()},41:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return c});var r,o=n(0),i=n(4),a=n(5);n(577);!function(e){e.default="",e.link="link"}(r||(r={}));var s=Object(i.cn)("MMButton"),c=Object(a.withBaobab)({name:"MMButton",events:{onClick:Object(a.logClick)()}})(function(e){var t=e.text,n=e.icon,r=e.rightIcon,i=e.rightText,a=e.onClick,c=e.className,u=e.forwardRef,l=e.onLog,d=e.counter,p=e.onContextMenuCapture,f=e.onMouseEnter,h=e.onMouseLeave;return o.createElement("button",{className:s({},[c]),onClick:function(e){a&&a(e),l&&l(d)},onMouseEnter:f,onMouseOut:h,onContextMenuCapture:p,ref:u},n&&o.createElement("span",{className:s("Icon")},n),o.createElement("span",{className:s("Text")},t),i&&o.createElement("span",{className:s("RightText")},i),r&&o.createElement("span",{className:s("RightIcon")},r))})},410:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n.n(r),i=n(4),a=Object(i.cn)("Rub"),s=(n(632),a()),c=function(){return o.a.createElement("span",{className:s},"Р")}},412:function(e,t,n){n.r(t);var r=n(2302);n.d(t,"ru",function(){return r.a})},414:function(e,t,n){},421:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0);function o(e){var t=Object(r.useRef)();return Object(r.useEffect)(function(){t.current=e}),t.current}},426:function(e,t,n){},429:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useFirstMountState=void 0;var r=n(0);t.useFirstMountState=function(){var e=r.useRef(!0);return e.current?(e.current=!1,!0):e.current}},430:function(e,t,n){},431:function(e,t,n){},433:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(30),i=(n(328),Object(r.withBemMod)(Object(o.b)(),{view:"default"}))},434:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(2),o=n(0),i=n.n(o),a=n(1),s=n(10),c=n(19),u=n(30);function l(e){if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function d(e){return e?(e.nodeName||"").toLowerCase():null}function p(e){return"html"===d(e)?e:e.parentNode||e.host||document.ownerDocument||document.documentElement}function f(e){var t,n=d(e);if(n&&["html","body"].indexOf(n)>=0)return e.ownerDocument.body;if(function(e){return e instanceof l(e).HTMLElement}(e)){var r=l(t=e).getComputedStyle(t),o=r.overflow,i=r.overflowX,a=r.overflowY;if(/auto|scroll|overlay|hidden/.test(o+a+i))return e}return f(p(e))}var h=function(e,t,n){return 0===e.indexOf(t)||n&&0===e.indexOf(n)},m=function(e,t){return e.indexOf("-"+t)>0},v={directions:["bottom-left","bottom-center","bottom-right","top-left","top-center","top-right","right-top","right-center","right-bottom","left-top","left-center","left-bottom"],mainOffset:0,secondaryOffset:0,tailOffset:0,viewportOffset:0,scope:{current:Object(s.a)()?document.body:null}},b={top:-9999,left:-9999},g=Object(a.withBemMod)(Object(u.b)(),{target:"anchor"},function(e){var t;return(t=function(t){function n(e){var n=t.call(this,e)||this;return n.state={direction:"bottom-left",forwarded:{},isAnchorVisible:!0},n.popupRef=Object(o.createRef)(),n.tailRef=Object(o.createRef)(),n.anchorScrollParents=[],n.subscribeToEvents=function(){n.anchorScrollParents=function e(t,n){if(void 0===n&&(n=[]),!t)return[document.body];var r=f(t),o="body"===d(r),i=n.concat(r);return o?i:i.concat(e(p(r)))}(n.props.anchor&&n.props.anchor.current||null),n.anchorScrollParents.forEach(function(e){e.addEventListener("scroll",n.updateRefsPosition)}),window.addEventListener("resize",n.updateRefsPosition),document.addEventListener("documentchange",n.updateRefsPosition)},n.unsubscribeFromEvents=function(){n.anchorScrollParents.forEach(function(e){e.removeEventListener("scroll",n.updateRefsPosition)}),window.removeEventListener("resize",n.updateRefsPosition),document.removeEventListener("documentchange",n.updateRefsPosition)},n.updateRefsPosition=function(){requestAnimationFrame(function(){var e=n.props.directions,t=n.getDrawingParams(e),r=t.direction,o=t.popupPosition,i=t.tailPosition;n.state.direction!==r&&n.setState({direction:r}),null!==n.popupRef.current&&(n.popupRef.current.style.top=o.top+"px",n.popupRef.current.style.left=o.left+"px"),null!==n.tailRef.current&&(n.tailRef.current.style.top=i.top+"px",n.tailRef.current.style.left=i.left+"px");var a=!n.props.hideWithAnchor||n.calcIsAnchorVisible();null!==n.popupRef.current&&(n.popupRef.current.style.display=a?"":"none")})},n.getPossibleDrawingParams=function(){var e=n.getAnchorDimensions(n.props.anchor),t=n.getViewportDimensions(),r=n.getOffsets();return n.props.directions.map(function(n){var o={direction:n,width:0,height:0,left:0,top:0};return h(n,"bottom")?(o.top=e.top+e.height+2*r.main,o.height=t.bottom-o.top-r.viewport):h(n,"top")?(o.height=e.top-t.top-r.main-r.viewport,o.top=e.top-o.height-r.main):(m(n,"center")?(o.height=t.bottom-t.top-2*r.viewport,o.top=e.top+(e.height-o.height)/2):m(n,"bottom")?(o.height=e.top+e.height-t.top-r.secondary-r.viewport,o.top=e.top+e.height-o.height-r.secondary):m(n,"top")&&(o.top=e.top+r.secondary,o.height=t.bottom-o.top-r.viewport),h(n,"left")?(o.width=e.left-t.left-r.main-r.viewport,o.left=e.left-o.width-r.main):(o.left=e.left+e.width+r.main,o.width=t.right-o.left-r.viewport)),m(n,"right")?(o.width=e.left+e.width-t.left-r.secondary-r.viewport,o.left=e.left+e.width-o.width-r.secondary):m(n,"left")?(o.left=e.left+r.secondary,o.width=t.right-o.left-r.viewport):m(n,"center")&&h(n,"top","bottom")&&(o.width=t.right-t.left-2*r.viewport,o.left=e.left+e.width/2-o.width/2),o})},console.assert(void 0!==e.anchor,'Для работы "withTargetAnchor" требуется наличие свойства "anchor".'),console.assert(0!==e.directions.length,'Для работы "withTargetAnchor" требуется наличие хотя бы одного направления для раскрытия.'),n}return Object(r.__extends)(n,t),n.prototype.componentDidMount=function(){this.props.visible&&this.setState({forwarded:{}}),this.shouldSubscribeToEvents()&&this.subscribeToEvents()},n.prototype.componentDidUpdate=function(e,t){var n=this;null===this.popupRef.current&&this.props.visible&&requestAnimationFrame(function(){n.setState({forwarded:{}})}),e.visible===this.props.visible&&e.anchor===this.props.anchor&&t.forwarded===this.state.forwarded||this.updateRefsPosition(),this.shouldSubscribeToEvents()?this.subscribeToEvents():this.unsubscribeFromEvents()},n.prototype.componentWillUnmount=function(){this.unsubscribeFromEvents()},n.prototype.render=function(){var t=this.props,n=t.anchor,o=(t.directions,t.mainOffset,t.motionless,t.secondaryOffset,t.tailOffset,t.target,t.viewportOffset,t.getPossibleDrawingParams),a=Object(r.__rest)(t,["anchor","directions","mainOffset","motionless","secondaryOffset","tailOffset","target","viewportOffset","getPossibleDrawingParams"]);return Object(s.a)()&&void 0!==o&&o(this.getPossibleDrawingParams()),i.a.createElement(e,Object(r.__assign)({},a,{unstable_essentialRefs:[n],direction:this.state.direction,innerRef:Object(c.a)(this.popupRef,this.props.innerRef),tailRef:Object(c.a)(this.tailRef,this.props.tailRef),position:b}))},n.prototype.shouldSubscribeToEvents=function(){return this.props.visible&&!this.props.motionless},n.prototype.getDrawingParams=function(e){var t,n,o={direction:"bottom-left",popupPosition:{top:0,left:0},tailPosition:{top:0,left:0}},i=this.getPopupDimensions(this.popupRef),a=this.getAnchorDimensions(this.props.anchor),s=this.getViewportDimensions(),c=this.getScopeDimensions(this.props.scope),u=0;try{for(var l=Object(r.__values)(e),d=l.next();!d.done;d=l.next()){var p=d.value,f=this.getPopupPosition(p,a,i),h=this.getViewportFactor(f,s,i);if((h>u||this.state.direction===p)&&(o.popupPosition={top:f.top-(c.top+window.pageYOffset),left:f.left-(c.left+window.pageXOffset)},o.direction=p,u=h),u>.99)break}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return null!==this.tailRef.current&&(o.tailPosition=this.getTailPosition(o.direction,a,i)),o},n.prototype.getPopupDimensions=function(e){var t={area:0,height:0,width:0,popupHeight:0,popupWidth:0};if(void 0!==e&&null!==e.current){var n=e.current,r=n.clientWidth,o=n.clientHeight,i=e.current.getBoundingClientRect(),a=i.width,s=i.height;t.area=r*o,t.height=Math.round(s),t.width=Math.round(a),t.popupHeight=o,t.popupWidth=r}return t},n.prototype.getAnchorDimensions=function(e){var t={left:0,top:0,height:0,width:0},n=e&&e.current,r=n&&n.offsetParent;if(n&&r){var o=n.getBoundingClientRect(),i=o.left,a=o.top;t.left=i+window.pageXOffset,t.top=a+window.pageYOffset,t.height=n.offsetHeight,t.width=n.offsetWidth}return t},n.prototype.getTailDimensions=function(){return null===this.tailRef.current?{size:0,withChildren:!1}:{size:this.tailRef.current.offsetWidth,withChildren:this.tailRef.current.hasChildNodes()}},n.prototype.getViewportDimensions=function(){return{top:window.pageYOffset,left:window.pageXOffset,bottom:window.pageYOffset+window.innerHeight,right:window.pageXOffset+window.innerWidth}},n.prototype.getScopeDimensions=function(e){var t={top:0,left:0};if(void 0!==e&&null!==e.current){var n=e.current.getBoundingClientRect(),r=n.left,o=n.top;t.top=o,t.left=r}return t},n.prototype.getPopupPosition=function(e,t,n){var r={left:0,top:0},o=this.getOffsets();return h(e,"bottom")?r.top=t.top+t.height+o.main:h(e,"top")?r.top=t.top-n.height-o.main:h(e,"left")?r.left=t.left-n.width-o.main:h(e,"right")&&(r.left=t.left+t.width+o.main),m(e,"right")?r.left=t.left+t.width-n.width-o.secondary:m(e,"left")?r.left=t.left+o.secondary:m(e,"bottom")?r.top=t.top+t.height-n.height-o.secondary:m(e,"top")?r.top=t.top+o.secondary:m(e,"center")&&(h(e,"top","bottom")?r.left=t.left+t.width/2-n.width/2:h(e,"left","right")&&(r.top=t.top+t.height/2-n.height/2)),r},n.prototype.getTailPosition=function(e,t,n){var r={left:0,top:0},o=this.getTailDimensions(),i=o.size,a=o.withChildren,s=a?i:i/2,c=this.getOffsets();if(h(e,"bottom")?r.top=-s:h(e,"top")?r.top=a?n.popupHeight:Math.floor(n.popupHeight-s):h(e,"left")?r.left=a?n.popupWidth:Math.floor(n.popupWidth-s):h(e,"right")&&(r.left=-s),m(e,"right"))r.left=n.popupWidth-Math.ceil(Math.min(n.popupWidth,t.width)/2)-s-c.tail;else if(m(e,"left"))r.left=Math.ceil(Math.min(n.popupWidth,t.width)/2)-s+c.tail;else if(m(e,"bottom"))r.top=n.popupHeight-Math.ceil(Math.min(n.popupHeight,t.height)/2)-s-c.tail;else if(m(e,"top"))r.top=Math.ceil(Math.min(n.popupHeight,t.height)/2)-s+c.tail;else if(m(e,"center")){var u=a?s/2:s;h(e,"top","bottom")?r.left=Math.ceil(n.popupWidth/2)-u+c.tail:r.top=Math.ceil(n.popupHeight/2)-u+c.tail}return r},n.prototype.getOffsets=function(){var e=this.props,t=e.mainOffset,n=e.secondaryOffset,r=e.tailOffset,o=e.viewportOffset,i=this.getTailDimensions();return{main:t>=0&&i.size>0?Math.max(t,Math.round(i.size*Math.SQRT1_2)):t,secondary:n,tail:r,viewport:o}},n.prototype.getViewportFactor=function(e,t,n){var r=0,o=this.getOffsets(),i=Math.max(e.left,t.left+o.viewport),a=Math.min(e.left+n.width,t.right-o.viewport),s=Math.max(e.top,t.top+o.viewport),c=Math.min(e.top+n.height,t.bottom-o.viewport);return i<a&&s<c&&(r=(a-i)*(c-s)/n.area),r},n.prototype.calcIsAnchorVisible=function(){if(!this.anchorScrollParents.length)return!0;for(var e=0;e<this.anchorScrollParents.length;e++){var t=this.anchorScrollParents[e].getBoundingClientRect(),n=Math.floor(t.top),r=Math.floor(t.height),o=this.props.anchor&&this.props.anchor.current;if(!o)return!1;var i=o.getBoundingClientRect(),a=Math.floor(i.top),s=Math.floor(i.height),c=Math.floor(h(this.state.direction,"top")?a:a+s);if(c<n||n+r<c)return!1;var u=Math.floor(t.left),l=Math.floor(t.width),d=Math.floor(i.left),p=Math.floor(i.width),f=Math.floor(h(this.state.direction,"left")?d:d+p);if(!(f>=u&&u+l>=f))return!1}return!0},n}(o.PureComponent)).defaultProps=v,t})},44:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function i(e){return function(t){var n;return(n=Array.isArray(e)?function(n){return function(e,t){return t.every(function(t){return void 0!==e[t]})}(n,e)?r.createElement(t,o({},n)):null}:function(n){return e(n)?r.createElement(t,o({},n)):null}).displayName=t.displayName||t.name||"Component",n}}},444:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(9),i=(n(247),Object(r.withBemMod)(Object(o.b)(),{size:"s"}))},447:function(e,t,n){},448:function(e,t,n){},449:function(e,t,n){},45:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("MMSidebar")},451:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markup=function(e,t){for(var n,r,o=t.delimiters,i=t.highlighter,a=t.textPreprocessor,s=o.start,c=o.end,u=[],l=[],d=0,p=0,f=0,h=function(t){var o=!1===r?n:e.indexOf(s,t),i=!0===r?n:e.indexOf(c,t);return o>-1&&(o<i||-1===i)?(n=i,r=!0,d=s.length,o):(n=o,r=!1,d=c.length,i)},m=h(0);m>-1;){if(p!==m&&l.push(a(e.substring(p,m))),r)u.push(l),l=[];else if(u.length){var v=l;l=u.pop(),v.length&&l.push(i(v,f++))}m=h(p=m+d)}var b=e.substring(p);for(b&&l.push(a(b));u.length;)v=l,l=u.pop(),v.length&&l.push(i(v,f++));return l}},452:function(e,t,n){},453:function(e,t,n){},454:function(e,t,n){},455:function(e,t,n){},456:function(e,t,n){},457:function(e,t,n){},458:function(e,t,n){},459:function(e,t,n){},460:function(e,t,n){},461:function(e,t,n){},462:function(e,t,n){},47:function(e,t,n){"use strict";var r,o,i,a,s,c;n.d(t,"d",function(){return r}),n.d(t,"e",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"f",function(){return c}),function(e){e.soldOut="soldOut",e.inStock="inStock",e.preOrder="preOrder"}(r||(r={})),function(e){e.disabled="disabled",e.withoutDSnMarket="withoutDSnMarket",e.withoutDS="withoutDS",e.withoutMarket="withoutMarket",e.always="always"}(o||(o={})),function(e){e[e.disabled=0]="disabled",e[e.top=1]="top",e[e.bottom=2]="bottom"}(i||(i={})),function(e){e.disabled="",e.left="left",e.right="right"}(a||(a={})),function(e){e[e.disabled=0]="disabled",e[e.commercial=1]="commercial",e[e.lowcomm=2]="lowcomm",e[e.all=3]="all"}(s||(s={})),function(e){e.open="images-viewer:open",e.fill="images-viewer:fill",e.mounted="images-viewer:mounted"}(c||(c={}))},48:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=function(e){return window.Ya.SerpContext[e]},o=function(e){return(r("expFlags")||{})[e]},i=function(e){return Boolean(o(e))}},5:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(146)),r(n(147)),r(n(148)),r(n(102)),r(n(103)),r(n(149)),r(n(150)),r(n(104)),r(n(77)),r(n(155)),r(n(156)),r(n(76)),r(n(157)),r(n(158)),r(n(159)),r(n(37))},51:function(e,t,n){"use strict";var r=n(0);t.a=function(e){Object(r.useEffect)(e,[])}},515:function(e,t,n){},516:function(e,t,n){},517:function(e,t,n){},518:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(2),o=n(0),i=n.n(o),a=n(12),s=n(64),c=n(19),u=n(10),l="pointerdown",d="pointerup";Object(u.a)()&&(window.PointerEvent||(l="mousedown",d="mouseup",window.MouseEvent||(d="click")));var p={ignoreRefs:[]},f=function(e){return function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.targetRef=Object(o.createRef)(),e.pointerDownEventSource=null,e.onPointerDown=function(t){e.pointerDownEventSource=t.target},e.onPointerUp=function(t){var n=Object(r.__spread)(e.props.ignoreRefs,[e.targetRef]);void 0!==e.props.onOutsideClick&&n.every(function(n){return null!==n.current&&!n.current.contains(e.pointerDownEventSource)&&!n.current.contains(t.target)})&&e.props.onOutsideClick(t),e.pointerDownEventSource=null},e.onKeyDown=function(t){void 0!==e.props.onEscapeKeyDown&&Object(a.b)(t.keyCode,[a.a.ESC])&&e.props.onEscapeKeyDown(t)},e}return Object(r.__extends)(n,t),n.prototype.componentDidMount=function(){this.props.visible&&this.subscribeToEvents()},n.prototype.componentWillUnmount=function(){this.unsubscribeFromEvents()},n.prototype.componentDidUpdate=function(e){!e.visible&&this.props.visible?this.subscribeToEvents():e.visible&&!this.props.visible&&this.unsubscribeFromEvents()},n.prototype.render=function(){var t=this.props,n=(t.ignoreRefs,Object(r.__rest)(t,["ignoreRefs"]));return i.a.createElement(e,Object(r.__assign)({},n,{targetRef:Object(c.a)(this.targetRef,this.props.targetRef)}))},n.prototype.subscribeToEvents=function(){document.addEventListener(l,this.onPointerDown),document.addEventListener(d,this.onPointerUp),document.addEventListener("keydown",this.onKeyDown)},n.prototype.unsubscribeFromEvents=function(){document.removeEventListener(l,this.onPointerDown),document.removeEventListener(d,this.onPointerUp),document.removeEventListener("keydown",this.onKeyDown)},n.displayName="withOutsideClick("+Object(s.a)(e)+")",n.defaultProps=p,n}(o.PureComponent)}},52:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return u});var r=n(2),o=n(0),i=n.n(o),a=n(3),s=n(4),c=(n(321),Object(s.cn)("Modal")),u=function(e){var t=e.children,n=e.className,s=e.contentVerticalAlign,u=void 0===s?"middle":s,l=e.hasAnimation,d=void 0===l||l,p=e.visible,f=e.onClick,h=Object(r.__rest)(e,["children","className","contentVerticalAlign","hasAnimation","visible","onClick"]),m=Object(o.useRef)(null),v=Object(a.useComponentRegistry)(c()).Popup;return i.a.createElement(v,Object(r.__assign)({},h,{className:c({visible:p,hasAnimation:d},[n]),visible:p,unstable_hostRef:m,onClick:f}),i.a.createElement("div",{className:c("Table")},i.a.createElement("div",{className:c("Cell",{align:u})},i.a.createElement("div",{ref:m,className:c("Content")},t))),i.a.createElement("div",{className:c("Overlay")}))};u.displayName=c()},525:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(2),o=n(0),i=n.n(o),a=n(64),s=n(19),c={},u={zIndexGroupLevel:0},l=function(e){var t;return(t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentZIndex=0,e.innerRef=Object(o.createRef)(),e}return Object(r.__extends)(n,t),n.prototype.componentDidMount=function(){this.props.visible&&this.updateZIndexPosition()},n.prototype.componentDidUpdate=function(e){e.visible!==this.props.visible&&this.updateZIndexPosition()},n.prototype.componentWillUnmount=function(){0!==this.currentZIndex&&this.releaseZIndex(this.props.zIndexGroupLevel,this.currentZIndex)},n.prototype.render=function(){var t=this.props,n=(t.zIndexGroupLevel,Object(r.__rest)(t,["zIndexGroupLevel"]));return i.a.createElement(e,Object(r.__assign)({},n,{innerRef:Object(s.a)(this.innerRef,this.props.innerRef)}))},n.prototype.updateZIndexPosition=function(){var e=this;requestAnimationFrame(function(){var t=e.props,n=t.visible,r=t.zIndexGroupLevel;n&&0===e.currentZIndex?e.currentZIndex=e.captureZIndex(r):n||(e.currentZIndex=e.releaseZIndex(r,e.currentZIndex)),n&&(null!==e.innerRef.current?e.innerRef.current.style.zIndex=String(e.currentZIndex):e.updateZIndexPosition())})},n.prototype.captureZIndex=function(e){var t=c[e];void 0===t&&(t=[1e3*(e+1)],c[e]=t);var n=t[t.length-1]+1;return t.push(n),n},n.prototype.releaseZIndex=function(e,t){var n=c[e];return void 0!==n&&n.length>1&&n.splice(n.indexOf(t),1),0},n}(o.PureComponent)).displayName="withZIndex("+Object(a.a)(e)+")",t.defaultProps=u,t}},527:function(e,t,n){},53:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("MMSimilarOffers")},537:function(e,t,n){},538:function(e,t,n){},539:function(e,t,n){},54:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},540:function(e,t,n){},541:function(e,t,n){},542:function(e,t,n){},543:function(e,t,n){},544:function(e,t,n){},545:function(e,t,n){},546:function(e,t,n){},547:function(e,t,n){},548:function(e,t,n){},549:function(e,t,n){},55:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e?1===e?t.one:t.some:t.none||""}},550:function(e,t,n){},551:function(e,t,n){},552:function(e,t,n){},553:function(e,t,n){},554:function(e,t,n){},555:function(e,t,n){},556:function(e,t,n){},557:function(e,t,n){},558:function(e,t,n){},559:function(e,t,n){},56:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e?t.some:t.none||""}},560:function(e,t,n){},561:function(e,t,n){},562:function(e,t,n){},563:function(e,t,n){},564:function(e,t,n){},565:function(e,t,n){},566:function(e,t,n){},567:function(e,t,n){},568:function(e,t,n){},569:function(e,t,n){},57:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},570:function(e,t,n){},571:function(e,t,n){},572:function(e,t,n){},573:function(e,t,n){},574:function(e,t,n){},575:function(e,t,n){},576:function(e,t,n){},577:function(e,t,n){},578:function(e,t,n){},579:function(e,t,n){},58:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},580:function(e,t,n){},581:function(e,t,n){},582:function(e,t,n){},583:function(e,t,n){},584:function(e,t,n){},585:function(e,t,n){},586:function(e,t,n){},587:function(e,t,n){},588:function(e,t,n){},589:function(e,t,n){},59:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},590:function(e,t,n){},591:function(e,t,n){},592:function(e,t,n){},593:function(e,t,n){},594:function(e,t,n){},595:function(e,t,n){},596:function(e,t,n){},597:function(e,t,n){},598:function(e,t,n){},599:function(e,t,n){},6:function(e,t,n){"use strict";n.d(t,"e",function(){return c}),n.d(t,"i",function(){return u}),n.d(t,"f",function(){return l}),n.d(t,"m",function(){return d}),n.d(t,"n",function(){return f}),n.d(t,"g",function(){return h}),n.d(t,"h",function(){return m}),n.d(t,"l",function(){return v}),n.d(t,"j",function(){return b}),n.d(t,"k",function(){return g}),n.d(t,"p",function(){return y}),n.d(t,"b",function(){return w}),n.d(t,"d",function(){return j}),n.d(t,"a",function(){return C}),n.d(t,"c",function(){return E}),n.d(t,"o",function(){return S});var r=n(74),o=n(88),i=n(18),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};var c=Object(i.d)(function(e){return u(e,e.currentItemIdx)});function u(e,t){return e.images[t]}var l=Object(i.d)(function(e){return function(e,t){var n=u(e,t);if(n){if(n.loadedImage)return n.loadedImage;var r=e.loadedThumbs[n.id];return r&&(n.loadedImage=r),r}}(e,e.currentItemIdx)}),d=Object(i.d)(function(e){return Object(o.h)(e)||c(e)}),p=Object(i.a)("loadedThumbs"),f=Object(i.d)(function(e){var t=d(e),n=t&&t.id?p(e,t.id):void 0;return n&&n.data});var h=Object(i.a)("favicons");function m(e){var t=e&&e.snippet;if(t)return t.punycode?t.punycode.toLowerCase():t.domain&&t.domain.toLowerCase()}function v(e){return e.preloadImagesIndexes}function b(e,t){for(var n=Math.max(t-e.config.preloadLeftBorder,0),r=Math.min(t+e.config.preloadRightBorder,e.images.length),o=[],i=Math.max(t-n,r-t),a=1;a<=i;a++)t+a<=r&&o.push(t+a),t-a>=n&&o.push(t-a);return o}function g(e,t,n){return 1===e?t:t.slice(n)}function y(e){return void 0===e&&(e={}),"object"===typeof e?e:e.split(",").reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{})}function O(e){if(e&&Array.isArray(e.counter)){var t=s(e.counter,2),n=t[0],r=t[1];return{__oldCounter__:{path:n||"",vars:r||""}}}return e||{}}function w(e,t,n,o){void 0===t&&(t={}),void 0===n&&(n={}),void 0===o&&(o={href:""});var i=O(e);if(!i||!i.__oldCounter__)return i;var s=i.__oldCounter__,c=Object(r.a)(a(a({},y(s.vars||{})),y(t)));return a(a({},i),{__oldCounter__:a(a(a({},s),{vars:c}),n),node:o})}function j(e){var t=O(e);return t&&t.__oldCounter__&&t.__oldCounter__.path||""}function C(e){if(e)return e.logNode}var E=function(e,t){var n=j(e);return a(a({},e),{__oldCounter__:a(a({},e.__oldCounter__),{path:n.replace(/\/$/,"")+"/"+t})})},S=function(e){var t=e.experiments,n=void 0===t?{}:t,r=e.globalContext,o=r.isCommercialEnabled||r.isCommercialQuery;if(n.commercialSideblockWidth&&o)return Number(n.commercialSideblockWidth)}},60:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},600:function(e,t,n){},601:function(e,t){function n(e,t){this.agent=e,this.contrAgent=t||{},this._resultCallbacks={},this._resultCallbacksIndex=0,this._onMessage=this._onMessage.bind(this),this.agent.win.addEventListener("message",this._onMessage),this.pushMessagesToStack=!1,this._messagesStack=[]}n.prototype={invokeMethod:function(e,t,n){return t=[].concat(t),this._invokeMethod(e,t,n),this},clean:function(){this.agent.win.removeEventListener("message",this._onMessage),this.agent=void 0,this.contrAgent=void 0,this._resultCallbacks=void 0,this._resultCallbacksIndex=0},onIframeLoad:function(){this._messagesStack.reverse().forEach(this._onMessage),this._messagesStack=[],this.pushMessagesToStack=!1},_onMessage:function(e){if(this.contrAgent&&this.contrAgent.win&&e.source===this.contrAgent.win){var t,n=e.data;try{n=JSON.parse(n)}catch(e){return}if(n.methodCall){if(this.contrAgent.url||(this.contrAgent.url=e.origin),this.agent[n.methodCall]){var r,o=n.params;t=n.resultCallbackIndex?this._deInstrumentCallback(n.resultCallbackIndex):[],n.paramsCallbackIndex&&(o=[].concat(o,this._deInstrumentCallback(n.paramsCallbackIndex))),r=this.agent[n.methodCall].apply(this.agent,[].concat(o)),n.resultCallbackIndex&&t(r)}}else n.returnCall&&(t=this._idObjToCallback(n.resultCallbackIndex))&&t.apply(this.agent,[].concat(n.params))}else this.pushMessagesToStack&&this._messagesStack.push(e)},_invokeCallback:function(e,t){this._invokeMethod("",t,e)},_callbackToIdObj:function(e){var t=++this._resultCallbacksIndex;return this._resultCallbacks[t]=e,{__callbackId:t}},_idObjToCallback:function(e){var t=e,n=this._resultCallbacks[t];return delete this._resultCallbacks[t],n},_instrumentCallback:function(e){return this._callbackToIdObj(e)},_deInstrumentCallback:function(e){return function(){setTimeout(function(t){this.contrAgent&&this._invokeCallback(e.__callbackId,[].slice.call(t))}.bind(this,arguments),0)}.bind(this)},_invokeMethod:function(e,t,n){var r;if(e){var o,i=t&&t.pop();"function"===typeof i?o=this._instrumentCallback(i):t&&t.push(i),r={methodCall:e,params:t,paramsCallbackIndex:o,resultCallbackIndex:n&&this._instrumentCallback(n)}}else r={returnCall:!0,params:t,resultCallbackIndex:n};r=JSON.stringify(r),this.contrAgent.win.postMessage(r,this.contrAgent.url)}},e.exports=n},602:function(e,t,n){},603:function(e,t,n){},604:function(e,t,n){},605:function(e,t,n){},606:function(e){e.exports=JSON.parse('{"version":"2.1.0"}')},607:function(e,t,n){},608:function(e,t,n){},609:function(e,t,n){},61:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},610:function(e,t,n){},611:function(e,t,n){},612:function(e,t,n){},613:function(e,t,n){},614:function(e,t,n){},615:function(e,t,n){},616:function(e,t,n){},617:function(e,t,n){},618:function(e,t,n){},619:function(e,t,n){},62:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},620:function(e,t,n){},621:function(e,t,n){},622:function(e,t,n){},623:function(e,t,n){},624:function(e,t,n){},625:function(e,t,n){},626:function(e,t,n){},627:function(e,t,n){},628:function(e,t,n){},629:function(e,t,n){},630:function(e,t,n){},631:function(e,t,n){},632:function(e,t,n){},633:function(e,t,n){},634:function(e,t,n){},635:function(e,t,n){},636:function(e,t,n){},637:function(e,t,n){},638:function(e,t,n){},639:function(e,t,n){},64:function(e,t,n){"use strict";function r(e){return e.displayName||e.name||"Component"}n.d(t,"a",function(){return r})},640:function(e,t,n){},641:function(e,t,n){},642:function(e,t,n){},643:function(e,t,n){},644:function(e,t,n){},645:function(e,t,n){},646:function(e,t,n){},647:function(e,t,n){},648:function(e,t,n){},649:function(e,t,n){},65:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(126),o=n(36),i=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=function(e){void 0===e&&(e=!1);var t=i(Object(r.a)(e),2),n=t[0],a=t[1];return[n,Object(o.a)(a,!0),Object(o.a)(a,!1),a]}},650:function(e,t,n){},651:function(e,t,n){},652:function(e,t,n){},653:function(e,t,n){},654:function(e,t,n){},655:function(e,t,n){},656:function(e,t,n){},657:function(e,t,n){},658:function(e,t,n){},659:function(e,t,n){},66:function(e,t,n){"use strict";Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");var r=Object(e);return t.forEach(function(e){e&&Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);void 0!==n&&n.enumerable&&(r[t]=e[t])})}),r}})},660:function(e,t,n){},661:function(e,t,n){},669:function(e,t,n){n.r(t);var r=n(2293);n.d(t,"ru",function(){return r.a})},67:function(e,t,n){"use strict";"function"===typeof Element&&(Element.prototype.matches=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector)},670:function(e,t,n){n.r(t);var r=n(2311);n.d(t,"ru",function(){return r.a})},671:function(e,t,n){n.r(t);var r=n(2320);n.d(t,"ru",function(){return r.a})},672:function(e,t,n){n.r(t);var r=n(2347);n.d(t,"ru",function(){return r.a})},673:function(e,t,n){"use strict";n(587);var r=n(175);n.d(t,"a",function(){return r.a})},674:function(e,t,n){n.r(t);var r=n(2356);n.d(t,"ru",function(){return r.a})},675:function(e,t,n){n.r(t);var r=n(2374);n.d(t,"ru",function(){return r.a})},676:function(e,t,n){n.r(t);var r=n(2392);n.d(t,"ru",function(){return r.a})},677:function(e,t,n){n.r(t);var r=n(2402);n.d(t,"ru",function(){return r.a})},678:function(e,t,n){n.r(t);var r=n(2438);n.d(t,"ru",function(){return r.a})},68:function(e,t,n){"use strict";function r(e){var t=e.n||"",n=e.v||e.m;function r(r,o,i,a){var s=o?t+r+e.e+o:t+r,c=s;if(i){var u=" "+c+e.m;for(var l in i)if(i.hasOwnProperty(l)){var d=i[l];!0===d?c+=u+l:d&&(c+=u+l+n+d)}}if(void 0!==a)for(var p=0,f=a.length;p<f;p++){var h=a[p];if("string"==typeof h&&h)for(var m=h.split(" "),v=0;v<m.length;v++){var b=m[v];b!==s&&(c+=" "+b)}}return c}return function(e,t){return function(n,o,i){return"string"==typeof n?Array.isArray(o)?r(e,n,void 0,o):r(e,n,o,i):r(e,t,n,o)}}}Object.defineProperty(t,"__esModule",{value:!0});var o=r({e:"-",m:"_"});t.cn=o,t.withNaming=r},69:function(e,t,n){},697:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(30),i=(n(352),Object(r.withBemMod)(Object(o.b)(),{theme:"normal"}))},7:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(54),i=n(55),a=n(56),s=n(57),c=n(58),u=n(59),l=n(60),d=n(61),p=n(62),f={be:o.default,en:i.default,id:a.default,kk:s.default,ru:c.default,tr:u.default,tt:l.default,uk:d.default,uz:p.default},h=["ru"];function m(e){return-1===["tr","id","fi","lt","pl","et","lv"].indexOf(e)?"ru":"en"}function v(e,t){for(var n=[],r=e.length,o=0;o<r;){var i=e.indexOf("{",o);if(-1===i)return n.push(e.substring(o)),n;var a=e.indexOf("}",i);if(-1===a)return n.push(e.substring(o)),n;n.push(e.substring(o,i),t[e.substring(i+1,a)]),o=a+1}return n}function b(e,t,n){void 0===n&&(n={});var o=function(e,t){var n,o,i;try{for(var a=r(h),s=a.next();!s.done;s=a.next())if((i=e[s.value])&&t in i)return i[t]}catch(e){n={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return t}(e,t);return"string"===typeof o?v(o,n):function(e,t){var n=h.find(function(e){return Boolean(f[e])})||m(h[0]);return v((0,f[n])(t.count,e),t)}(o,n)}t.default=function(e){return function(t,n){return void 0===n&&(n={}),b(e,t,n).join("")}},t.i18nRaw=function(e){return function(t,n){return void 0===n&&(n={}),b(e,t,n)}},t.setI18nLang=function(e){h="string"===typeof e?[e,m(e),"ru"]:e},t.getI18nLang=function(){return h[0]},t.resolveI18nLang=function(e,t,n){var r=t;if(-1===e.indexOf(r))switch(n){case"com":r="en";break;case"com.tr":r="tr";break;default:r="ru"}return r}},70:function(e,t,n){},71:function(e,t,n){"use strict";function r(e){var t=function(){throw new Error("Not found base component for enhance HOC: "+e.toString())};return t.$symbol=d,t.hoc=e,t}function o(e){return e.$symbol===d}Object.defineProperty(t,"__esModule",{value:1});var i=n(0),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])({}).hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=i.createContext({}),c=s.Provider,u=s.Consumer,l=function(){return i.useContext(s)},d="RegistryHoc",p=function(){function e(e){var t=e.id,n=e.overridable,r=void 0===n?1:n;this.components={},this.id=t,this.overridable=r}return e.prototype.set=function(e,t){return this.components[e]=t,this},e.prototype.extends=function(e,t){return this.components[e]=r(t),this},e.prototype.fill=function(e){for(var t in e)this.components[t]=e[t];return this},e.prototype.get=function(e){return this.components[e]},e.prototype.snapshot=function(){return this.components},e.prototype.merge=function(t){var n=new e({id:this.id,overridable:this.overridable});if(n.fill(this.components),!t)return n;var r=t.snapshot();for(var o in r)r.hasOwnProperty(o)&&(n.components[o]=this.mergeComponents(n.components[o],r[o]));return n},e.prototype.mergeComponents=function(e,t){return o(t)&&e?o(e)?r(function(n){return t.hoc(e.hoc(n))}):t.hoc(e):t},e}();t.ComponentRegistryConsumer=function(e){return i.createElement(u,null,function(t){return e.children(t[e.id].snapshot())})},t.Registry=p,t.RegistryConsumer=u,t.registryContext=s,t.useComponentRegistry=function(e){return l()[e].snapshot()},t.useRegistries=l,t.withRegistry=function(){var e=[].slice.call(arguments);return function(t){return function(n){var r=i.useRef(null);return i.createElement(u,null,function(o){if(null===r.current){for(var s=a({},o),u=0;u<e.length;u++){var l=e[u],d=o[l.id];s[l.id]=l.overridable?d?l.merge(d):l:l&&d?d.merge(l):l}r.current=s}return i.createElement(c,{value:r.current},i.createElement(t,n))})}}}},710:function(e,t,n){"use strict";var r=n(226);n.d(t,"a",function(){return r.a});n(414)},711:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(3),o=n(52),i=n(248),a=new r.Registry({id:Object(o.b)()});a.set("Popup",i.a);var s=Object(r.withRegistry)(a)(o.a)},72:function(e,t,n){"use strict";function r(e,t,n){var r,o,i,u=function(u){var l,d;return r=r||s.cn(e),o=o||r(),function(e){if((i=i||Object.keys(t)).every(function(n){var r=t[n],o=e[n];return r===o||"*"===r&&Boolean(o)})){var s=i.reduce(function(e,n){return"*"!==t[n]&&(e[n]=t[n]),e},{});d=d||r(s);var p=Object.assign({},e);return p.className=c.classnames(d,e.className).replace(o+" ",""),"function"==typeof n?void 0===l&&(l=n(u)):l=u,a.createElement(l,p)}return a.createElement(u,e)}},l=n||{},d=l.__passToProps,p=void 0===d?1:d,f=l.__simple,h=void 0===f?0:f,m=Object.keys(t),v=m[0],b=t[m[0]];return(u.__isSimple=!n&&1===m.length||h)&&(u.__blockName=e,u.__mod=v,u.__value=b,u.__passToProps=p),u}function o(e){for(var t={},n={},r=s.cn(e[0].__blockName),o=0,i=e;o<i.length;o++){var c=i[o],l=c.__mod,d=c.__value,p=c.__passToProps;t[l]=t[l]||[],n[l]=n[l]||[],t[l].push(d),n[l].push(p)}var f=Object.keys(t);return function(e){return function(o){for(var i={},s=u({},o),c=0,l=f;c<l.length;c++){var d=l[c],p=t[d],h=o[d],m=p.indexOf(h);-1===m&&1==p[0]&&0==h&&(m=0),-1!==m?(i[d]=h,n[d][m]||delete s[d]):s.hasOwnProperty(d)&&void 0===h&&delete s[d]}return s.className=r(i,[o.className]),a.createElement(e,s)}}}function i(){for(var e=[],t=[],n=0,r=[].slice.call(arguments);n<r.length;n++){var i=r[n];i.__isSimple?e.push(i):t.push(i)}return(e.length?[o(e)].concat(t):t).reduce(function(e,t){return function(){return e(t.apply(0,arguments))}},function(e){return e})}Object.defineProperty(t,"__esModule",{value:1});var a=n(0),s=n(4),c=n(39),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])({}).hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};t.compose=i,t.composeU=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.apply(void 0,e)},t.createClassNameModifier=function(e,t){return r(e,t,{__passToProps:0,__simple:1})},t.withBemMod=r},73:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.classnames=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=new Set,o=0,i=e.join(" ").split(" ");o<i.length;o++){var a=i[o];""===a||r.has(a)||(r.add(a),n.length>0&&(n+=" "),n+=a)}return n}},74:function(e,t,n){"use strict";function r(e,t){if("string"===typeof e||!e)return e||"";var n=t?"-":"";return Object.keys(e).filter(function(t){return"undefined"!==typeof e[t]&&""!==e[t]}).map(function(t){return""+n+t+"="+e[t]}).join(",")}n.d(t,"a",function(){return r})},755:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(52),i=(n(430),Object(r.withBemMod)(Object(o.b)(),{theme:"normal"}));n(431)},76:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(102);t.BaobabComponents=r.createContext({BaobabNode:o.BaobabNode})},764:function(e,t,n){"use strict";var r=n(288);n.d(t,"a",function(){return r.a});n(426)},765:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(2),o=n(0),i=n.n(o),a=n(1),s=n(3),c=n(265),u=n(239),l=n(23),d=n(266),p=Object(a.compose)(Object(s.withRegistry)(d.a),c.a,u.a)(function(e){var t=e.className,n=e.hovered,o=Object(r.__rest)(e,["className","hovered"]);return i.a.createElement(l.a,Object(r.__assign)({},o,{className:Object(l.b)({hovered:n},[t])}))})},77:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(37),i=n(101),a=n(104);t.SCHEMA_VER=0;var s=function(){function e(e,t){var n=this,r=e.prefix,o=e.senderParams;this.nextEventId=0,this.nextNodeId=0,this.rootNodes=[],this.listeners={createnode:[],removenode:[],actionnode:[]},this.childrenCreatedPerLoop={},this.resolveEvent=function(){n.actualEvent=void 0},this.baobabSender=new t(o),this.prefix=r}return e.prototype.getRootNodes=function(){return this.rootNodes},e.prototype.getRootSendNodes=function(){var e=this;return this.rootNodes.map(function(t){return e.encodeNode(t)})},e.prototype.addEventListener=function(e,t){this.listeners[e].push(t)},e.prototype.removeEventListener=function(e,t){this.listeners[e]=this.listeners[e].filter(function(e){return e!==t})},e.prototype.prepareRoot=function(e){var t=this.createRootNode(e);return this.rootNodes.push(t),t},e.prototype.prepareChild=function(e,t){var n=this.createChildNode(t,e);return e.flags.logged&&!n.flags.logged&&this.appendToSubresult(n,e),n},e.prototype.attachNode=function(e){var t=this;e.flags.attached=!0,this.markAttachedNodeAsCreated(e),e.flags.logged?this.baobabSender.attachTree({node:this.encodeNode(e),eventData:{cts:Date.now(),triggerEvent:this.actualEvent||this.lastEvent,triggerEventTrusted:Boolean(this.actualEvent)}}):o.isChildNode(e)?setTimeout(function(){return t.logChildNodes(e)},0):(this.markNodeAsLogged(e),this.baobabSender.createTree({node:this.encodeNode(e),eventData:{cts:Date.now(),triggerEvent:this.actualEvent||this.lastEvent,triggerEventTrusted:Boolean(this.actualEvent)}},function(n){t.listeners.createnode.forEach(function(r){return r.call(t,{logger:t,target:e,create:e,on:null,sendInfo:n})})}))},e.prototype.logChildNodes=function(e){var t=this;if(!e.flags.logged){var n=e.parent.id,r=this.childrenCreatedPerLoop[n];r&&(this.childrenCreatedPerLoop[n]=void 0,r.children.map(function(e){return t.markNodeAsLogged(e)}),this.baobabSender.appendTree({node:this.encodeNode(r),eventData:{cts:Date.now(),triggerEvent:this.actualEvent||this.lastEvent,triggerEventTrusted:Boolean(this.actualEvent)}},function(n){t.listeners.createnode.forEach(function(o){return o.call(t,{logger:t,target:e,create:r,on:e.parent,sendInfo:n})})}))}},e.prototype.detachNode=function(e){var t=this;e.flags.attached&&(e.flags.attached=!1,this.markNodeAsDestroyed(e),this.baobabSender.detachTree({node:this.encodeNode(e),eventData:{cts:Date.now(),triggerEvent:this.actualEvent||this.lastEvent,triggerEventTrusted:Boolean(this.actualEvent)}},function(n){t.listeners.removenode.forEach(function(r){return r.call(t,{logger:t,target:e,remove:e,sendInfo:n,from:o.isChildNode(e)?e.parent:null})})}))},e.prototype.dispatchEvent=function(e,t){var n=this;this.baobabSender.clientAction({node:this.encodeNode(e),eventData:t},function(r){n.listeners.actionnode.forEach(function(o){return o.call(n,{logger:n,target:e,action:t,sendInfo:r})})})},e.prototype.logTechEventForRoot=function(e,t){var n=this.getRootNodes(),r=n[n.length-1];if(!r)throw new i.BaobabNotInitError;var o=a.logTech(e,t),s=this.createEvent(r,o,[],{});this.dispatchEvent(r,s)},e.prototype.createEvent=function(e,t,n,r){var o={cts:Date.now(),id:this.generateEventId(),event:t.event,data:t.data,service:e.context.service,subservice:e.context.subservice};return t.type&&(o.type=t.type),t.behaviour&&(o.behaviour=t.behaviour),o},e.prototype.withEvent=function(e,t){this.lastEvent=e,this.actualEvent=e,t(this.resolveEvent)},e.prototype.encodeNode=function(e,t){var n=this;void 0===t&&(t=!1);var i={id:e.id,name:e.name},a=!t&&o.isTreeNode(e)&&!e.flags.attached;return e.attrs&&Object.keys(e.attrs).length&&(i.attrs=e.attrs),a&&(i.attrs=r(r({},i.attrs),{hidden:!0})),e.children.length&&(i.children=e.children.map(function(e){return n.encodeNode(e,a)})),i},e.prototype.generateEventId=function(){return Date.now().toString(36)+(this.nextEventId++).toString(36)},e.prototype.generateNodeId=function(){return this.prefix+(this.nextNodeId++).toString(36)},e.prototype.markAttachedNodeAsCreated=function(e){var t=this;e.flags.attached&&(e.flags.created=!0,e.children.forEach(function(e){return t.markAttachedNodeAsCreated(e)}))},e.prototype.markNodeAsDestroyed=function(e){var t=this;e.flags.created=!1,e.children.forEach(function(e){return t.markNodeAsDestroyed(e)})},e.prototype.markNodeAsLogged=function(e){var t=this;e.flags.logged=!0,e.children.forEach(function(e){return t.markNodeAsLogged(e)})},e.prototype.appendToSubresult=function(e,n){var r=this.childrenCreatedPerLoop[n.id];if(!r){var o={id:this.generateNodeId(),name:"$subresult",attrs:{"schema-ver":t.SCHEMA_VER,ui:e.context.ui,subservice:e.context.subservice,"parent-id":n.id,"trigger-event-id":this.actualEvent||this.lastEvent,"trigger-event-trusted":Boolean(this.actualEvent),"main-search":n.context.subservice!==e.context.subservice},children:[e]};return this.childrenCreatedPerLoop[n.id]=o,o}return r.children.push(e),r},e.prototype.createChildNode=function(e,t){var n={key:e.key,parent:t,id:this.generateNodeId(),name:e.name,attrs:e.attrs,children:[],mapChildren:{},flags:{logged:!1,created:!0,attached:!1},context:this.createNodeContext(e,t)};return t.children.push(n),n},e.prototype.createRootNode=function(e){return{key:e.key,id:this.generateNodeId(),name:e.name,attrs:r({},e.attrs),children:[],mapChildren:{},flags:{logged:!1,created:!0,attached:!1},context:this.createRootContext(e)}},e.prototype.createNodeContext=function(e,t){var n=r(r({},t.context),{path:t.context.path.concat(e.name)});return e.attrs&&e.attrs.subservice&&(n.subservice=e.attrs.subservice),n},e.prototype.createRootContext=function(e){var t={path:[e.name],service:e.attrs.service,ui:e.attrs.ui};return e.attrs.subservice&&(t.subservice=e.attrs.subservice),t},e}();t.Logger=s},79:function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"a",function(){return h});var r,o=n(0),i=n.n(o),a=n(5),s=n(35),c=n(175);function u(e,t,n,r){return e.parentNode?function(e,t,n){void 0===n&&(n={});var r=Object(a.createChildData)(e,t,n);return"title"===r.name&&(r.events||(r.events={}),r.events.onSearchinderSwipe=Object(a.logClick)({swipe:1})),r}(t,n,r):(o=t,i=n,s=r,c={ui:e.logger.ui,service:e.logger.service,react:e.logger.reactReady},(u=Object(a.createChildData)(o,i,s)).attrs=u.attrs||{},u.attrs.service=u.attrs.service||c&&c.service,u.attrs.ui=u.attrs.ui||c&&c.ui,u.attrs.react=u.attrs.reactReady||c&&c.react,u);var o,i,s,c,u}!function(e){e[e.Partial=.5]="Partial",e[e.Full=1]="Full"}(r||(r={}));var l=function(e){return e.stopPropagation()};function d(e,t,n){if(t){var r=n&&n.indexOf("/jsredir")>0?"rc":"b";e["data-counter"]=e["data-counter"]||(n?'["'+r+'","'+n+'"]':'["b"]'),e["data-log-node"]=e["data-log-node"]||t.id,e.onMouseDown=(o=e.onMouseDown)?function(e){l(e),o(e)}:l}var o;return e}n(200);var p={theme:1,counter:1,children:1,url:1,logNode:1,fontWeight:1,baobabNode:1,baobabId:1,logHref:1},f=function(e){return function(t){var n=Object(o.useContext)(s.BaobabContext),r=i.a.useMemo(function(){return n?u(n,t,{name:"link"},t.logNode):{}},[]),l=Object(a.useBaobab)(r),f=l.nextContext,h=l.node,m=l.logEvent,v=Object(o.useMemo)(function(){return function(e){var n,o=null===(n=null===r||void 0===r?void 0:r.events)||void 0===n?void 0:n.onClick;if("boolean"!==typeof o||o)if("object"===typeof o&&o.data){var i=o.data;"function"===typeof i&&(i=i({props:t},e)),m(Object(a.logClick)(i),[e],t)}else m(Object(a.logClick)(),[e],t);t.onClick&&t.onClick(e)}},[m,t,r]),b=function(e,t){var n={};for(var r in e)r in t||(n[r]=e[r]);return n}(t,p),g=t.url,y=t.target;return d(b,h,t.logHref),b.className=Object(c.b)({theme:t.theme,fontWeight:t.fontWeight},[t.className]),b.href=g,b.target=void 0===y?"_blank":y,b.onClick=v,i.a.createElement(s.BaobabContext.Provider,{value:f},i.a.createElement(e,b,t.children))}},h=f(c.a);h.isBaobabNode=!0},8:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){return window.Ya.reactBus}},81:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(4),i=(n(359),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),a=Object(o.cn)("MMFavicon"),s=function(e){var t=e.favicon,n=e.url,o=e.className,s=-1===t.indexOf("data:image/"),c={backgroundImage:"url("+t+")"},u=i(r.useState(s),2),l=u[0],d=u[1],p=l?a({hidden:!0}):"",f=a({},[o,p]),h=r.useRef(null);function m(e){e.target.height>1&&d(!1)}return r.useEffect(function(){var e=h&&h.current;if(s&&e)return e.naturalHeight>1&&d(!1),e.addEventListener("load",m),function(){e.removeEventListener("load",m)}},[h,s]),n?r.createElement("a",{href:n,className:f,rel:"noopener",target:"_blank",style:c,onClick:e.onClick}):s?r.createElement("img",{className:f,src:t,ref:h,onClick:e.onClick}):r.createElement("div",{className:f,style:c,onClick:e.onClick})}},82:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"e",function(){return l}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"d",function(){return f});var r=n(6),o=n(89),i=n(18),a=n(47),s=4,c=/(посоветуйтесь|лекарством|конструктивно|проконсультируйтесь)/gi;function u(e,t){var n=e.config.directSnippetParams;if(!n)return{};var i=void 0===t.advanced||t.advanced,s=Object(r.m)(e),c=Object(r.e)(e),u=Object(o.b)(e),l=u&&Object(r.g)(e,u.punyDomain||u.domain),d=l&&l.data||void 0,p=Object(o.h)(e.globalContext,n),f=p?a.c.commercial:a.c.lowcomm;return{ads:u,favicon:d,advanced:i&&n.isDirectSnippetAdvanced,pos:s&&s.pos,reqid:c&&c.reqid,safeRequest:n.safeRequest,ratingPosition:n.ratingPosition,imagePosition:n.imagePosition,unifiedV1:n.unifiedV1,semiHiddenContacts:n.semiHiddenContacts,upliftSitelinks:n.upliftSitelinks,optionalDisclaimer:n.optionalDisclaimer,highlightCallout:n.highlightCallout,calloutAsATitle:n.calloutAsATitle,cutDescription:n.cutDescription,titleBold:Boolean(f&(n.titleBold||0)),labelHighlight:p?n.labelHighlight:void 0,blockHighlight:p?n.blockHighlight:void 0}}var l=Object(i.d)(function(e){return!!e&&Boolean(e.match(c))}),d=Object(i.d)(function(e,t,n){var r=e?e.slice():[];return l(t)?r:(n&&r.push(n),t&&r.push(t),r)}),p=Object(i.d)(function(e,t){if(!e)return t?[t]:void 0;if("18+"===t)return[e+=" • 18+"];var n=[e];return t&&n.push(t),n});function f(e){for(var t=0,n="",r=e.length-1;r>=0&&t<s;r--){var o=e[r],i=e.charCodeAt(r);i>=48&&i<=57&&(t++,o="X"),n=o+n}return""+e.substring(0,r+1)+n}},821:function(e,t,n){"use strict";var r=n(295);n.d(t,"a",function(){return r.a});n(447)},84:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=function(e,t,n){var r,o=0,i=n&&n.delayedLastCall;function a(){o&&(clearTimeout(o),o=0)}var s=function(){var n=Date.now(),s=arguments,c=function(){e.apply(void 0,s),r=Date.now(),o=0};a(),void 0===r||n-r>t?c():i&&(o=setTimeout(c,t-(n-r)))};return s.cancel=a,s}},85:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("MMGallery")},86:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={lt:"<",gt:">",quot:'"',apos:"'",amp:"&",raquo:"»",laquo:"«",ndash:"–",mdash:"—",lsquo:"‘",lsaquo:"‹",rsquo:"’",rsaquo:"›",acute:"´",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",prime:"′",Prime:"″",deg:"°",reg:"®",copy:"©",trade:"™",sup2:"²",nbsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",middot:"·",hellip:"…",Oslash:"Ø","#8381":"₽","#039":"'","#8203":"​","#092":"\\"},o=new RegExp("&(("+Object.keys(r).join("|")+")|#(x[0-9A-Fa-f]+|[0-9]+));","g");function i(e){try{return String.fromCodePoint(e)}catch(e){return""}}function a(e){if(isNaN(e)||e<0)return"";if(e>65535){if(e>1114111)return"";var t=e-65536;return String.fromCharCode(55296+(t>>10),56320+(1023&t))}return String.fromCharCode(e)}t.parseCodeToCharNative=i,t.parseCodeToCharFallback=a;var s="function"===typeof String.fromCodePoint?i:a;t.decodeHTMLEntities=function(e){return e.replace(o,function(e,t,n,o){return n?r[n]||"":o?s(Number("0"+o)):""})}},87:function(e,t,n){n.r(t);var r=n(2429);n.d(t,"ru",function(){return r.a})},88:function(e,t,n){"use strict";n.d(t,"i",function(){return a}),n.d(t,"j",function(){return s}),n.d(t,"k",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"f",function(){return l}),n.d(t,"e",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"h",function(){return f}),n.d(t,"b",function(){return h}),n.d(t,"a",function(){return m}),n.d(t,"g",function(){return v});var r=n(6),o=n(18),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=Object(o.a)("tags");function s(e){return e&&e.rimid}function c(e){var t=e.query;return{tld:e.tld,text:t}}var u=Object(o.a)("rimData"),l=s;function d(e){var t=e.config.rim;return t&&t.features||{}}var p=Object(o.d)(function(e,t){if(void 0!==t){var n=e.rimForItem;return n&&n[t]}}),f=Object(o.c)(function(e){var t=p(e,e.rimSelectedIdx);return[t,Object(r.e)(e),t?e.loadedThumbs[t.id]:void 0]},function(e,t,n){if(e)return i(i({},e),{isRim:!0,parentPos:t&&t.pos,loadedImage:n})});function h(e,t,n){for(var r=[],o=t+n,i=t;i<o;i++){var a=l(e[i]);a&&r.push(a)}return r}function m(e,t,n){void 0===t&&(t={});var r=e.filter(function(e){var r=n&&n[e.thumb.url];return e.rimid&&(!t||!t[e.rimid])&&(!r||!r.isFailed)});return r.length===e.length?e:r}function v(e,t,n){for(var r=[],o=0;o<e.length&&(!n||r.length<n);o++){var i=e[o];i&&i.thumb&&!t[i.thumb.url]&&r.push(i.thumb)}return r}},883:function(e,t,n){"use strict";n.d(t,"Favorites",function(){return h});var r=n(2),o=n(0),i=n.n(o),a=n(406),s=n(407),c=n(409),u=n(402),l=n(249),d=n(398);n.o(d,"FavoritesContextProvider")&&n.d(t,"FavoritesContextProvider",function(){return d.FavoritesContextProvider}),n.d(t,"FavoritesContextProvider",function(){return l.b});var p=function(e){function t(t){var n=e.call(this,t)||this;return n.addRef=i.a.createRef(),n.gotoRef=i.a.createRef(),n.state={statusPopup:"hidden",statusIframe:"hidden",cacheBoard:{}},n.counter=new u.a({logged:t.loggedIn,counterParams:t.counterParams}),n.onClickAdd=n.onClickAdd.bind(n),n.onClickEdit=n.onClickEdit.bind(n),n.showProgressPopup=n.showProgressPopup.bind(n),n.hidePopup=n.hidePopup.bind(n),n.hideIframe=n.hideIframe.bind(n),n.loadIframe=n.loadIframe.bind(n),n.readyIframe=n.readyIframe.bind(n),n.closeIframe=n.closeIframe.bind(n),n}return Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){this.controller=c.a.getInstance()},t.prototype.componentDidUpdate=function(e){e.card.doc_id!==this.props.card.doc_id&&(this.hidePopup(),this.hideIframe())},t.prototype.onClickAdd=function(){var e=this;this.showProgressPopup(),this.controller.createCard(this.props.card,this.props.loggedIn,this.state.cacheBoard,this.props.onStatusChange,this.props.sourceName).then(function(t){"saved"===t.eventName&&e.handlerFavoritesSaved(t),"iframe"===t.eventName&&e.loadIframe(t)})},t.prototype.onClickEdit=function(){this.state.card&&this.loadIframe({card:this.state.card,fav:!0})},t.prototype.showProgressPopup=function(){this.setState({statusPopup:"progress"})},t.prototype.hidePopup=function(){this.setState({statusPopup:"hidden"})},t.prototype.hideIframe=function(){this.setState({statusIframe:"hidden"})},t.prototype.loadIframe=function(e){this.setState({statusIframe:"load",card:e.card})},t.prototype.readyIframe=function(){this.setState({statusIframe:"ready",statusPopup:"hidden"})},t.prototype.closeIframe=function(e){if(this.setState({statusIframe:"hidden"}),"saved"===e.eventName){if(e.card&&e.card.id){var t=e.card.doc_id,n=e.card.id;this.props.onStatusChange(t,{cardId:n,isSaved:!0})}this.handlerFavoritesSaved(e)}},t.prototype.handlerFavoritesSaved=function(e){if(e&&e.card&&e.card.failed)this.setState({statusPopup:"error",card:void 0});else{var t=this.state.cacheBoard;e.card&&e.card.board&&e.card.content[0].source_type&&e.card.board.id&&(t[e.card.content[0].source_type]=e.card.board.id),this.setState({statusPopup:"saved",card:e.card,cacheBoard:t}),this.props.onStatusChange(this.props.card.doc_id,{isSaved:!0}),this.counter.send("1352.1382.2052","73312")}},t.prototype.render=function(){var e=this.props,t=e.goTo,n=e.add,r=e.isFavorite,o=e.loggedIn,c=e.tone,u=e.loginUrl,l=e.scope,d=e.popupMainOffset,p=e.popupClassName,f=e.popupZIndex,h=e.cache,m=this.state,v=m.statusPopup,b=m.statusIframe,g=m.card,y=r||h.isSaved,O=y?t({innerRef:this.gotoRef}):n({onClick:this.onClickAdd,innerRef:this.addRef});return i.a.createElement(i.a.Fragment,null,O,i.a.createElement(a.a,{className:p,anchor:y?this.gotoRef:this.addRef,scope:l,status:v,loggedIn:o,tone:c,loginUrl:u,board:g&&g.board,counter:this.counter,onClickEdit:this.onClickEdit,onClose:this.hidePopup,mainOffset:d,zIndex:f}),i.a.createElement(s.a,{status:b,card:g,sourceName:this.props.sourceName,counter:this.counter,readyIframe:this.readyIframe,closeIframe:this.closeIframe,onClose:this.hideIframe}))},t}(i.a.Component);var f,h=(f=p,function(e){return i.a.createElement(l.a.Consumer,null,function(t){return i.a.createElement(f,Object(r.__assign)({},e,{cache:t.cache[e.card.doc_id]||{},onStatusChange:t.changeStatus}))})})},884:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(190),i=(n(588),Object(r.withBemMod)(Object(o.b)(),{view:"default"}))},885:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),o=n.n(r),i=n(1),a=n(33),s=n(218),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},u=Object(i.withBemMod)(s.c,{type:"market"},function(e){return function(t){var n=Object(r.useCallback)(function(e){var t=e.className;return o.a.createElement(a.a,{className:t,type:"market-logo"})},[]);return o.a.createElement(e,c({icon:n},t))}})},886:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=n.n(r),i=n(218),a=(n(628),function(e){var t=e.className,n=void 0===t?"":t,r=e.value,a=e.icon,s=e.bold,c=e.children,u=function(e,t){return void 0===t&&(t=","),("string"===typeof e?parseFloat(e):e).toFixed(1).replace(".",t)}(r);return o.a.createElement("div",{className:Object(i.a)(null,[n]),role:"text"},a?a({className:i.b}):null,s?o.a.createElement("b",null,u):u,c)})},887:function(e,t,n){"use strict";var r=n(230);n.d(t,"a",function(){return r.a});n(643)},89:function(e,t,n){"use strict";n.d(t,"f",function(){return p}),n.d(t,"g",function(){return f}),n.d(t,"c",function(){return h}),n.d(t,"e",function(){return m}),n.d(t,"b",function(){return v}),n.d(t,"h",function(){return g}),n.d(t,"a",function(){return O}),n.d(t,"j",function(){return w}),n.d(t,"i",function(){return j}),n.d(t,"d",function(){return C});var r=n(86),o=n(6),i=n(18),a=n(88),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},u=/[^a-zа-яїієґàâäèéêëîïôœùûüÿçğıöş0-9\-!'’"\s]/gi,l=/\s+/gi,d=Object(i.a)("directData"),p=Object(i.d)(function(e,t){var n=[];t.useTagsTitle&&e.tags&&e.tags[0]&&n.push(e.tags[0]),t.useMarketTitle&&e.marketSnippet&&"market"===e.marketSnippet.source&&e.marketSnippet.title?n.push(e.marketSnippet.title):t.useSnippetTitle&&e.snippet.title&&n.push(e.snippet.title);var o=n.join(" ");return o=function(e){if(!e)return"";return Object(r.decodeHTMLEntities)(e).replace(u," ")}(o),t.query&&(o=t.query+" "+o),o.replace(l," ").trim()});function f(e,t){var n=s(s({},t),{query:e.query});return n.useSnippetTitleForCommOnly&&(n.useSnippetTitle=g(e,n)),void 0===n.useSnippetTitle&&(n.useSnippetTitle=!0),n}var h=Object(i.d)(function(e,t){return e&&e.docid+"_"+p(e,t)}),m=Object(i.d)(function(e,t){var n=e.config.directSnippetParams;if(n&&t){var r,o;n.useTagsTitle&&(o=Object(a.f)(t),r=Object(a.i)(e,o));var i=s(s({},t),{tags:r&&r.data}),c=h(i,n);return d(e,c)}}),v=Object(i.d)(function(e){var t,n=Object(a.e)(e),r=n.searchAdvertEnabled,o=void 0!==r&&r,i=n.useDefaultSRFallback,s=void 0!==i&&i;return o?!(t=b(e,"shown"))&&"undefined"!==typeof t&&s&&(t=b(e,"current")):t=b(e,"current"),t});function b(e,t){var n;if("shown"===t?n=Object(o.m)(e):"current"===t&&(n=Object(o.e)(e)),n){var r=m(e,n);return r&&r.data?r.data[0]||null:void 0}}var g=Object(i.d)(function(e,t){var n=t.queryCommThreshould;switch(t.commFactorName){case"qcomm":return(e.QCommercialProb||0)>n;case"qcomm2":return(e.QCommercialProbV2||0)>n;case"cm2":default:return(e.cm2||0)>n}}),y=Object(i.d)(function(e,t,n){var r=g(e,t),o=n||t;return e.isQueryPorn?r?o.directPageIdAdultCommercial:o.directPageIdAdult:r?o.directPageIdCommercial:o.directPageIdLowCommercial}),O=function(e,t){if(t){var n=m(e,t),r=n&&n.data&&n.data[0];return r&&(r.punyDomain||r.domain)}};function w(e){if(e.globalContext.isQueryPorn){var t=e.config.directStripeParams;return Boolean(t&&t.directIdAdult)}return!0}function j(e){var t=e.config.directSnippetParams;return Boolean(t&&y(e.globalContext,t))}function C(e,t,n){var r,o=e.tld,i=e.query,a=e.lr,u=t.useMarketTitle,l=t.useTagsTitle,d=t.encryptUrl,p=t.safeRequest,f=t.baseUrl,h=t.queryPagesOrder,m=c(t,["useMarketTitle","useTagsTitle","encryptUrl","safeRequest","baseUrl","queryPagesOrder"]),v=y(e,t),b=l&&n.isDuckEnabled,g=t.emptyResponseFallbackParams,O=g?y(e,t,g):void 0;h&&(r=h.map(function(n){return y(e,t,n)}));var w=s(s({},m),{tld:o,url:f,query:i,pageId:v,region:String(a),pageReqid:e.reqid,useMarketTitle:u,useTagsTitle:b,encryptUrl:d});return p&&(w.requestFunction=p),r&&(w.queryPagesOrder=r),O&&(w.emptyResponseFallbackPageId=O),w}},891:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(3),o=n(2),i=n(0),a=n.n(i),s=n(5),c=n(124),u=a.a.createElement("span",{className:c.d},"›"),l=Object(s.withBaobab)({name:"path"})(function(e){var t=e.items,n=e.boldCount,i=void 0===n?1:n,s=Object(r.useComponentRegistry)(c.c).Link,l=t&&t[t.length-1],d=e.link||l||{};return a.a.createElement("div",{className:Object(c.a)(null,[e.className])},a.a.createElement(s,{theme:"outer",className:c.b,url:d.url,logNode:Object(o.__assign)({name:"urlnav"},d.logNode),counter:d.counter,onClick:d.onClick},e.favicon,t.map(function(e,t){return a.a.createElement(a.a.Fragment,{key:t},t>0&&u,t<i?a.a.createElement("b",null,e.text):e.text)})))}),d=n(404),p=n(282),f=(n(623),new r.Registry({id:c.c}).set("Link",Object(p.a)(d.a))),h=(n(624),Object(r.withRegistry)(f)(l))},894:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(0),o=n.n(r),i=n(2),a=n(7),s=(n(631),{en:",",id:",",tr:"."}),c=function(e){if(e.length<4)return e;var t=Object(a.getI18nLang)(),n=s[t],r=/\B(?=(?:\d{3})+(?!\d))/g;return n?e.replace(r,n):e.split(r)};var u=function(e){var t=function(e){var t=e.value,n=e.withCents,r=e.key,s=Object(i.__read)(Math.abs(t||0).toFixed(n?2:0).split("."),2),u=s[0],l=s[1],d=void 0===l?"":l;d=Number(d)?(-1!==["en","id"].indexOf(Object(a.getI18nLang)())?".":",")+d:"";var p=c(u);return Array.isArray(p)?o.a.createElement("span",{className:"PriceValue",key:r},p.map(function(e,t){return o.a.createElement("span",{key:t},e)}),d):p+d}(e);return"string"===typeof t?o.a.createElement(o.a.Fragment,null,t):t},l=n(312),d=n(4),p=Object(d.cn)("Price"),f=(n(633),p("OldValue")),h=function(e){return o.a.createElement("span",{className:p(null,[e.className])},o.a.createElement(u,{value:e.value,withCents:e.withCents})," ",o.a.createElement(l.PriceCurrency,{currency:e.currency,showAbbr:e.showAbbr,rurSymbolFont:e.rurSymbolFont}),e.oldValue?o.a.createElement("span",{className:f},o.a.createElement(u,{value:e.oldValue,withCents:e.withCents})," ",o.a.createElement(l.PriceCurrency,{currency:e.currency,showAbbr:e.showAbbr,rurSymbolFont:e.rurSymbolFont})):void 0)};h.displayName="Price"},9:function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return h});var r,o=n(2),i=n(0),a=n.n(i),s=n(4),c=n(19),u=n(12),l=(n(94),function(e){var t=e.side,n=e.provider,r=Object(o.__rest)(e,["side","provider"]);return n(p("Icon",{side:t},[r.className]))}),d=(n(95),function(e){var t=e.children,n=e.className,r=Object(o.__rest)(e,["children","className"]);return a.a.createElement("span",Object(o.__assign)({},r,{className:p("Text",null,[n])}),t)}),p=(n(93),Object(s.cn)("Button2")),f={autoComplete:"off",pressKeys:[u.a.SPACE,u.a.ENTER],prvntKeys:[],as:"button",type:"button"},h=((r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={pressed:!1},t.internalInnerRef=Object(i.createRef)(),t.onKeyDown=function(e){Object(u.b)(e.keyCode,t.props.pressKeys)&&(t.setState({pressed:!0}),Object(u.b)(e.keyCode,t.props.prvntKeys)&&e.preventDefault()),void 0!==t.props.onKeyDown&&t.props.onKeyDown(e)},t.onKeyUp=function(e){Object(u.b)(e.keyCode,t.props.prvntKeys)&&e.preventDefault(),Object(u.b)(e.keyCode,t.props.pressKeys)&&t.setState({pressed:!1}),void 0!==t.props.onKeyUp&&t.props.onKeyUp(e)},t.onClick=function(e){null!==t.internalInnerRef.current&&t.internalInnerRef.current.focus(),void 0!==t.props.onClick&&t.props.onClick(e)},t.onMouseDown=function(e){navigator.userAgent.match(/safari/i)&&e.preventDefault(),t.setState({pressed:!0}),void 0!==t.props.onMouseDown&&t.props.onMouseDown(e)},t.onMouseUp=function(e){t.setState({pressed:!1}),void 0!==t.props.onMouseUp&&t.props.onMouseUp(e)},t.onMouseLeave=function(e){t.setState({pressed:!1}),void 0!==t.props.onMouseLeave&&t.props.onMouseLeave(e)},t.onBlur=function(e){t.setState({pressed:!1}),void 0!==t.props.onBlur&&t.props.onBlur(e)},t}return Object(o.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.addonAfter,n=e.addonBefore,r=e.autoComplete,i=e.checked,s=e.children,u=e.icon,f=e.iconLeft,h=e.iconRight,m=e.progress,v=e.disabled,b=e.as,g=e.type,y=e.className,O=e.innerRef,w=e.controlRef,j=e.title,C=e.role,E=(e.pressKeys,e.prvntKeys,e.view,e.theme,e.baseline,e.pin,e.width,Object(o.__rest)(e,["addonAfter","addonBefore","autoComplete","checked","children","icon","iconLeft","iconRight","progress","disabled","as","type","className","innerRef","controlRef","title","role","pressKeys","prvntKeys","view","theme","baseline","pin","width"])),S=this.state.pressed,_=b;E["string"===typeof b?"ref":"innerRef"]=Object(c.a)(this.internalInnerRef,O,w);var k=f||u;return a.a.createElement(_,Object(o.__assign)({},E,{type:g,disabled:Boolean(m||v),className:p({checked:i,progress:m,pressed:S},[y]),onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onClick:this.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseLeave:this.onMouseLeave,onBlur:this.onBlur,"aria-pressed":i,"aria-disabled":v,autoComplete:r,title:j,role:C,"aria-busy":m}),n,k&&a.a.createElement(l,{provider:k,side:s&&f?"left":void 0}),h&&a.a.createElement(l,{provider:h,side:s?"right":void 0}),s&&a.a.createElement(d,null,s),t)},t}(i.PureComponent)).displayName=p(),r.defaultProps=f,r)},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){"use strict";n.d(t,"b",function(){return v}),n.d(t,"a",function(){return b});var r=n(2),o=n(0),i=n.n(o),a=n(13),s=n(3),c=n(4),u=n(138),l=n(168);n(580);function d(e){var t=Object(o.useRef)();return Object(o.useEffect)(function(){t.current=e}),t.current}var p={value:1},f=Object(o.createContext)({value:1}),h=function(e){return Object(r.__read)(Object(o.useState)(function(e,t){return void 0===t&&(t=""),""+t+(e||p).value++}(Object(o.useContext)(f),e)),1)[0]},m=function(e){var t=e.visible,n=e.onClose,a=e.children,s=e.essentialRefs,c=h("layer-"),u=d(t),l=d(n),p=Object(o.useCallback)(function(e){if("Escape"===e.key){var t=Object(r.__read)(m.stack[m.stack.length-1]||[],2),n=t[0],o=t[1];n===c&&void 0!==o&&o(e,"esc")}},[]),f=Object(o.useCallback)(function(e){var t=Object(r.__read)(m.stack[m.stack.length-1]||[],3),n=t[0],o=t[1],i=t[2];n===c&&void 0!==o&&void 0!==i&&(i.filter(function(e){return null!==e.current}).some(function(t){return t.current.contains(e.target)})||o(e,"click"))},[]);return Object(o.useEffect)(function(){(n!==l&&void 0!==n&&m.stack.forEach(function(e,t){Object(r.__read)(e,2)[1]===l&&(m.stack[t][1]=n)}),t!==u&&void 0!==n)&&(t?(m.stack.push([c,n,s]),document.addEventListener("keyup",p),document.addEventListener("mousedown",f)):(Object(r.__read)(m.stack[m.stack.length-1]||[],1)[0]===c&&requestAnimationFrame(function(){return m.stack.pop()}),document.removeEventListener("keyup",p),document.removeEventListener("mousedown",f)))},[u,t,n,l]),Object(o.useEffect)(function(){return function(){requestAnimationFrame(function(){return m.stack.pop()}),document.removeEventListener("keyup",p),document.removeEventListener("mousedown",f)}},[]),i.a.createElement(i.a.Fragment,null,a)};m.stack=[],m.displayName="LayerManager";var v=Object(c.cn)("Popup2"),b=function(e){var t,n,c,d=e.addonAfter,p=e.addonBefore,f=e.children,h=e.className,b=e.direction,g=e.forceRender,y=e.hasTail,O=e.innerRef,w=e.keepMounted,j=void 0===w||w,C=e.position,E=e.scope,S=void 0===E?{current:Object(u.a)()?document.body:null}:E,_=e.style,k=e.tailPosition,P=e.tailRef,I=e.tailSize,x=e.visible,M=e.zIndex,N=e.unstable_onRenderTail,T=e.onClose,R=e.unstable_essentialRefs,D=void 0===R?[]:R,L=e.unstable_hostRef,A=e.onOutsideClick,B=e.onEscapeKeyDown,U=e.onClick,F=(e.theme,e.view,e.nonvisual,Object(r.__rest)(e,["addonAfter","addonBefore","children","className","direction","forceRender","hasTail","innerRef","keepMounted","position","scope","style","tailPosition","tailRef","tailSize","visible","zIndex","unstable_onRenderTail","onClose","unstable_essentialRefs","unstable_hostRef","onOutsideClick","onEscapeKeyDown","onClick","theme","view","nonvisual"])),H=Object(r.__read)(Object(o.useState)(!0),2),q=H[0],z=H[1],W=Object(o.useRef)(null);t=function(){q&&x&&z(!1)},n=[],c=Object(o.useRef)(!0),Object(o.useEffect)(function(){c.current?c.current=!1:t()},Object(r.__spread)([t],n)),Object(o.useEffect)(function(){console.assert(void 0===A||void 0===B,'Использование функции "withOutsideClick" является устаревшим API. Для закрытия используйте свойство "onClose" без использования "withOutsideClick".'),q&&(g||x)&&z(!1)},[]);var G=Object(o.useCallback)(function(e,t){"esc"===t?void 0!==B&&B(e):void 0!==A&&A(e),void 0!==T&&T(e,t)},[B,A,T]),V=Object(s.useComponentRegistry)(v()).Tail,Y=L||W;return!x&&!j||!Object(u.a)()||null===S.current||q?null:Object(a.createPortal)(i.a.createElement(m,{visible:x,onClose:G,essentialRefs:Object(r.__spread)([Y],D)},i.a.createElement("div",Object(r.__assign)({},F,{className:v({visible:x,direction:b},[h]),ref:Object(l.a)(W,O),style:Object(r.__assign)(Object(r.__assign)(Object(r.__assign)({},_),C),{zIndex:M}),onClick:U}),p,"function"===typeof f?f({tailRef:P}):f,d,N&&N(i.a.createElement(V,{innerRef:P,style:Object(r.__assign)(Object(r.__assign)({},k),{height:I,width:I})})),!N&&y&&i.a.createElement(V,{innerRef:P,style:Object(r.__assign)(Object(r.__assign)({},k),{height:I,width:I})}))),S.current)};b.displayName=v()}});